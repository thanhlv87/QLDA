(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function mE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pE={exports:{}},ud={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FR=Symbol.for("react.transitional.element"),HR=Symbol.for("react.fragment");function gE(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:FR,type:t,key:i,ref:e!==void 0?e:null,props:n}}ud.Fragment=HR;ud.jsx=gE;ud.jsxs=gE;pE.exports=ud;var g=pE.exports,yE={exports:{}},re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm=Symbol.for("react.transitional.element"),GR=Symbol.for("react.portal"),zR=Symbol.for("react.fragment"),YR=Symbol.for("react.strict_mode"),KR=Symbol.for("react.profiler"),JR=Symbol.for("react.consumer"),$R=Symbol.for("react.context"),QR=Symbol.for("react.forward_ref"),jR=Symbol.for("react.suspense"),XR=Symbol.for("react.memo"),_E=Symbol.for("react.lazy"),WR=Symbol.for("react.activity"),Gy=Symbol.iterator;function ZR(t){return t===null||typeof t!="object"?null:(t=Gy&&t[Gy]||t["@@iterator"],typeof t=="function"?t:null)}var vE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TE=Object.assign,EE={};function xo(t,e,n){this.props=t,this.context=e,this.refs=EE,this.updater=n||vE}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SE(){}SE.prototype=xo.prototype;function $m(t,e,n){this.props=t,this.context=e,this.refs=EE,this.updater=n||vE}var Qm=$m.prototype=new SE;Qm.constructor=$m;TE(Qm,xo.prototype);Qm.isPureReactComponent=!0;var zy=Array.isArray;function gh(){}var He={H:null,A:null,T:null,S:null},AE=Object.prototype.hasOwnProperty;function jm(t,e,n){var i=n.ref;return{$$typeof:Jm,type:t,key:e,ref:i!==void 0?i:null,props:n}}function eb(t,e){return jm(t.type,e,t.props)}function Xm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jm}function tb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yy=/\/+/g;function yf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tb(""+t.key):e.toString(36)}function nb(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(gh,gh):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function br(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jm:case GR:o=!0;break;case _E:return o=t._init,br(o(t._payload),e,n,i,s)}}if(o)return s=s(t),o=i===""?"."+yf(t,0):i,zy(s)?(n="",o!=null&&(n=o.replace(Yy,"$&/")+"/"),br(s,e,n,"",function(u){return u})):s!=null&&(Xm(s)&&(s=eb(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(Yy,"$&/")+"/")+o)),e.push(s)),1;o=0;var a=i===""?".":i+":";if(zy(t))for(var l=0;l<t.length;l++)i=t[l],r=a+yf(i,l),o+=br(i,e,n,r,s);else if(l=ZR(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,r=a+yf(i,l++),o+=br(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return br(nb(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function mu(t,e,n){if(t==null)return t;var i=[],s=0;return br(t,i,"","",function(r){return e.call(n,r,s++)}),i}function ib(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ky=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},sb={map:mu,forEach:function(t,e,n){mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mu(t,function(){e++}),e},toArray:function(t){return mu(t,function(e){return e})||[]},only:function(t){if(!Xm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Activity=WR;re.Children=sb;re.Component=xo;re.Fragment=zR;re.Profiler=KR;re.PureComponent=$m;re.StrictMode=YR;re.Suspense=jR;re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=He;re.__COMPILER_RUNTIME={__proto__:null,c:function(t){return He.H.useMemoCache(t)}};re.cache=function(t){return function(){return t.apply(null,arguments)}};re.cacheSignal=function(){return null};re.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=TE({},t.props),s=t.key;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)!AE.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(i[r]=e[r]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var o=Array(r),a=0;a<r;a++)o[a]=arguments[a+2];i.children=o}return jm(t.type,s,i)};re.createContext=function(t){return t={$$typeof:$R,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:JR,_context:t},t};re.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)AE.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return jm(t,r,s)};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:QR,render:t}};re.isValidElement=Xm;re.lazy=function(t){return{$$typeof:_E,_payload:{_status:-1,_result:t},_init:ib}};re.memo=function(t,e){return{$$typeof:XR,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=He.T,n={};He.T=n;try{var i=t(),s=He.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(gh,Ky)}catch(r){Ky(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),He.T=e}};re.unstable_useCacheRefresh=function(){return He.H.useCacheRefresh()};re.use=function(t){return He.H.use(t)};re.useActionState=function(t,e,n){return He.H.useActionState(t,e,n)};re.useCallback=function(t,e){return He.H.useCallback(t,e)};re.useContext=function(t){return He.H.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t,e){return He.H.useDeferredValue(t,e)};re.useEffect=function(t,e){return He.H.useEffect(t,e)};re.useEffectEvent=function(t){return He.H.useEffectEvent(t)};re.useId=function(){return He.H.useId()};re.useImperativeHandle=function(t,e,n){return He.H.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return He.H.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return He.H.useLayoutEffect(t,e)};re.useMemo=function(t,e){return He.H.useMemo(t,e)};re.useOptimistic=function(t,e){return He.H.useOptimistic(t,e)};re.useReducer=function(t,e,n){return He.H.useReducer(t,e,n)};re.useRef=function(t){return He.H.useRef(t)};re.useState=function(t){return He.H.useState(t)};re.useSyncExternalStore=function(t,e,n){return He.H.useSyncExternalStore(t,e,n)};re.useTransition=function(){return He.H.useTransition()};re.version="19.2.0";yE.exports=re;var Q=yE.exports;const rb=mE(Q);var CE={exports:{}},cd={},IE={exports:{}},wE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,W){var Z=H.length;H.push(W);e:for(;0<Z;){var Se=Z-1>>>1,ze=H[Se];if(0<s(ze,W))H[Se]=W,H[Z]=ze,Z=Se;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var W=H[0],Z=H.pop();if(Z!==W){H[0]=Z;e:for(var Se=0,ze=H.length,Sn=ze>>>1;Se<Sn;){var An=2*(Se+1)-1,Un=H[An],lt=An+1,$t=H[lt];if(0>s(Un,Z))lt<ze&&0>s($t,Un)?(H[Se]=$t,H[lt]=Z,Se=lt):(H[Se]=Un,H[An]=Z,Se=An);else if(lt<ze&&0>s($t,Z))H[Se]=$t,H[lt]=Z,Se=lt;else break e}}return W}function s(H,W){var Z=H.sortIndex-W.sortIndex;return Z!==0?Z:H.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,m=null,p=3,v=!1,w=!1,N=!1,V=!1,I=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(H){for(var W=n(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=H)i(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(u)}}function U(H){if(N=!1,M(H),!w)if(n(l)!==null)w=!0,O||(O=!0,P());else{var W=n(u);W!==null&&Ne(U,W.startTime-H)}}var O=!1,A=-1,T=5,E=-1;function b(){return V?!0:!(t.unstable_now()-E<T)}function D(){if(V=!1,O){var H=t.unstable_now();E=H;var W=!0;try{e:{w=!1,N&&(N=!1,S(A),A=-1),v=!0;var Z=p;try{t:{for(M(H),m=n(l);m!==null&&!(m.expirationTime>H&&b());){var Se=m.callback;if(typeof Se=="function"){m.callback=null,p=m.priorityLevel;var ze=Se(m.expirationTime<=H);if(H=t.unstable_now(),typeof ze=="function"){m.callback=ze,M(H),W=!0;break t}m===n(l)&&i(l),M(H)}else i(l);m=n(l)}if(m!==null)W=!0;else{var Sn=n(u);Sn!==null&&Ne(U,Sn.startTime-H),W=!1}}break e}finally{m=null,p=Z,v=!1}W=void 0}}finally{W?P():O=!1}}}var P;if(typeof R=="function")P=function(){R(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,xe=x.port2;x.port1.onmessage=D,P=function(){xe.postMessage(null)}}else P=function(){I(D,0)};function Ne(H,W){A=I(function(){H(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var Z=p;p=W;try{return H()}finally{p=Z}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Z=p;p=H;try{return W()}finally{p=Z}},t.unstable_scheduleCallback=function(H,W,Z){var Se=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Se+Z:Se):Z=Se,H){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=Z+ze,H={id:h++,callback:W,priorityLevel:H,startTime:Z,expirationTime:ze,sortIndex:-1},Z>Se?(H.sortIndex=Z,e(u,H),n(l)===null&&H===n(u)&&(N?(S(A),A=-1):N=!0,Ne(U,Z-Se))):(H.sortIndex=ze,e(l,H),w||v||(w=!0,O||(O=!0,P()))),H},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(H){var W=p;return function(){var Z=p;p=W;try{return H.apply(this,arguments)}finally{p=Z}}}})(wE);IE.exports=wE;var ob=IE.exports,RE={exports:{}},Ot={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab=Q;function bE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Vi(){}var Lt={d:{f:Vi,r:function(){throw Error(bE(522))},D:Vi,C:Vi,L:Vi,m:Vi,X:Vi,S:Vi,M:Vi},p:0,findDOMNode:null},lb=Symbol.for("react.portal");function ub(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lb,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Ba=ab.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function dd(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Lt;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(bE(299));return ub(t,e,null,n)};Ot.flushSync=function(t){var e=Ba.T,n=Lt.p;try{if(Ba.T=null,Lt.p=2,t)return t()}finally{Ba.T=e,Lt.p=n,Lt.d.f()}};Ot.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Lt.d.C(t,e))};Ot.prefetchDNS=function(t){typeof t=="string"&&Lt.d.D(t)};Ot.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=dd(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Lt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Lt.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Ot.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=dd(e.as,e.crossOrigin);Lt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Lt.d.M(t)};Ot.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=dd(n,e.crossOrigin);Lt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Ot.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=dd(e.as,e.crossOrigin);Lt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Lt.d.m(t)};Ot.requestFormReset=function(t){Lt.d.r(t)};Ot.unstable_batchedUpdates=function(t,e){return t(e)};Ot.useFormState=function(t,e,n){return Ba.H.useFormState(t,e,n)};Ot.useFormStatus=function(){return Ba.H.useHostTransitionStatus()};Ot.version="19.2.0";function xE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xE)}catch(t){console.error(t)}}xE(),RE.exports=Ot;var cb=RE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ht=ob,NE=Q,db=cb;function B(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ME(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ml(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function PE(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jy(t){if(Ml(t)!==t)throw Error(B(188))}function fb(t){var e=t.alternate;if(!e){if(e=Ml(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Jy(s),t;if(r===i)return Jy(s),e;r=r.sibling}throw Error(B(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function VE(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=VE(t),e!==null)return e;t=t.sibling}return null}var Ge=Object.assign,hb=Symbol.for("react.element"),pu=Symbol.for("react.transitional.element"),ba=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),UE=Symbol.for("react.strict_mode"),yh=Symbol.for("react.profiler"),kE=Symbol.for("react.consumer"),li=Symbol.for("react.context"),Wm=Symbol.for("react.forward_ref"),_h=Symbol.for("react.suspense"),vh=Symbol.for("react.suspense_list"),Zm=Symbol.for("react.memo"),Li=Symbol.for("react.lazy"),Th=Symbol.for("react.activity"),mb=Symbol.for("react.memo_cache_sentinel"),$y=Symbol.iterator;function ha(t){return t===null||typeof t!="object"?null:(t=$y&&t[$y]||t["@@iterator"],typeof t=="function"?t:null)}var pb=Symbol.for("react.client.reference");function Eh(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===pb?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ur:return"Fragment";case yh:return"Profiler";case UE:return"StrictMode";case _h:return"Suspense";case vh:return"SuspenseList";case Th:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ba:return"Portal";case li:return t.displayName||"Context";case kE:return(t._context.displayName||"Context")+".Consumer";case Wm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zm:return e=t.displayName||null,e!==null?e:Eh(t.type)||"Memo";case Li:e=t._payload,t=t._init;try{return Eh(t(e))}catch{}}return null}var xa=Array.isArray,ne=NE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=db.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ks={pending:!1,data:null,method:null,action:null},Sh=[],kr=-1;function Zn(t){return{current:t}}function vt(t){0>kr||(t.current=Sh[kr],Sh[kr]=null,kr--)}function Ue(t,e){kr++,Sh[kr]=t.current,t.current=e}var zn=Zn(null),al=Zn(null),es=Zn(null),dc=Zn(null);function fc(t,e){switch(Ue(es,e),Ue(al,t),Ue(zn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?ev(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=ev(e),t=nC(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}vt(zn),Ue(zn,t)}function uo(){vt(zn),vt(al),vt(es)}function Ah(t){t.memoizedState!==null&&Ue(dc,t);var e=zn.current,n=nC(e,t.type);e!==n&&(Ue(al,t),Ue(zn,n))}function hc(t){al.current===t&&(vt(zn),vt(al)),dc.current===t&&(vt(dc),_l._currentValue=Ks)}var _f,Qy;function qs(t){if(_f===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_f=e&&e[1]||"",Qy=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_f+t+Qy}var vf=!1;function Tf(t,e){if(!t||vf)return"";vf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(v){var p=v}Reflect.construct(t,[],m)}else{try{m.call()}catch(v){p=v}t.call(m.prototype)}}else{try{throw Error()}catch(v){p=v}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(v){if(v&&p&&typeof v.stack=="string")return[v.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),o=r[0],a=r[1];if(o&&a){var l=o.split(`
`),u=a.split(`
`);for(s=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(i===l.length||s===u.length)for(i=l.length-1,s=u.length-1;1<=i&&0<=s&&l[i]!==u[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==u[s]){if(i!==1||s!==1)do if(i--,s--,0>s||l[i]!==u[s]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=s);break}}}finally{vf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?qs(n):""}function gb(t,e){switch(t.tag){case 26:case 27:case 5:return qs(t.type);case 16:return qs("Lazy");case 13:return t.child!==e&&e!==null?qs("Suspense Fallback"):qs("Suspense");case 19:return qs("SuspenseList");case 0:case 15:return Tf(t.type,!1);case 11:return Tf(t.type.render,!1);case 1:return Tf(t.type,!0);case 31:return qs("Activity");default:return""}}function jy(t){try{var e="",n=null;do e+=gb(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Ch=Object.prototype.hasOwnProperty,ep=ht.unstable_scheduleCallback,Ef=ht.unstable_cancelCallback,yb=ht.unstable_shouldYield,_b=ht.unstable_requestPaint,tn=ht.unstable_now,vb=ht.unstable_getCurrentPriorityLevel,LE=ht.unstable_ImmediatePriority,OE=ht.unstable_UserBlockingPriority,mc=ht.unstable_NormalPriority,Tb=ht.unstable_LowPriority,qE=ht.unstable_IdlePriority,Eb=ht.log,Sb=ht.unstable_setDisableYieldValue,Dl=null,nn=null;function Ji(t){if(typeof Eb=="function"&&Sb(t),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(Dl,t)}catch{}}var sn=Math.clz32?Math.clz32:Ib,Ab=Math.log,Cb=Math.LN2;function Ib(t){return t>>>=0,t===0?32:31-(Ab(t)/Cb|0)|0}var gu=256,yu=262144,_u=4194304;function Bs(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fd(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var a=i&134217727;return a!==0?(i=a&~r,i!==0?s=Bs(i):(o&=a,o!==0?s=Bs(o):n||(n=a&~t,n!==0&&(s=Bs(n))))):(a=i&~r,a!==0?s=Bs(a):o!==0?s=Bs(o):n||(n=i&~t,n!==0&&(s=Bs(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function Pl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function wb(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BE(){var t=_u;return _u<<=1,!(_u&62914560)&&(_u=4194304),t}function Sf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Rb(t,e,n,i,s,r){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,l=t.expirationTimes,u=t.hiddenUpdates;for(n=o&~n;0<n;){var h=31-sn(n),m=1<<h;a[h]=0,l[h]=-1;var p=u[h];if(p!==null)for(u[h]=null,h=0;h<p.length;h++){var v=p[h];v!==null&&(v.lane&=-536870913)}n&=~m}i!==0&&FE(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(o&~e))}function FE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-sn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function HE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-sn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function GE(t,e){var n=e&-e;return n=n&42?1:tp(n),n&(t.suspendedLanes|e)?0:n}function tp(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function np(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function zE(){var t=Ee.p;return t!==0?t:(t=window.event,t===void 0?32:hC(t.type))}function Xy(t,e){var n=Ee.p;try{return Ee.p=t,e()}finally{Ee.p=n}}var ws=Math.random().toString(36).slice(2),At="__reactFiber$"+ws,Kt="__reactProps$"+ws,No="__reactContainer$"+ws,Ih="__reactEvents$"+ws,bb="__reactListeners$"+ws,xb="__reactHandles$"+ws,Wy="__reactResources$"+ws,Ul="__reactMarker$"+ws;function ip(t){delete t[At],delete t[Kt],delete t[Ih],delete t[bb],delete t[xb]}function Lr(t){var e=t[At];if(e)return e;for(var n=t.parentNode;n;){if(e=n[No]||n[At]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rv(t);t!==null;){if(n=t[At])return n;t=rv(t)}return e}t=n,n=t.parentNode}return null}function Mo(t){if(t=t[At]||t[No]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Na(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(B(33))}function Qr(t){var e=t[Wy];return e||(e=t[Wy]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function _t(t){t[Ul]=!0}var YE=new Set,KE={};function fr(t,e){co(t,e),co(t+"Capture",e)}function co(t,e){for(KE[t]=e,t=0;t<e.length;t++)YE.add(e[t])}var Nb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zy={},e_={};function Mb(t){return Ch.call(e_,t)?!0:Ch.call(Zy,t)?!1:Nb.test(t)?e_[t]=!0:(Zy[t]=!0,!1)}function qu(t,e,n){if(Mb(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function vu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ti(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function cn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Db(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,r=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wh(t){if(!t._valueTracker){var e=JE(t)?"checked":"value";t._valueTracker=Db(t,e,""+t[e])}}function $E(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=JE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function pc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Pb=/[\n"\\]/g;function hn(t){return t.replace(Pb,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Rh(t,e,n,i,s,r,o,a){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+cn(e)):t.value!==""+cn(e)&&(t.value=""+cn(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?bh(t,o,cn(e)):n!=null?bh(t,o,cn(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+cn(a):t.removeAttribute("name")}function QE(t,e,n,i,s,r,o,a){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){wh(t);return}n=n!=null?""+cn(n):"",e=e!=null?""+cn(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=a?t.checked:!!i,t.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),wh(t)}function bh(t,e,n){e==="number"&&pc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function jr(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+cn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jE(t,e,n){if(e!=null&&(e=""+cn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+cn(n):""}function XE(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(B(92));if(xa(i)){if(1<i.length)throw Error(B(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=cn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),wh(t)}function fo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function t_(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||Vb.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function WE(t,e,n){if(e!=null&&typeof e!="object")throw Error(B(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&t_(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&t_(t,r,e[r])}function sp(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ub=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bu(t){return kb.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ui(){}var xh=null;function rp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Or=null,Xr=null;function n_(t){var e=Mo(t);if(e&&(t=e.stateNode)){var n=t[Kt]||null;e:switch(t=e.stateNode,e.type){case"input":if(Rh(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[Kt]||null;if(!s)throw Error(B(90));Rh(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&$E(i)}break e;case"textarea":jE(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&jr(t,!!n.multiple,e,!1)}}}var Af=!1;function ZE(t,e,n){if(Af)return t(e,n);Af=!0;try{var i=t(e);return i}finally{if(Af=!1,(Or!==null||Xr!==null)&&(Cd(),Or&&(e=Or,t=Xr,Xr=Or=null,n_(e),t)))for(e=0;e<t.length;e++)n_(t[e])}}function ll(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Kt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nh=!1;if(gi)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){Nh=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{Nh=!1}var $i=null,op=null,Fu=null;function eS(){if(Fu)return Fu;var t,e=op,n=e.length,i,s="value"in $i?$i.value:$i.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return Fu=s.slice(t,1<i?1-i:void 0)}function Hu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tu(){return!0}function i_(){return!1}function Jt(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Tu:i_,this.isPropagationStopped=i_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),e}var hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=Jt(hr),kl=Ge({},hr,{view:0,detail:0}),Lb=Jt(kl),Cf,If,pa,md=Ge({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ap,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pa&&(pa&&t.type==="mousemove"?(Cf=t.screenX-pa.screenX,If=t.screenY-pa.screenY):If=Cf=0,pa=t),Cf)},movementY:function(t){return"movementY"in t?t.movementY:If}}),s_=Jt(md),Ob=Ge({},md,{dataTransfer:0}),qb=Jt(Ob),Bb=Ge({},kl,{relatedTarget:0}),wf=Jt(Bb),Fb=Ge({},hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Hb=Jt(Fb),Gb=Ge({},hr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zb=Jt(Gb),Yb=Ge({},hr,{data:0}),r_=Jt(Yb),Kb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$b[t])?!!e[t]:!1}function ap(){return Qb}var jb=Ge({},kl,{key:function(t){if(t.key){var e=Kb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ap,charCode:function(t){return t.type==="keypress"?Hu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xb=Jt(jb),Wb=Ge({},md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o_=Jt(Wb),Zb=Ge({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ap}),ex=Jt(Zb),tx=Ge({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),nx=Jt(tx),ix=Ge({},md,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sx=Jt(ix),rx=Ge({},hr,{newState:0,oldState:0}),ox=Jt(rx),ax=[9,13,27,32],lp=gi&&"CompositionEvent"in window,Fa=null;gi&&"documentMode"in document&&(Fa=document.documentMode);var lx=gi&&"TextEvent"in window&&!Fa,tS=gi&&(!lp||Fa&&8<Fa&&11>=Fa),a_=" ",l_=!1;function nS(t,e){switch(t){case"keyup":return ax.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qr=!1;function ux(t,e){switch(t){case"compositionend":return iS(e);case"keypress":return e.which!==32?null:(l_=!0,a_);case"textInput":return t=e.data,t===a_&&l_?null:t;default:return null}}function cx(t,e){if(qr)return t==="compositionend"||!lp&&nS(t,e)?(t=eS(),Fu=op=$i=null,qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tS&&e.locale!=="ko"?null:e.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dx[t.type]:e==="textarea"}function sS(t,e,n,i){Or?Xr?Xr.push(i):Xr=[i]:Or=i,e=Pc(e,"onChange"),0<e.length&&(n=new hd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ha=null,ul=null;function fx(t){ZA(t,0)}function pd(t){var e=Na(t);if($E(e))return t}function c_(t,e){if(t==="change")return e}var rS=!1;if(gi){var Rf;if(gi){var bf="oninput"in document;if(!bf){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),bf=typeof d_.oninput=="function"}Rf=bf}else Rf=!1;rS=Rf&&(!document.documentMode||9<document.documentMode)}function f_(){Ha&&(Ha.detachEvent("onpropertychange",oS),ul=Ha=null)}function oS(t){if(t.propertyName==="value"&&pd(ul)){var e=[];sS(e,ul,t,rp(t)),ZE(fx,e)}}function hx(t,e,n){t==="focusin"?(f_(),Ha=e,ul=n,Ha.attachEvent("onpropertychange",oS)):t==="focusout"&&f_()}function mx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pd(ul)}function px(t,e){if(t==="click")return pd(e)}function gx(t,e){if(t==="input"||t==="change")return pd(e)}function yx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:yx;function cl(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Ch.call(e,s)||!on(t[s],e[s]))return!1}return!0}function h_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m_(t,e){var n=h_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=h_(n)}}function aS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lS(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=pc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pc(t.document)}return e}function up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var _x=gi&&"documentMode"in document&&11>=document.documentMode,Br=null,Mh=null,Ga=null,Dh=!1;function p_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dh||Br==null||Br!==pc(i)||(i=Br,"selectionStart"in i&&up(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ga&&cl(Ga,i)||(Ga=i,i=Pc(Mh,"onSelect"),0<i.length&&(e=new hd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Br)))}function Os(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fr={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},xf={},uS={};gi&&(uS=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function mr(t){if(xf[t])return xf[t];if(!Fr[t])return t;var e=Fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uS)return xf[t]=e[n];return t}var cS=mr("animationend"),dS=mr("animationiteration"),fS=mr("animationstart"),vx=mr("transitionrun"),Tx=mr("transitionstart"),Ex=mr("transitioncancel"),hS=mr("transitionend"),mS=new Map,Ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ph.push("scrollEnd");function Pn(t,e){mS.set(t,e),fr(e,[t])}var gc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},un=[],Hr=0,cp=0;function gd(){for(var t=Hr,e=cp=Hr=0;e<t;){var n=un[e];un[e++]=null;var i=un[e];un[e++]=null;var s=un[e];un[e++]=null;var r=un[e];if(un[e++]=null,i!==null&&s!==null){var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}r!==0&&pS(n,s,r)}}function yd(t,e,n,i){un[Hr++]=t,un[Hr++]=e,un[Hr++]=n,un[Hr++]=i,cp|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function dp(t,e,n,i){return yd(t,e,n,i),yc(t)}function pr(t,e){return yd(t,null,null,e),yc(t)}function pS(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-sn(n),t=r.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),r):null}function yc(t){if(50<Wa)throw Wa=0,em=null,Error(B(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Gr={};function Sx(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,i){return new Sx(t,e,n,i)}function fp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hi(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function gS(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Gu(t,e,n,i,s,r){var o=0;if(i=t,typeof t=="function")fp(t)&&(o=1);else if(typeof t=="string")o=RN(t,n,zn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Th:return t=Wt(31,n,e,s),t.elementType=Th,t.lanes=r,t;case Ur:return Js(n.children,s,r,e);case UE:o=8,s|=24;break;case yh:return t=Wt(12,n,e,s|2),t.elementType=yh,t.lanes=r,t;case _h:return t=Wt(13,n,e,s),t.elementType=_h,t.lanes=r,t;case vh:return t=Wt(19,n,e,s),t.elementType=vh,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case li:o=10;break e;case kE:o=9;break e;case Wm:o=11;break e;case Zm:o=14;break e;case Li:o=16,i=null;break e}o=29,n=Error(B(130,t===null?"null":typeof t,"")),i=null}return e=Wt(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Js(t,e,n,i){return t=Wt(7,t,i,e),t.lanes=n,t}function Nf(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function yS(t){var e=Wt(18,null,null,0);return e.stateNode=t,e}function Mf(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var g_=new WeakMap;function mn(t,e){if(typeof t=="object"&&t!==null){var n=g_.get(t);return n!==void 0?n:(e={value:t,source:e,stack:jy(e)},g_.set(t,e),e)}return{value:t,source:e,stack:jy(e)}}var zr=[],Yr=0,_c=null,dl=0,dn=[],fn=0,gs=null,Fn=1,Hn="";function oi(t,e){zr[Yr++]=dl,zr[Yr++]=_c,_c=t,dl=e}function _S(t,e,n){dn[fn++]=Fn,dn[fn++]=Hn,dn[fn++]=gs,gs=t;var i=Fn;t=Hn;var s=32-sn(i)-1;i&=~(1<<s),n+=1;var r=32-sn(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Fn=1<<32-sn(e)+s|n<<s|i,Hn=r+t}else Fn=1<<r|n<<s|i,Hn=t}function hp(t){t.return!==null&&(oi(t,1),_S(t,1,0))}function mp(t){for(;t===_c;)_c=zr[--Yr],zr[Yr]=null,dl=zr[--Yr],zr[Yr]=null;for(;t===gs;)gs=dn[--fn],dn[fn]=null,Hn=dn[--fn],dn[fn]=null,Fn=dn[--fn],dn[fn]=null}function vS(t,e){dn[fn++]=Fn,dn[fn++]=Hn,dn[fn++]=gs,Fn=e.id,Hn=e.overflow,gs=t}var Ct=null,Be=null,ge=!1,ts=null,pn=!1,Vh=Error(B(519));function ys(t){var e=Error(B(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(mn(e,t)),Vh}function y_(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[At]=t,e[Kt]=i,n){case"dialog":ce("cancel",e),ce("close",e);break;case"iframe":case"object":case"embed":ce("load",e);break;case"video":case"audio":for(n=0;n<gl.length;n++)ce(gl[n],e);break;case"source":ce("error",e);break;case"img":case"image":case"link":ce("error",e),ce("load",e);break;case"details":ce("toggle",e);break;case"input":ce("invalid",e),QE(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ce("invalid",e);break;case"textarea":ce("invalid",e),XE(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||tC(e.textContent,n)?(i.popover!=null&&(ce("beforetoggle",e),ce("toggle",e)),i.onScroll!=null&&ce("scroll",e),i.onScrollEnd!=null&&ce("scrollend",e),i.onClick!=null&&(e.onclick=ui),e=!0):e=!1,e||ys(t,!0)}function __(t){for(Ct=t.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:pn=!1;return;case 27:case 3:pn=!0;return;default:Ct=Ct.return}}function Cr(t){if(t!==Ct)return!1;if(!ge)return __(t),ge=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||rm(t.type,t.memoizedProps)),n=!n),n&&Be&&ys(t),__(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Be=sv(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Be=sv(t)}else e===27?(e=Be,Rs(t.type)?(t=um,um=null,Be=t):Be=e):Be=Ct?vn(t.stateNode.nextSibling):null;return!0}function Zs(){Be=Ct=null,ge=!1}function Df(){var t=ts;return t!==null&&(Ht===null?Ht=t:Ht.push.apply(Ht,t),ts=null),t}function fl(t){ts===null?ts=[t]:ts.push(t)}var Uh=Zn(null),gr=null,ci=null;function qi(t,e,n){Ue(Uh,e._currentValue),e._currentValue=n}function mi(t){t._currentValue=Uh.current,vt(Uh)}function kh(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Lh(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var o=s.child;r=r.firstContext;e:for(;r!==null;){var a=r;r=s;for(var l=0;l<e.length;l++)if(a.context===e[l]){r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),kh(r.return,n,t),i||(o=null);break e}r=a.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,r=o.alternate,r!==null&&(r.lanes|=n),kh(o,n,t),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function Do(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(B(387));if(o=o.memoizedProps,o!==null){var a=s.type;on(s.pendingProps.value,o.value)||(t!==null?t.push(a):t=[a])}}else if(s===dc.current){if(o=s.alternate,o===null)throw Error(B(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(_l):t=[_l])}s=s.return}t!==null&&Lh(e,t,n,i),e.flags|=262144}function vc(t){for(t=t.firstContext;t!==null;){if(!on(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function er(t){gr=t,ci=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function wt(t){return TS(gr,t)}function Eu(t,e){return gr===null&&er(t),TS(t,e)}function TS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},ci===null){if(t===null)throw Error(B(308));ci=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ci=ci.next=e;return n}var Ax=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Cx=ht.unstable_scheduleCallback,Ix=ht.unstable_NormalPriority,it={$$typeof:li,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pp(){return{controller:new Ax,data:new Map,refCount:0}}function Ll(t){t.refCount--,t.refCount===0&&Cx(Ix,function(){t.controller.abort()})}var za=null,Oh=0,ho=0,Wr=null;function wx(t,e){if(za===null){var n=za=[];Oh=0,ho=Bp(),Wr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Oh++,e.then(v_,v_),e}function v_(){if(--Oh===0&&za!==null){Wr!==null&&(Wr.status="fulfilled");var t=za;za=null,ho=0,Wr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Rx(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var T_=ne.S;ne.S=function(t,e){VA=tn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&wx(t,e),T_!==null&&T_(t,e)};var $s=Zn(null);function gp(){var t=$s.current;return t!==null?t:De.pooledCache}function zu(t,e){e===null?Ue($s,$s.current):Ue($s,e.pool)}function ES(){var t=gp();return t===null?null:{parent:it._currentValue,pool:t}}var Po=Error(B(460)),yp=Error(B(474)),_d=Error(B(542)),Tc={then:function(){}};function E_(t){return t=t.status,t==="fulfilled"||t==="rejected"}function SS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ui,ui),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,A_(t),t;default:if(typeof e.status=="string")e.then(ui,ui);else{if(t=De,t!==null&&100<t.shellSuspendCounter)throw Error(B(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,A_(t),t}throw Qs=e,Po}}function Fs(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Qs=n,Po):n}}var Qs=null;function S_(){if(Qs===null)throw Error(B(459));var t=Qs;return Qs=null,t}function A_(t){if(t===Po||t===_d)throw Error(B(483))}var Zr=null,hl=0;function Su(t){var e=hl;return hl+=1,Zr===null&&(Zr=[]),SS(Zr,t,e)}function ga(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Au(t,e){throw e.$$typeof===hb?Error(B(525)):(t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function AS(t){function e(I,S){if(t){var R=I.deletions;R===null?(I.deletions=[S],I.flags|=16):R.push(S)}}function n(I,S){if(!t)return null;for(;S!==null;)e(I,S),S=S.sibling;return null}function i(I){for(var S=new Map;I!==null;)I.key!==null?S.set(I.key,I):S.set(I.index,I),I=I.sibling;return S}function s(I,S){return I=hi(I,S),I.index=0,I.sibling=null,I}function r(I,S,R){return I.index=R,t?(R=I.alternate,R!==null?(R=R.index,R<S?(I.flags|=67108866,S):R):(I.flags|=67108866,S)):(I.flags|=1048576,S)}function o(I){return t&&I.alternate===null&&(I.flags|=67108866),I}function a(I,S,R,M){return S===null||S.tag!==6?(S=Nf(R,I.mode,M),S.return=I,S):(S=s(S,R),S.return=I,S)}function l(I,S,R,M){var U=R.type;return U===Ur?h(I,S,R.props.children,M,R.key):S!==null&&(S.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Li&&Fs(U)===S.type)?(S=s(S,R.props),ga(S,R),S.return=I,S):(S=Gu(R.type,R.key,R.props,null,I.mode,M),ga(S,R),S.return=I,S)}function u(I,S,R,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==R.containerInfo||S.stateNode.implementation!==R.implementation?(S=Mf(R,I.mode,M),S.return=I,S):(S=s(S,R.children||[]),S.return=I,S)}function h(I,S,R,M,U){return S===null||S.tag!==7?(S=Js(R,I.mode,M,U),S.return=I,S):(S=s(S,R),S.return=I,S)}function m(I,S,R){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=Nf(""+S,I.mode,R),S.return=I,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case pu:return R=Gu(S.type,S.key,S.props,null,I.mode,R),ga(R,S),R.return=I,R;case ba:return S=Mf(S,I.mode,R),S.return=I,S;case Li:return S=Fs(S),m(I,S,R)}if(xa(S)||ha(S))return S=Js(S,I.mode,R,null),S.return=I,S;if(typeof S.then=="function")return m(I,Su(S),R);if(S.$$typeof===li)return m(I,Eu(I,S),R);Au(I,S)}return null}function p(I,S,R,M){var U=S!==null?S.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return U!==null?null:a(I,S,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case pu:return R.key===U?l(I,S,R,M):null;case ba:return R.key===U?u(I,S,R,M):null;case Li:return R=Fs(R),p(I,S,R,M)}if(xa(R)||ha(R))return U!==null?null:h(I,S,R,M,null);if(typeof R.then=="function")return p(I,S,Su(R),M);if(R.$$typeof===li)return p(I,S,Eu(I,R),M);Au(I,R)}return null}function v(I,S,R,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return I=I.get(R)||null,a(S,I,""+M,U);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case pu:return I=I.get(M.key===null?R:M.key)||null,l(S,I,M,U);case ba:return I=I.get(M.key===null?R:M.key)||null,u(S,I,M,U);case Li:return M=Fs(M),v(I,S,R,M,U)}if(xa(M)||ha(M))return I=I.get(R)||null,h(S,I,M,U,null);if(typeof M.then=="function")return v(I,S,R,Su(M),U);if(M.$$typeof===li)return v(I,S,R,Eu(S,M),U);Au(S,M)}return null}function w(I,S,R,M){for(var U=null,O=null,A=S,T=S=0,E=null;A!==null&&T<R.length;T++){A.index>T?(E=A,A=null):E=A.sibling;var b=p(I,A,R[T],M);if(b===null){A===null&&(A=E);break}t&&A&&b.alternate===null&&e(I,A),S=r(b,S,T),O===null?U=b:O.sibling=b,O=b,A=E}if(T===R.length)return n(I,A),ge&&oi(I,T),U;if(A===null){for(;T<R.length;T++)A=m(I,R[T],M),A!==null&&(S=r(A,S,T),O===null?U=A:O.sibling=A,O=A);return ge&&oi(I,T),U}for(A=i(A);T<R.length;T++)E=v(A,I,T,R[T],M),E!==null&&(t&&E.alternate!==null&&A.delete(E.key===null?T:E.key),S=r(E,S,T),O===null?U=E:O.sibling=E,O=E);return t&&A.forEach(function(D){return e(I,D)}),ge&&oi(I,T),U}function N(I,S,R,M){if(R==null)throw Error(B(151));for(var U=null,O=null,A=S,T=S=0,E=null,b=R.next();A!==null&&!b.done;T++,b=R.next()){A.index>T?(E=A,A=null):E=A.sibling;var D=p(I,A,b.value,M);if(D===null){A===null&&(A=E);break}t&&A&&D.alternate===null&&e(I,A),S=r(D,S,T),O===null?U=D:O.sibling=D,O=D,A=E}if(b.done)return n(I,A),ge&&oi(I,T),U;if(A===null){for(;!b.done;T++,b=R.next())b=m(I,b.value,M),b!==null&&(S=r(b,S,T),O===null?U=b:O.sibling=b,O=b);return ge&&oi(I,T),U}for(A=i(A);!b.done;T++,b=R.next())b=v(A,I,T,b.value,M),b!==null&&(t&&b.alternate!==null&&A.delete(b.key===null?T:b.key),S=r(b,S,T),O===null?U=b:O.sibling=b,O=b);return t&&A.forEach(function(P){return e(I,P)}),ge&&oi(I,T),U}function V(I,S,R,M){if(typeof R=="object"&&R!==null&&R.type===Ur&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case pu:e:{for(var U=R.key;S!==null;){if(S.key===U){if(U=R.type,U===Ur){if(S.tag===7){n(I,S.sibling),M=s(S,R.props.children),M.return=I,I=M;break e}}else if(S.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Li&&Fs(U)===S.type){n(I,S.sibling),M=s(S,R.props),ga(M,R),M.return=I,I=M;break e}n(I,S);break}else e(I,S);S=S.sibling}R.type===Ur?(M=Js(R.props.children,I.mode,M,R.key),M.return=I,I=M):(M=Gu(R.type,R.key,R.props,null,I.mode,M),ga(M,R),M.return=I,I=M)}return o(I);case ba:e:{for(U=R.key;S!==null;){if(S.key===U)if(S.tag===4&&S.stateNode.containerInfo===R.containerInfo&&S.stateNode.implementation===R.implementation){n(I,S.sibling),M=s(S,R.children||[]),M.return=I,I=M;break e}else{n(I,S);break}else e(I,S);S=S.sibling}M=Mf(R,I.mode,M),M.return=I,I=M}return o(I);case Li:return R=Fs(R),V(I,S,R,M)}if(xa(R))return w(I,S,R,M);if(ha(R)){if(U=ha(R),typeof U!="function")throw Error(B(150));return R=U.call(R),N(I,S,R,M)}if(typeof R.then=="function")return V(I,S,Su(R),M);if(R.$$typeof===li)return V(I,S,Eu(I,R),M);Au(I,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,S!==null&&S.tag===6?(n(I,S.sibling),M=s(S,R),M.return=I,I=M):(n(I,S),M=Nf(R,I.mode,M),M.return=I,I=M),o(I)):n(I,S)}return function(I,S,R,M){try{hl=0;var U=V(I,S,R,M);return Zr=null,U}catch(A){if(A===Po||A===_d)throw A;var O=Wt(29,A,null,I.mode);return O.lanes=M,O.return=I,O}finally{}}}var tr=AS(!0),CS=AS(!1),Oi=!1;function _p(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ns(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function is(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Te&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=yc(t),pS(t,null,n),e}return yd(t,i,e,n),yc(t)}function Ya(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,HE(t,n)}}function Pf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Bh=!1;function Ka(){if(Bh){var t=Wr;if(t!==null)throw t}}function Ja(t,e,n,i){Bh=!1;var s=t.updateQueue;Oi=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?r=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(r!==null){var m=s.baseState;o=0,h=u=l=null,a=r;do{var p=a.lane&-536870913,v=p!==a.lane;if(v?(pe&p)===p:(i&p)===p){p!==0&&p===ho&&(Bh=!0),h!==null&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var w=t,N=a;p=e;var V=n;switch(N.tag){case 1:if(w=N.payload,typeof w=="function"){m=w.call(V,m,p);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,p=typeof w=="function"?w.call(V,m,p):w,p==null)break e;m=Ge({},m,p);break e;case 2:Oi=!0}}p=a.callback,p!==null&&(t.flags|=64,v&&(t.flags|=8192),v=s.callbacks,v===null?s.callbacks=[p]:v.push(p))}else v={lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,l=m):h=h.next=v,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;v=a,a=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);h===null&&(l=m),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,r===null&&(s.shared.lanes=0),vs|=o,t.lanes=o,t.memoizedState=m}}function IS(t,e){if(typeof t!="function")throw Error(B(191,t));t.call(e)}function wS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)IS(n[t],e)}var mo=Zn(null),Ec=Zn(0);function C_(t,e){t=Ti,Ue(Ec,t),Ue(mo,e),Ti=t|e.baseLanes}function Fh(){Ue(Ec,Ti),Ue(mo,mo.current)}function vp(){Ti=Ec.current,vt(mo),vt(Ec)}var an=Zn(null),_n=null;function Bi(t){var e=t.alternate;Ue(We,We.current&1),Ue(an,t),_n===null&&(e===null||mo.current!==null||e.memoizedState!==null)&&(_n=t)}function Hh(t){Ue(We,We.current),Ue(an,t),_n===null&&(_n=t)}function RS(t){t.tag===22?(Ue(We,We.current),Ue(an,t),_n===null&&(_n=t)):Fi()}function Fi(){Ue(We,We.current),Ue(an,an.current)}function Xt(t){vt(an),_n===t&&(_n=null),vt(We)}var We=Zn(0);function Sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||am(n)||lm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yi=0,oe=null,be=null,tt=null,Ac=!1,eo=!1,nr=!1,Cc=0,ml=0,to=null,bx=0;function Qe(){throw Error(B(321))}function Tp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Ep(t,e,n,i,s,r){return yi=r,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ne.H=t===null||t.memoizedState===null?sA:Dp,nr=!1,r=n(i,s),nr=!1,eo&&(r=xS(e,n,i,s)),bS(t),r}function bS(t){ne.H=pl;var e=be!==null&&be.next!==null;if(yi=0,tt=be=oe=null,Ac=!1,ml=0,to=null,e)throw Error(B(300));t===null||rt||(t=t.dependencies,t!==null&&vc(t)&&(rt=!0))}function xS(t,e,n,i){oe=t;var s=0;do{if(eo&&(to=null),ml=0,eo=!1,25<=s)throw Error(B(301));if(s+=1,tt=be=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ne.H=rA,r=e(n,i)}while(eo);return r}function xx(){var t=ne.H,e=t.useState()[0];return e=typeof e.then=="function"?Ol(e):e,t=t.useState()[0],(be!==null?be.memoizedState:null)!==t&&(oe.flags|=1024),e}function Sp(){var t=Cc!==0;return Cc=0,t}function Ap(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Cp(t){if(Ac){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ac=!1}yi=0,tt=be=oe=null,eo=!1,ml=Cc=0,to=null}function kt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?oe.memoizedState=tt=t:tt=tt.next=t,tt}function Ze(){if(be===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=be.next;var e=tt===null?oe.memoizedState:tt.next;if(e!==null)tt=e,be=t;else{if(t===null)throw oe.alternate===null?Error(B(467)):Error(B(310));be=t,t={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},tt===null?oe.memoizedState=tt=t:tt=tt.next=t}return tt}function vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(t){var e=ml;return ml+=1,to===null&&(to=[]),t=SS(to,t,e),e=oe,(tt===null?e.memoizedState:tt.next)===null&&(e=e.alternate,ne.H=e===null||e.memoizedState===null?sA:Dp),t}function Td(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ol(t);if(t.$$typeof===li)return wt(t)}throw Error(B(438,String(t)))}function Ip(t){var e=null,n=oe.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=oe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=vd(),oe.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=mb;return e.index++,n}function _i(t,e){return typeof e=="function"?e(t):e}function Yu(t){var e=Ze();return wp(e,be,t)}function wp(t,e,n){var i=t.queue;if(i===null)throw Error(B(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var a=o=null,l=null,u=e,h=!1;do{var m=u.lane&-536870913;if(m!==u.lane?(pe&m)===m:(yi&m)===m){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),m===ho&&(h=!0);else if((yi&p)===p){u=u.next,p===ho&&(h=!0);continue}else m={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(a=l=m,o=r):l=l.next=m,oe.lanes|=p,vs|=p;m=u.action,nr&&n(r,m),r=u.hasEagerState?u.eagerState:n(r,m)}else p={lane:m,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(a=l=p,o=r):l=l.next=p,oe.lanes|=m,vs|=m;u=u.next}while(u!==null&&u!==e);if(l===null?o=r:l.next=a,!on(r,t.memoizedState)&&(rt=!0,h&&(n=Wr,n!==null)))throw n;t.memoizedState=r,t.baseState=o,t.baseQueue=l,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Vf(t){var e=Ze(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);on(r,e.memoizedState)||(rt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function NS(t,e,n){var i=oe,s=Ze(),r=ge;if(r){if(n===void 0)throw Error(B(407));n=n()}else n=e();var o=!on((be||s).memoizedState,n);if(o&&(s.memoizedState=n,rt=!0),s=s.queue,Rp(PS.bind(null,i,s,t),[t]),s.getSnapshot!==e||o||tt!==null&&tt.memoizedState.tag&1){if(i.flags|=2048,po(9,{destroy:void 0},DS.bind(null,i,s,n,e),null),De===null)throw Error(B(349));r||yi&127||MS(i,e,n)}return n}function MS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=oe.updateQueue,e===null?(e=vd(),oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function DS(t,e,n,i){e.value=n,e.getSnapshot=i,VS(e)&&US(t)}function PS(t,e,n){return n(function(){VS(e)&&US(t)})}function VS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function US(t){var e=pr(t,2);e!==null&&Yt(e,t,2)}function Gh(t){var e=kt();if(typeof t=="function"){var n=t;if(t=n(),nr){Ji(!0);try{n()}finally{Ji(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:t},e}function kS(t,e,n,i){return t.baseState=n,wp(t,be,typeof i=="function"?i:_i)}function Nx(t,e,n,i,s){if(Sd(t))throw Error(B(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};ne.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,LS(e,r)):(r.next=n.next,e.pending=n.next=r)}}function LS(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=ne.T,o={};ne.T=o;try{var a=n(s,i),l=ne.S;l!==null&&l(o,a),I_(t,e,a)}catch(u){zh(t,e,u)}finally{r!==null&&o.types!==null&&(r.types=o.types),ne.T=r}}else try{r=n(s,i),I_(t,e,r)}catch(u){zh(t,e,u)}}function I_(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){w_(t,e,i)},function(i){return zh(t,e,i)}):w_(t,e,n)}function w_(t,e,n){e.status="fulfilled",e.value=n,OS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,LS(t,n)))}function zh(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,OS(e),e=e.next;while(e!==i)}t.action=null}function OS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function qS(t,e){return e}function R_(t,e){if(ge){var n=De.formState;if(n!==null){e:{var i=oe;if(ge){if(Be){t:{for(var s=Be,r=pn;s.nodeType!==8;){if(!r){s=null;break t}if(s=vn(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Be=vn(s.nextSibling),i=s.data==="F!";break e}}ys(i)}i=!1}i&&(e=n[0])}}return n=kt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qS,lastRenderedState:e},n.queue=i,n=tA.bind(null,oe,i),i.dispatch=n,i=Gh(!1),r=Mp.bind(null,oe,!1,i.queue),i=kt(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=Nx.bind(null,oe,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function b_(t){var e=Ze();return BS(e,be,t)}function BS(t,e,n){if(e=wp(t,e,qS)[0],t=Yu(_i)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Ol(e)}catch(o){throw o===Po?_d:o}else i=e;e=Ze();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(oe.flags|=2048,po(9,{destroy:void 0},Mx.bind(null,s,n),null)),[i,r,t]}function Mx(t,e){t.action=e}function x_(t){var e=Ze(),n=be;if(n!==null)return BS(e,n,t);Ze(),e=e.memoizedState,n=Ze();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function po(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=oe.updateQueue,e===null&&(e=vd(),oe.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function FS(){return Ze().memoizedState}function Ku(t,e,n,i){var s=kt();oe.flags|=t,s.memoizedState=po(1|e,{destroy:void 0},n,i===void 0?null:i)}function Ed(t,e,n,i){var s=Ze();i=i===void 0?null:i;var r=s.memoizedState.inst;be!==null&&i!==null&&Tp(i,be.memoizedState.deps)?s.memoizedState=po(e,r,n,i):(oe.flags|=t,s.memoizedState=po(1|e,r,n,i))}function N_(t,e){Ku(8390656,8,t,e)}function Rp(t,e){Ed(2048,8,t,e)}function Dx(t){oe.flags|=4;var e=oe.updateQueue;if(e===null)e=vd(),oe.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function HS(t){var e=Ze().memoizedState;return Dx({ref:e,nextImpl:t}),function(){if(Te&2)throw Error(B(440));return e.impl.apply(void 0,arguments)}}function GS(t,e){return Ed(4,2,t,e)}function zS(t,e){return Ed(4,4,t,e)}function YS(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function KS(t,e,n){n=n!=null?n.concat([t]):null,Ed(4,4,YS.bind(null,e,t),n)}function bp(){}function JS(t,e){var n=Ze();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Tp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $S(t,e){var n=Ze();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Tp(e,i[1]))return i[0];if(i=t(),nr){Ji(!0);try{t()}finally{Ji(!1)}}return n.memoizedState=[i,e],i}function xp(t,e,n){return n===void 0||yi&1073741824&&!(pe&261930)?t.memoizedState=e:(t.memoizedState=n,t=kA(),oe.lanes|=t,vs|=t,n)}function QS(t,e,n,i){return on(n,e)?n:mo.current!==null?(t=xp(t,n,i),on(t,e)||(rt=!0),t):!(yi&42)||yi&1073741824&&!(pe&261930)?(rt=!0,t.memoizedState=n):(t=kA(),oe.lanes|=t,vs|=t,e)}function jS(t,e,n,i,s){var r=Ee.p;Ee.p=r!==0&&8>r?r:8;var o=ne.T,a={};ne.T=a,Mp(t,!1,e,n);try{var l=s(),u=ne.S;if(u!==null&&u(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=Rx(l,i);$a(t,e,h,rn(t))}else $a(t,e,i,rn(t))}catch(m){$a(t,e,{then:function(){},status:"rejected",reason:m},rn())}finally{Ee.p=r,o!==null&&a.types!==null&&(o.types=a.types),ne.T=o}}function Px(){}function Yh(t,e,n,i){if(t.tag!==5)throw Error(B(476));var s=XS(t).queue;jS(t,s,e,Ks,n===null?Px:function(){return WS(t),n(i)})}function XS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ks,baseState:Ks,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:Ks},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function WS(t){var e=XS(t);e.next===null&&(e=t.alternate.memoizedState),$a(t,e.next.queue,{},rn())}function Np(){return wt(_l)}function ZS(){return Ze().memoizedState}function eA(){return Ze().memoizedState}function Vx(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=rn();t=ns(n);var i=is(e,t,n);i!==null&&(Yt(i,e,n),Ya(i,e,n)),e={cache:pp()},t.payload=e;return}e=e.return}}function Ux(t,e,n){var i=rn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Sd(t)?nA(e,n):(n=dp(t,e,n,i),n!==null&&(Yt(n,t,i),iA(n,e,i)))}function tA(t,e,n){var i=rn();$a(t,e,n,i)}function $a(t,e,n,i){var s={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sd(t))nA(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,on(a,o))return yd(t,e,s,0),De===null&&gd(),!1}catch{}finally{}if(n=dp(t,e,s,i),n!==null)return Yt(n,t,i),iA(n,e,i),!0}return!1}function Mp(t,e,n,i){if(i={lane:2,revertLane:Bp(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Sd(t)){if(e)throw Error(B(479))}else e=dp(t,n,i,2),e!==null&&Yt(e,t,2)}function Sd(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function nA(t,e){eo=Ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function iA(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,HE(t,n)}}var pl={readContext:wt,use:Td,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};pl.useEffectEvent=Qe;var sA={readContext:wt,use:Td,useCallback:function(t,e){return kt().memoizedState=[t,e===void 0?null:e],t},useContext:wt,useEffect:N_,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Ku(4194308,4,YS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ku(4194308,4,t,e)},useInsertionEffect:function(t,e){Ku(4,2,t,e)},useMemo:function(t,e){var n=kt();e=e===void 0?null:e;var i=t();if(nr){Ji(!0);try{t()}finally{Ji(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=kt();if(n!==void 0){var s=n(e);if(nr){Ji(!0);try{n(e)}finally{Ji(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=Ux.bind(null,oe,t),[i.memoizedState,t]},useRef:function(t){var e=kt();return t={current:t},e.memoizedState=t},useState:function(t){t=Gh(t);var e=t.queue,n=tA.bind(null,oe,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:bp,useDeferredValue:function(t,e){var n=kt();return xp(n,t,e)},useTransition:function(){var t=Gh(!1);return t=jS.bind(null,oe,t.queue,!0,!1),kt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=oe,s=kt();if(ge){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),De===null)throw Error(B(349));pe&127||MS(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,N_(PS.bind(null,i,r,t),[t]),i.flags|=2048,po(9,{destroy:void 0},DS.bind(null,i,r,n,e),null),n},useId:function(){var t=kt(),e=De.identifierPrefix;if(ge){var n=Hn,i=Fn;n=(i&~(1<<32-sn(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Cc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=bx++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Np,useFormState:R_,useActionState:R_,useOptimistic:function(t){var e=kt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Mp.bind(null,oe,!0,n),n.dispatch=e,[t,e]},useMemoCache:Ip,useCacheRefresh:function(){return kt().memoizedState=Vx.bind(null,oe)},useEffectEvent:function(t){var e=kt(),n={impl:t};return e.memoizedState=n,function(){if(Te&2)throw Error(B(440));return n.impl.apply(void 0,arguments)}}},Dp={readContext:wt,use:Td,useCallback:JS,useContext:wt,useEffect:Rp,useImperativeHandle:KS,useInsertionEffect:GS,useLayoutEffect:zS,useMemo:$S,useReducer:Yu,useRef:FS,useState:function(){return Yu(_i)},useDebugValue:bp,useDeferredValue:function(t,e){var n=Ze();return QS(n,be.memoizedState,t,e)},useTransition:function(){var t=Yu(_i)[0],e=Ze().memoizedState;return[typeof t=="boolean"?t:Ol(t),e]},useSyncExternalStore:NS,useId:ZS,useHostTransitionStatus:Np,useFormState:b_,useActionState:b_,useOptimistic:function(t,e){var n=Ze();return kS(n,be,t,e)},useMemoCache:Ip,useCacheRefresh:eA};Dp.useEffectEvent=HS;var rA={readContext:wt,use:Td,useCallback:JS,useContext:wt,useEffect:Rp,useImperativeHandle:KS,useInsertionEffect:GS,useLayoutEffect:zS,useMemo:$S,useReducer:Vf,useRef:FS,useState:function(){return Vf(_i)},useDebugValue:bp,useDeferredValue:function(t,e){var n=Ze();return be===null?xp(n,t,e):QS(n,be.memoizedState,t,e)},useTransition:function(){var t=Vf(_i)[0],e=Ze().memoizedState;return[typeof t=="boolean"?t:Ol(t),e]},useSyncExternalStore:NS,useId:ZS,useHostTransitionStatus:Np,useFormState:x_,useActionState:x_,useOptimistic:function(t,e){var n=Ze();return be!==null?kS(n,be,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Ip,useCacheRefresh:eA};rA.useEffectEvent=HS;function Uf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kh={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=rn(),s=ns(i);s.payload=e,n!=null&&(s.callback=n),e=is(t,s,i),e!==null&&(Yt(e,t,i),Ya(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=rn(),s=ns(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=is(t,s,i),e!==null&&(Yt(e,t,i),Ya(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rn(),i=ns(n);i.tag=2,e!=null&&(i.callback=e),e=is(t,i,n),e!==null&&(Yt(e,t,n),Ya(e,t,n))}};function M_(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!cl(n,i)||!cl(s,r):!0}function D_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Kh.enqueueReplaceState(e,e.state,null)}function ir(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Ge({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}function oA(t){gc(t)}function aA(t){console.error(t)}function lA(t){gc(t)}function Ic(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function P_(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Jh(t,e,n){return n=ns(n),n.tag=3,n.payload={element:null},n.callback=function(){Ic(t,e)},n}function uA(t){return t=ns(t),t.tag=3,t}function cA(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){P_(e,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){P_(e,n,i),typeof s!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function kx(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Do(e,n,s,!0),n=an.current,n!==null){switch(n.tag){case 31:case 13:return _n===null?Nc():n.alternate===null&&je===0&&(je=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Tc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Kf(t,i,s)),!1;case 22:return n.flags|=65536,i===Tc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Kf(t,i,s)),!1}throw Error(B(435,n.tag))}return Kf(t,i,s),Nc(),!1}if(ge)return e=an.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==Vh&&(t=Error(B(422),{cause:i}),fl(mn(t,n)))):(i!==Vh&&(e=Error(B(423),{cause:i}),fl(mn(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=mn(i,n),s=Jh(t.stateNode,i,s),Pf(t,s),je!==4&&(je=2)),!1;var r=Error(B(520),{cause:i});if(r=mn(r,n),Xa===null?Xa=[r]:Xa.push(r),je!==4&&(je=2),e===null)return!0;i=mn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Jh(n.stateNode,i,t),Pf(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(ss===null||!ss.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=uA(s),cA(s,t,n,i),Pf(n,s),!1}n=n.return}while(n!==null);return!1}var Pp=Error(B(461)),rt=!1;function Et(t,e,n,i){e.child=t===null?CS(e,null,n,i):tr(e,t.child,n,i)}function V_(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return er(e),i=Ep(t,e,n,o,r,s),a=Sp(),t!==null&&!rt?(Ap(t,e,s),vi(t,e,s)):(ge&&a&&hp(e),e.flags|=1,Et(t,e,i,s),e.child)}function U_(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!fp(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,dA(t,e,r,i,s)):(t=Gu(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!Vp(t,s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:cl,n(o,i)&&t.ref===e.ref)return vi(t,e,s)}return e.flags|=1,t=hi(r,i),t.ref=e.ref,t.return=e,e.child=t}function dA(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(cl(r,i)&&t.ref===e.ref)if(rt=!1,e.pendingProps=i=r,Vp(t,s))t.flags&131072&&(rt=!0);else return e.lanes=t.lanes,vi(t,e,s)}return $h(t,e,n,i,s)}function fA(t,e,n,i){var s=i.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;i=s&~r}else i=0,e.child=null;return k_(t,e,r,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&zu(e,r!==null?r.cachePool:null),r!==null?C_(e,r):Fh(),RS(e);else return i=e.lanes=536870912,k_(t,e,r!==null?r.baseLanes|n:n,n,i)}else r!==null?(zu(e,r.cachePool),C_(e,r),Fi(),e.memoizedState=null):(t!==null&&zu(e,null),Fh(),Fi());return Et(t,e,s,n),e.child}function Ma(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function k_(t,e,n,i,s){var r=gp();return r=r===null?null:{parent:it._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&zu(e,null),Fh(),RS(e),t!==null&&Do(t,e,i,!0),e.childLanes=s,null}function Ju(t,e){return e=wc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function L_(t,e,n){return tr(e,t.child,null,n),t=Ju(e,e.pendingProps),t.flags|=2,Xt(e),e.memoizedState=null,t}function Lx(t,e,n){var i=e.pendingProps,s=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ge){if(i.mode==="hidden")return t=Ju(e,i),e.lanes=536870912,Ma(null,t);if(Hh(e),(t=Be)?(t=sC(t,pn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:gs!==null?{id:Fn,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},n=yS(t),n.return=e,e.child=n,Ct=e,Be=null)):t=null,t===null)throw ys(e);return e.lanes=536870912,null}return Ju(e,i)}var r=t.memoizedState;if(r!==null){var o=r.dehydrated;if(Hh(e),s)if(e.flags&256)e.flags&=-257,e=L_(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(B(558));else if(rt||Do(t,e,n,!1),s=(n&t.childLanes)!==0,rt||s){if(i=De,i!==null&&(o=GE(i,n),o!==0&&o!==r.retryLane))throw r.retryLane=o,pr(t,o),Yt(i,t,o),Pp;Nc(),e=L_(t,e,n)}else t=r.treeContext,Be=vn(o.nextSibling),Ct=e,ge=!0,ts=null,pn=!1,t!==null&&vS(e,t),e=Ju(e,i),e.flags|=4096;return e}return t=hi(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function $u(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(B(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function $h(t,e,n,i,s){return er(e),n=Ep(t,e,n,i,void 0,s),i=Sp(),t!==null&&!rt?(Ap(t,e,s),vi(t,e,s)):(ge&&i&&hp(e),e.flags|=1,Et(t,e,n,s),e.child)}function O_(t,e,n,i,s,r){return er(e),e.updateQueue=null,n=xS(e,i,n,s),bS(t),i=Sp(),t!==null&&!rt?(Ap(t,e,r),vi(t,e,r)):(ge&&i&&hp(e),e.flags|=1,Et(t,e,n,r),e.child)}function q_(t,e,n,i,s){if(er(e),e.stateNode===null){var r=Gr,o=n.contextType;typeof o=="object"&&o!==null&&(r=wt(o)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Kh,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},_p(e),o=n.contextType,r.context=typeof o=="object"&&o!==null?wt(o):Gr,r.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Uf(e,n,o,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&Kh.enqueueReplaceState(r,r.state,null),Ja(e,i,r,s),Ka(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var a=e.memoizedProps,l=ir(n,a);r.props=l;var u=r.context,h=n.contextType;o=Gr,typeof h=="object"&&h!==null&&(o=wt(h));var m=n.getDerivedStateFromProps;h=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a||u!==o)&&D_(e,r,i,o),Oi=!1;var p=e.memoizedState;r.state=p,Ja(e,i,r,s),Ka(),u=e.memoizedState,a||p!==u||Oi?(typeof m=="function"&&(Uf(e,n,m,i),u=e.memoizedState),(l=Oi||M_(e,n,l,i,p,u,o))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),r.props=i,r.state=u,r.context=o,i=l):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,qh(t,e),o=e.memoizedProps,h=ir(n,o),r.props=h,m=e.pendingProps,p=r.context,u=n.contextType,l=Gr,typeof u=="object"&&u!==null&&(l=wt(u)),a=n.getDerivedStateFromProps,(u=typeof a=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==m||p!==l)&&D_(e,r,i,l),Oi=!1,p=e.memoizedState,r.state=p,Ja(e,i,r,s),Ka();var v=e.memoizedState;o!==m||p!==v||Oi||t!==null&&t.dependencies!==null&&vc(t.dependencies)?(typeof a=="function"&&(Uf(e,n,a,i),v=e.memoizedState),(h=Oi||M_(e,n,h,i,p,v,l)||t!==null&&t.dependencies!==null&&vc(t.dependencies))?(u||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,v,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,v,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),r.props=i,r.state=v,r.context=l,i=h):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,$u(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=tr(e,t.child,null,s),e.child=tr(e,null,n,s)):Et(t,e,n,s),e.memoizedState=r.state,t=e.child):t=vi(t,e,s),t}function B_(t,e,n,i){return Zs(),e.flags|=256,Et(t,e,n,i),e.child}var kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lf(t){return{baseLanes:t,cachePool:ES()}}function Of(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Zt),t}function hA(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,o;if((o=r)||(o=t!==null&&t.memoizedState===null?!1:(We.current&2)!==0),o&&(s=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(ge){if(s?Bi(e):Fi(),(t=Be)?(t=sC(t,pn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:gs!==null?{id:Fn,overflow:Hn}:null,retryLane:536870912,hydrationErrors:null},n=yS(t),n.return=e,e.child=n,Ct=e,Be=null)):t=null,t===null)throw ys(e);return lm(t)?e.lanes=32:e.lanes=536870912,null}var a=i.children;return i=i.fallback,s?(Fi(),s=e.mode,a=wc({mode:"hidden",children:a},s),i=Js(i,s,n,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i=e.child,i.memoizedState=Lf(n),i.childLanes=Of(t,o,n),e.memoizedState=kf,Ma(null,i)):(Bi(e),Qh(e,a))}var l=t.memoizedState;if(l!==null&&(a=l.dehydrated,a!==null)){if(r)e.flags&256?(Bi(e),e.flags&=-257,e=qf(t,e,n)):e.memoizedState!==null?(Fi(),e.child=t.child,e.flags|=128,e=null):(Fi(),a=i.fallback,s=e.mode,i=wc({mode:"visible",children:i.children},s),a=Js(a,s,n,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,tr(e,t.child,null,n),i=e.child,i.memoizedState=Lf(n),i.childLanes=Of(t,o,n),e.memoizedState=kf,e=Ma(null,i));else if(Bi(e),lm(a)){if(o=a.nextSibling&&a.nextSibling.dataset,o)var u=o.dgst;o=u,i=Error(B(419)),i.stack="",i.digest=o,fl({value:i,source:null,stack:null}),e=qf(t,e,n)}else if(rt||Do(t,e,n,!1),o=(n&t.childLanes)!==0,rt||o){if(o=De,o!==null&&(i=GE(o,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,pr(t,i),Yt(o,t,i),Pp;am(a)||Nc(),e=qf(t,e,n)}else am(a)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Be=vn(a.nextSibling),Ct=e,ge=!0,ts=null,pn=!1,t!==null&&vS(e,t),e=Qh(e,i.children),e.flags|=4096);return e}return s?(Fi(),a=i.fallback,s=e.mode,l=t.child,u=l.sibling,i=hi(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,u!==null?a=hi(u,a):(a=Js(a,s,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,Ma(null,i),i=e.child,a=t.child.memoizedState,a===null?a=Lf(n):(s=a.cachePool,s!==null?(l=it._currentValue,s=s.parent!==l?{parent:l,pool:l}:s):s=ES(),a={baseLanes:a.baseLanes|n,cachePool:s}),i.memoizedState=a,i.childLanes=Of(t,o,n),e.memoizedState=kf,Ma(t.child,i)):(Bi(e),n=t.child,t=n.sibling,n=hi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function Qh(t,e){return e=wc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function wc(t,e){return t=Wt(22,t,null,e),t.lanes=0,t}function qf(t,e,n){return tr(e,t.child,null,n),t=Qh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function F_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),kh(t.return,e,n)}function Bf(t,e,n,i,s,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s,treeForkCount:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s,o.treeForkCount=r)}function mA(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;i=i.children;var o=We.current,a=(o&2)!==0;if(a?(o=o&1|2,e.flags|=128):o&=1,Ue(We,o),Et(t,e,i,n),i=ge?dl:0,!a&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F_(t,n,e);else if(t.tag===19)F_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Sc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bf(e,!1,s,n,r,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bf(e,!0,n,null,r,i);break;case"together":Bf(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vs|=e.lanes,!(n&e.childLanes))if(t!==null){if(Do(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&vc(t)))}function Ox(t,e,n){switch(e.tag){case 3:fc(e,e.stateNode.containerInfo),qi(e,it,t.memoizedState.cache),Zs();break;case 27:case 5:Ah(e);break;case 4:fc(e,e.stateNode.containerInfo);break;case 10:qi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Hh(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Bi(e),e.flags|=128,null):n&e.child.childLanes?hA(t,e,n):(Bi(e),t=vi(t,e,n),t!==null?t.sibling:null);Bi(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Do(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return mA(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ue(We,We.current),i)break;return null;case 22:return e.lanes=0,fA(t,e,n,e.pendingProps);case 24:qi(e,it,t.memoizedState.cache)}return vi(t,e,n)}function pA(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)rt=!0;else{if(!Vp(t,n)&&!(e.flags&128))return rt=!1,Ox(t,e,n);rt=!!(t.flags&131072)}else rt=!1,ge&&e.flags&1048576&&_S(e,dl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Fs(e.elementType),e.type=t,typeof t=="function")fp(t)?(i=ir(t,i),e.tag=1,e=q_(null,e,t,i,n)):(e.tag=0,e=$h(null,e,t,i,n));else{if(t!=null){var s=t.$$typeof;if(s===Wm){e.tag=11,e=V_(null,e,t,i,n);break e}else if(s===Zm){e.tag=14,e=U_(null,e,t,i,n);break e}}throw e=Eh(t)||t,Error(B(306,e,""))}}return e;case 0:return $h(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=ir(i,e.pendingProps),q_(t,e,i,s,n);case 3:e:{if(fc(e,e.stateNode.containerInfo),t===null)throw Error(B(387));i=e.pendingProps;var r=e.memoizedState;s=r.element,qh(t,e),Ja(e,i,null,n);var o=e.memoizedState;if(i=o.cache,qi(e,it,i),i!==r.cache&&Lh(e,[it],n,!0),Ka(),i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=B_(t,e,i,n);break e}else if(i!==s){s=mn(Error(B(424)),e),fl(s),e=B_(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Be=vn(t.firstChild),Ct=e,ge=!0,ts=null,pn=!0,n=CS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Zs(),i===s){e=vi(t,e,n);break e}Et(t,e,i,n)}e=e.child}return e;case 26:return $u(t,e),t===null?(n=av(e.type,null,e.pendingProps,null))?e.memoizedState=n:ge||(n=e.type,t=e.pendingProps,i=Vc(es.current).createElement(n),i[At]=e,i[Kt]=t,Rt(i,n,t),_t(i),e.stateNode=i):e.memoizedState=av(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Ah(e),t===null&&ge&&(i=e.stateNode=rC(e.type,e.pendingProps,es.current),Ct=e,pn=!0,s=Be,Rs(e.type)?(um=s,Be=vn(i.firstChild)):Be=s),Et(t,e,e.pendingProps.children,n),$u(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ge&&((s=i=Be)&&(i=mN(i,e.type,e.pendingProps,pn),i!==null?(e.stateNode=i,Ct=e,Be=vn(i.firstChild),pn=!1,s=!0):s=!1),s||ys(e)),Ah(e),s=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,i=r.children,rm(s,r)?i=null:o!==null&&rm(s,o)&&(e.flags|=32),e.memoizedState!==null&&(s=Ep(t,e,xx,null,null,n),_l._currentValue=s),$u(t,e),Et(t,e,i,n),e.child;case 6:return t===null&&ge&&((t=n=Be)&&(n=pN(n,e.pendingProps,pn),n!==null?(e.stateNode=n,Ct=e,Be=null,t=!0):t=!1),t||ys(e)),null;case 13:return hA(t,e,n);case 4:return fc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=tr(e,null,i,n):Et(t,e,i,n),e.child;case 11:return V_(t,e,e.type,e.pendingProps,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,qi(e,e.type,i.value),Et(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,er(e),s=wt(s),i=i(s),e.flags|=1,Et(t,e,i,n),e.child;case 14:return U_(t,e,e.type,e.pendingProps,n);case 15:return dA(t,e,e.type,e.pendingProps,n);case 19:return mA(t,e,n);case 31:return Lx(t,e,n);case 22:return fA(t,e,n,e.pendingProps);case 24:return er(e),i=wt(it),t===null?(s=gp(),s===null&&(s=De,r=pp(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},_p(e),qi(e,it,s)):(t.lanes&n&&(qh(t,e),Ja(e,null,null,n),Ka()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),qi(e,it,i)):(i=r.cache,qi(e,it,i),i!==s.cache&&Lh(e,[it],n,!0))),Et(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(B(156,e.tag))}function ni(t){t.flags|=4}function Ff(t,e,n,i,s){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(qA())t.flags|=8192;else throw Qs=Tc,yp}else t.flags&=-16777217}function H_(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!lC(e))if(qA())t.flags|=8192;else throw Qs=Tc,yp}function Cu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?BE():536870912,t.lanes|=e,go|=e)}function ya(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function qx(t,e,n){var i=e.pendingProps;switch(mp(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return Le(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),mi(it),uo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Cr(e)?ni(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Df())),Le(e),null;case 26:var s=e.type,r=e.memoizedState;return t===null?(ni(e),r!==null?(Le(e),H_(e,r)):(Le(e),Ff(e,s,null,i,n))):r?r!==t.memoizedState?(ni(e),Le(e),H_(e,r)):(Le(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&ni(e),Le(e),Ff(e,s,t,i,n)),null;case 27:if(hc(e),n=es.current,s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&ni(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Le(e),null}t=zn.current,Cr(e)?y_(e):(t=rC(s,i,n),e.stateNode=t,ni(e))}return Le(e),null;case 5:if(hc(e),s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&ni(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Le(e),null}if(r=zn.current,Cr(e))y_(e);else{var o=Vc(es.current);switch(r){case 1:r=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?o.createElement(s,{is:i.is}):o.createElement(s)}}r[At]=e,r[Kt]=i;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=r;e:switch(Rt(r,s,i),s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ni(e)}}return Le(e),Ff(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&ni(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(t=es.current,Cr(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=Ct,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[At]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||tC(t.nodeValue,n)),t||ys(e,!0)}else t=Vc(t).createTextNode(i),t[At]=e,e.stateNode=t}return Le(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Cr(e),n!==null){if(t===null){if(!i)throw Error(B(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(557));t[At]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),t=!1}else n=Df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Xt(e),e):(Xt(e),null);if(e.flags&128)throw Error(B(558))}return Le(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Cr(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[At]=e}else Zs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),s=!1}else s=Df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(Xt(e),e):(Xt(e),null)}return Xt(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Cu(e,e.updateQueue),Le(e),null);case 4:return uo(),t===null&&Fp(e.stateNode.containerInfo),Le(e),null;case 10:return mi(e.type),Le(e),null;case 19:if(vt(We),i=e.memoizedState,i===null)return Le(e),null;if(s=(e.flags&128)!==0,r=i.rendering,r===null)if(s)ya(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Sc(t),r!==null){for(e.flags|=128,ya(i,!1),t=r.updateQueue,e.updateQueue=t,Cu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)gS(n,t),n=n.sibling;return Ue(We,We.current&1|2),ge&&oi(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&tn()>bc&&(e.flags|=128,s=!0,ya(i,!1),e.lanes=4194304)}else{if(!s)if(t=Sc(r),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,Cu(e,t),ya(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!ge)return Le(e),null}else 2*tn()-i.renderingStartTime>bc&&n!==536870912&&(e.flags|=128,s=!0,ya(i,!1),e.lanes=4194304);i.isBackwards?(r.sibling=e.child,e.child=r):(t=i.last,t!==null?t.sibling=r:e.child=r,i.last=r)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=tn(),t.sibling=null,n=We.current,Ue(We,s?n&1|2:n&1),ge&&oi(e,i.treeForkCount),t):(Le(e),null);case 22:case 23:return Xt(e),vp(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),n=e.updateQueue,n!==null&&Cu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&vt($s),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),mi(it),Le(e),null;case 25:return null;case 30:return null}throw Error(B(156,e.tag))}function Bx(t,e){switch(mp(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mi(it),uo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return hc(e),null;case 31:if(e.memoizedState!==null){if(Xt(e),e.alternate===null)throw Error(B(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Xt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(We),null;case 4:return uo(),null;case 10:return mi(e.type),null;case 22:case 23:return Xt(e),vp(),t!==null&&vt($s),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return mi(it),null;case 25:return null;default:return null}}function gA(t,e){switch(mp(e),e.tag){case 3:mi(it),uo();break;case 26:case 27:case 5:hc(e);break;case 4:uo();break;case 31:e.memoizedState!==null&&Xt(e);break;case 13:Xt(e);break;case 19:vt(We);break;case 10:mi(e.type);break;case 22:case 23:Xt(e),vp(),t!==null&&vt($s);break;case 24:mi(it)}}function ql(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,o=n.inst;i=r(),o.destroy=i}n=n.next}while(n!==s)}}catch(a){we(e,e.return,a)}}function _s(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,s=e;var l=n,u=a;try{u()}catch(h){we(s,l,h)}}}i=i.next}while(i!==r)}}catch(h){we(e,e.return,h)}}function yA(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{wS(e,n)}catch(i){we(t,t.return,i)}}}function _A(t,e,n){n.props=ir(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){we(t,e,i)}}function Qa(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){we(t,e,s)}}function Gn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){we(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){we(t,e,s)}else n.current=null}function vA(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){we(t,t.return,s)}}function Hf(t,e,n){try{var i=t.stateNode;lN(i,t.type,n,e),i[Kt]=e}catch(s){we(t,t.return,s)}}function TA(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Rs(t.type)||t.tag===4}function Gf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ui));else if(i!==4&&(i===27&&Rs(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(jh(t,e,n),t=t.sibling;t!==null;)jh(t,e,n),t=t.sibling}function Rc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Rs(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Rc(t,e,n),t=t.sibling;t!==null;)Rc(t,e,n),t=t.sibling}function EA(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Rt(e,i,n),e[At]=t,e[Kt]=n}catch(r){we(t,t.return,r)}}var ai=!1,nt=!1,zf=!1,G_=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Fx(t,e){if(t=t.containerInfo,im=Oc,t=lS(t),up(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,m=t,p=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==r||i!==0&&m.nodeType!==3||(l=o+i),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===n&&++u===s&&(a=o),p===r&&++h===i&&(l=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sm={focusedElem:t,selectionRange:n},Oc=!1,yt=e;yt!==null;)if(e=yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yt=t;else for(;yt!==null;){switch(e=yt,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)s=t[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var w=ir(n.type,s);t=i.getSnapshotBeforeUpdate(w,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(N){we(n,n.return,N)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)om(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(B(163))}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}}function SA(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:si(t,n),i&4&&ql(5,n);break;case 1:if(si(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){we(n,n.return,o)}else{var s=ir(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){we(n,n.return,o)}}i&64&&yA(n),i&512&&Qa(n,n.return);break;case 3:if(si(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{wS(t,e)}catch(o){we(n,n.return,o)}}break;case 27:e===null&&i&4&&EA(n);case 26:case 5:si(t,n),e===null&&i&4&&vA(n),i&512&&Qa(n,n.return);break;case 12:si(t,n);break;case 31:si(t,n),i&4&&IA(t,n);break;case 13:si(t,n),i&4&&wA(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=jx.bind(null,n),gN(t,n))));break;case 22:if(i=n.memoizedState!==null||ai,!i){e=e!==null&&e.memoizedState!==null||nt,s=ai;var r=nt;ai=i,(nt=e)&&!r?ri(t,n,(n.subtreeFlags&8772)!==0):si(t,n),ai=s,nt=r}break;case 30:break;default:si(t,n)}}function AA(t){var e=t.alternate;e!==null&&(t.alternate=null,AA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ip(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ye=null,Ft=!1;function ii(t,e,n){for(n=n.child;n!==null;)CA(t,e,n),n=n.sibling}function CA(t,e,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Dl,n)}catch{}switch(n.tag){case 26:nt||Gn(n,e),ii(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:nt||Gn(n,e);var i=Ye,s=Ft;Rs(n.type)&&(Ye=n.stateNode,Ft=!1),ii(t,e,n),Za(n.stateNode),Ye=i,Ft=s;break;case 5:nt||Gn(n,e);case 6:if(i=Ye,s=Ft,Ye=null,ii(t,e,n),Ye=i,Ft=s,Ye!==null)if(Ft)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(n.stateNode)}catch(r){we(n,e,r)}else try{Ye.removeChild(n.stateNode)}catch(r){we(n,e,r)}break;case 18:Ye!==null&&(Ft?(t=Ye,nv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),To(t)):nv(Ye,n.stateNode));break;case 4:i=Ye,s=Ft,Ye=n.stateNode.containerInfo,Ft=!0,ii(t,e,n),Ye=i,Ft=s;break;case 0:case 11:case 14:case 15:_s(2,n,e),nt||_s(4,n,e),ii(t,e,n);break;case 1:nt||(Gn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&_A(n,e,i)),ii(t,e,n);break;case 21:ii(t,e,n);break;case 22:nt=(i=nt)||n.memoizedState!==null,ii(t,e,n),nt=i;break;default:ii(t,e,n)}}function IA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{To(t)}catch(n){we(e,e.return,n)}}}function wA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{To(t)}catch(n){we(e,e.return,n)}}function Hx(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new G_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new G_),e;default:throw Error(B(435,t.tag))}}function Iu(t,e){var n=Hx(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var s=Xx.bind(null,t,i);i.then(s,s)}})}function qt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 27:if(Rs(a.type)){Ye=a.stateNode,Ft=!1;break e}break;case 5:Ye=a.stateNode,Ft=!1;break e;case 3:case 4:Ye=a.stateNode.containerInfo,Ft=!0;break e}a=a.return}if(Ye===null)throw Error(B(160));CA(r,o,s),Ye=null,Ft=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)RA(e,t),e=e.sibling}var Rn=null;function RA(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qt(e,t),Bt(t),i&4&&(_s(3,t,t.return),ql(3,t),_s(5,t,t.return));break;case 1:qt(e,t),Bt(t),i&512&&(nt||n===null||Gn(n,n.return)),i&64&&ai&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=Rn;if(qt(e,t),Bt(t),i&512&&(nt||n===null||Gn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[Ul]||r[At]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Rt(r,i,n),r[At]=t,_t(r),i=r;break e;case"link":var o=uv("link","href",s).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(r=o[a],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}r=s.createElement(i),Rt(r,i,n),s.head.appendChild(r);break;case"meta":if(o=uv("meta","content",s).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(r=o[a],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}r=s.createElement(i),Rt(r,i,n),s.head.appendChild(r);break;default:throw Error(B(468,i))}r[At]=t,_t(r),i=r}t.stateNode=i}else cv(s,t.type,t.stateNode);else t.stateNode=lv(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?cv(s,t.type,t.stateNode):lv(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Hf(t,t.memoizedProps,n.memoizedProps)}break;case 27:qt(e,t),Bt(t),i&512&&(nt||n===null||Gn(n,n.return)),n!==null&&i&4&&Hf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(qt(e,t),Bt(t),i&512&&(nt||n===null||Gn(n,n.return)),t.flags&32){s=t.stateNode;try{fo(s,"")}catch(w){we(t,t.return,w)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,Hf(t,s,n!==null?n.memoizedProps:s)),i&1024&&(zf=!0);break;case 6:if(qt(e,t),Bt(t),i&4){if(t.stateNode===null)throw Error(B(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(w){we(t,t.return,w)}}break;case 3:if(Xu=null,s=Rn,Rn=Uc(e.containerInfo),qt(e,t),Rn=s,Bt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{To(e.containerInfo)}catch(w){we(t,t.return,w)}zf&&(zf=!1,bA(t));break;case 4:i=Rn,Rn=Uc(t.stateNode.containerInfo),qt(e,t),Bt(t),Rn=i;break;case 12:qt(e,t),Bt(t);break;case 31:qt(e,t),Bt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Iu(t,i)));break;case 13:qt(e,t),Bt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ad=tn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Iu(t,i)));break;case 22:s=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=ai,h=nt;if(ai=u||s,nt=h||l,qt(e,t),nt=h,ai=u,Bt(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||l||ai||nt||Hs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(r=l.stateNode,s)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{a=l.stateNode;var m=l.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null;a.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(w){we(l,l.return,w)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(w){we(l,l.return,w)}}}else if(e.tag===18){if(n===null){l=e;try{var v=l.stateNode;s?iv(v,!0):iv(l.stateNode,!1)}catch(w){we(l,l.return,w)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Iu(t,n))));break;case 19:qt(e,t),Bt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Iu(t,i)));break;case 30:break;case 21:break;default:qt(e,t),Bt(t)}}function Bt(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(TA(i)){n=i;break}i=i.return}if(n==null)throw Error(B(160));switch(n.tag){case 27:var s=n.stateNode,r=Gf(t);Rc(t,r,s);break;case 5:var o=n.stateNode;n.flags&32&&(fo(o,""),n.flags&=-33);var a=Gf(t);Rc(t,a,o);break;case 3:case 4:var l=n.stateNode.containerInfo,u=Gf(t);jh(t,u,l);break;default:throw Error(B(161))}}catch(h){we(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bA(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;bA(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function si(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)SA(t,e.alternate,e),e=e.sibling}function Hs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:_s(4,e,e.return),Hs(e);break;case 1:Gn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&_A(e,e.return,n),Hs(e);break;case 27:Za(e.stateNode);case 26:case 5:Gn(e,e.return),Hs(e);break;case 22:e.memoizedState===null&&Hs(e);break;case 30:Hs(e);break;default:Hs(e)}t=t.sibling}}function ri(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,o=r.flags;switch(r.tag){case 0:case 11:case 15:ri(s,r,n),ql(4,r);break;case 1:if(ri(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){we(i,i.return,u)}if(i=r,s=i.updateQueue,s!==null){var a=i.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)IS(l[s],a)}catch(u){we(i,i.return,u)}}n&&o&64&&yA(r),Qa(r,r.return);break;case 27:EA(r);case 26:case 5:ri(s,r,n),n&&i===null&&o&4&&vA(r),Qa(r,r.return);break;case 12:ri(s,r,n);break;case 31:ri(s,r,n),n&&o&4&&IA(s,r);break;case 13:ri(s,r,n),n&&o&4&&wA(s,r);break;case 22:r.memoizedState===null&&ri(s,r,n),Qa(r,r.return);break;case 30:break;default:ri(s,r,n)}e=e.sibling}}function Up(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ll(n))}function kp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ll(t))}function wn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xA(t,e,n,i),e=e.sibling}function xA(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:wn(t,e,n,i),s&2048&&ql(9,e);break;case 1:wn(t,e,n,i);break;case 3:wn(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ll(t)));break;case 12:if(s&2048){wn(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,o=r.id,a=r.onPostCommit;typeof a=="function"&&a(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){we(e,e.return,l)}}else wn(t,e,n,i);break;case 31:wn(t,e,n,i);break;case 13:wn(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,o=e.alternate,e.memoizedState!==null?r._visibility&2?wn(t,e,n,i):ja(t,e):r._visibility&2?wn(t,e,n,i):(r._visibility|=2,xr(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),s&2048&&Up(o,e);break;case 24:wn(t,e,n,i),s&2048&&kp(e.alternate,e);break;default:wn(t,e,n,i)}}function xr(t,e,n,i,s){for(s=s&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,o=e,a=n,l=i,u=o.flags;switch(o.tag){case 0:case 11:case 15:xr(r,o,a,l,s),ql(8,o);break;case 23:break;case 22:var h=o.stateNode;o.memoizedState!==null?h._visibility&2?xr(r,o,a,l,s):ja(r,o):(h._visibility|=2,xr(r,o,a,l,s)),s&&u&2048&&Up(o.alternate,o);break;case 24:xr(r,o,a,l,s),s&&u&2048&&kp(o.alternate,o);break;default:xr(r,o,a,l,s)}e=e.sibling}}function ja(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:ja(n,i),s&2048&&Up(i.alternate,i);break;case 24:ja(n,i),s&2048&&kp(i.alternate,i);break;default:ja(n,i)}e=e.sibling}}var Da=8192;function Ir(t,e,n){if(t.subtreeFlags&Da)for(t=t.child;t!==null;)NA(t,e,n),t=t.sibling}function NA(t,e,n){switch(t.tag){case 26:Ir(t,e,n),t.flags&Da&&t.memoizedState!==null&&bN(n,Rn,t.memoizedState,t.memoizedProps);break;case 5:Ir(t,e,n);break;case 3:case 4:var i=Rn;Rn=Uc(t.stateNode.containerInfo),Ir(t,e,n),Rn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Da,Da=16777216,Ir(t,e,n),Da=i):Ir(t,e,n));break;default:Ir(t,e,n)}}function MA(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function _a(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];yt=i,PA(i,t)}MA(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)DA(t),t=t.sibling}function DA(t){switch(t.tag){case 0:case 11:case 15:_a(t),t.flags&2048&&_s(9,t,t.return);break;case 3:_a(t);break;case 12:_a(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Qu(t)):_a(t);break;default:_a(t)}}function Qu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];yt=i,PA(i,t)}MA(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:_s(8,e,e.return),Qu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Qu(e));break;default:Qu(e)}t=t.sibling}}function PA(t,e){for(;yt!==null;){var n=yt;switch(n.tag){case 0:case 11:case 15:_s(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ll(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,yt=i;else e:for(n=t;yt!==null;){i=yt;var s=i.sibling,r=i.return;if(AA(i),i===n){yt=null;break e}if(s!==null){s.return=r,yt=s;break e}yt=r}}}var Gx={getCacheForType:function(t){var e=wt(it),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return wt(it).controller.signal}},zx=typeof WeakMap=="function"?WeakMap:Map,Te=0,De=null,de=null,pe=0,Ie=0,jt=null,Qi=!1,Vo=!1,Lp=!1,Ti=0,je=0,vs=0,js=0,Op=0,Zt=0,go=0,Xa=null,Ht=null,Xh=!1,Ad=0,VA=0,bc=1/0,xc=null,ss=null,dt=0,rs=null,yo=null,pi=0,Wh=0,Zh=null,UA=null,Wa=0,em=null;function rn(){return Te&2&&pe!==0?pe&-pe:ne.T!==null?Bp():zE()}function kA(){if(Zt===0)if(!(pe&536870912)||ge){var t=yu;yu<<=1,!(yu&3932160)&&(yu=262144),Zt=t}else Zt=536870912;return t=an.current,t!==null&&(t.flags|=32),Zt}function Yt(t,e,n){(t===De&&(Ie===2||Ie===9)||t.cancelPendingCommit!==null)&&(_o(t,0),ji(t,pe,Zt,!1)),Vl(t,n),(!(Te&2)||t!==De)&&(t===De&&(!(Te&2)&&(js|=n),je===4&&ji(t,pe,Zt,!1)),ei(t))}function LA(t,e,n){if(Te&6)throw Error(B(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Pl(t,e),s=i?Jx(t,e):Yf(t,e,!0),r=i;do{if(s===0){Vo&&!i&&ji(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!Yx(n)){s=Yf(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var a=t;s=Xa;var l=a.current.memoizedState.isDehydrated;if(l&&(_o(a,o).flags|=256),o=Yf(a,o,!1),o!==2){if(Lp&&!l){a.errorRecoveryDisabledLanes|=r,js|=r,s=4;break e}r=Ht,Ht=s,r!==null&&(Ht===null?Ht=r:Ht.push.apply(Ht,r))}s=o}if(r=!1,s!==2)continue}}if(s===1){_o(t,0),ji(t,e,0,!0);break}e:{switch(i=t,r=s,r){case 0:case 1:throw Error(B(345));case 4:if((e&4194048)!==e)break;case 6:ji(i,e,Zt,!Qi);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(B(329))}if((e&62914560)===e&&(s=Ad+300-tn(),10<s)){if(ji(i,e,Zt,!Qi),fd(i,0,!0)!==0)break e;pi=e,i.timeoutHandle=iC(z_.bind(null,i,n,Ht,xc,Xh,e,Zt,js,go,Qi,r,"Throttled",-0,0),s);break e}z_(i,n,Ht,xc,Xh,e,Zt,js,go,Qi,r,null,-0,0)}}break}while(!0);ei(t)}function z_(t,e,n,i,s,r,o,a,l,u,h,m,p,v){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},NA(e,r,m);var w=(r&62914560)===r?Ad-tn():(r&4194048)===r?VA-tn():0;if(w=xN(m,w),w!==null){pi=r,t.cancelPendingCommit=w(K_.bind(null,t,e,r,n,i,s,o,a,l,h,m,null,p,v)),ji(t,r,o,!u);return}}K_(t,e,r,n,i,s,o,a,l)}function Yx(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!on(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ji(t,e,n,i){e&=~Op,e&=~js,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-sn(s),o=1<<r;i[r]=-1,s&=~o}n!==0&&FE(t,n,e)}function Cd(){return Te&6?!0:(Bl(0),!1)}function qp(){if(de!==null){if(Ie===0)var t=de.return;else t=de,ci=gr=null,Cp(t),Zr=null,hl=0,t=de;for(;t!==null;)gA(t.alternate,t),t=t.return;de=null}}function _o(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,dN(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),pi=0,qp(),De=t,de=n=hi(t.current,null),pe=e,Ie=0,jt=null,Qi=!1,Vo=Pl(t,e),Lp=!1,go=Zt=Op=js=vs=je=0,Ht=Xa=null,Xh=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-sn(i),r=1<<s;e|=t[s],i&=~r}return Ti=e,gd(),n}function OA(t,e){oe=null,ne.H=pl,e===Po||e===_d?(e=S_(),Ie=3):e===yp?(e=S_(),Ie=4):Ie=e===Pp?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,jt=e,de===null&&(je=1,Ic(t,mn(e,t.current)))}function qA(){var t=an.current;return t===null?!0:(pe&4194048)===pe?_n===null:(pe&62914560)===pe||pe&536870912?t===_n:!1}function BA(){var t=ne.H;return ne.H=pl,t===null?pl:t}function FA(){var t=ne.A;return ne.A=Gx,t}function Nc(){je=4,Qi||(pe&4194048)!==pe&&an.current!==null||(Vo=!0),!(vs&134217727)&&!(js&134217727)||De===null||ji(De,pe,Zt,!1)}function Yf(t,e,n){var i=Te;Te|=2;var s=BA(),r=FA();(De!==t||pe!==e)&&(xc=null,_o(t,e)),e=!1;var o=je;e:do try{if(Ie!==0&&de!==null){var a=de,l=jt;switch(Ie){case 8:qp(),o=6;break e;case 3:case 2:case 9:case 6:an.current===null&&(e=!0);var u=Ie;if(Ie=0,jt=null,Kr(t,a,l,u),n&&Vo){o=0;break e}break;default:u=Ie,Ie=0,jt=null,Kr(t,a,l,u)}}Kx(),o=je;break}catch(h){OA(t,h)}while(!0);return e&&t.shellSuspendCounter++,ci=gr=null,Te=i,ne.H=s,ne.A=r,de===null&&(De=null,pe=0,gd()),o}function Kx(){for(;de!==null;)HA(de)}function Jx(t,e){var n=Te;Te|=2;var i=BA(),s=FA();De!==t||pe!==e?(xc=null,bc=tn()+500,_o(t,e)):Vo=Pl(t,e);e:do try{if(Ie!==0&&de!==null){e=de;var r=jt;t:switch(Ie){case 1:Ie=0,jt=null,Kr(t,e,r,1);break;case 2:case 9:if(E_(r)){Ie=0,jt=null,Y_(e);break}e=function(){Ie!==2&&Ie!==9||De!==t||(Ie=7),ei(t)},r.then(e,e);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:E_(r)?(Ie=0,jt=null,Y_(e)):(Ie=0,jt=null,Kr(t,e,r,7));break;case 5:var o=null;switch(de.tag){case 26:o=de.memoizedState;case 5:case 27:var a=de;if(o?lC(o):a.stateNode.complete){Ie=0,jt=null;var l=a.sibling;if(l!==null)de=l;else{var u=a.return;u!==null?(de=u,Id(u)):de=null}break t}}Ie=0,jt=null,Kr(t,e,r,5);break;case 6:Ie=0,jt=null,Kr(t,e,r,6);break;case 8:qp(),je=6;break e;default:throw Error(B(462))}}$x();break}catch(h){OA(t,h)}while(!0);return ci=gr=null,ne.H=i,ne.A=s,Te=n,de!==null?0:(De=null,pe=0,gd(),je)}function $x(){for(;de!==null&&!yb();)HA(de)}function HA(t){var e=pA(t.alternate,t,Ti);t.memoizedProps=t.pendingProps,e===null?Id(t):de=e}function Y_(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=O_(n,e,e.pendingProps,e.type,void 0,pe);break;case 11:e=O_(n,e,e.pendingProps,e.type.render,e.ref,pe);break;case 5:Cp(e);default:gA(n,e),e=de=gS(e,Ti),e=pA(n,e,Ti)}t.memoizedProps=t.pendingProps,e===null?Id(t):de=e}function Kr(t,e,n,i){ci=gr=null,Cp(e),Zr=null,hl=0;var s=e.return;try{if(kx(t,s,e,n,pe)){je=1,Ic(t,mn(n,t.current)),de=null;return}}catch(r){if(s!==null)throw de=s,r;je=1,Ic(t,mn(n,t.current)),de=null;return}e.flags&32768?(ge||i===1?t=!0:Vo||pe&536870912?t=!1:(Qi=t=!0,(i===2||i===9||i===3||i===6)&&(i=an.current,i!==null&&i.tag===13&&(i.flags|=16384))),GA(e,t)):Id(e)}function Id(t){var e=t;do{if(e.flags&32768){GA(e,Qi);return}t=e.return;var n=qx(e.alternate,e,Ti);if(n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);je===0&&(je=5)}function GA(t,e){do{var n=Bx(t.alternate,t);if(n!==null){n.flags&=32767,de=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){de=t;return}de=t=n}while(t!==null);je=6,de=null}function K_(t,e,n,i,s,r,o,a,l){t.cancelPendingCommit=null;do wd();while(dt!==0);if(Te&6)throw Error(B(327));if(e!==null){if(e===t.current)throw Error(B(177));if(r=e.lanes|e.childLanes,r|=cp,Rb(t,n,r,o,a,l),t===De&&(de=De=null,pe=0),yo=e,rs=t,pi=n,Wh=r,Zh=s,UA=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Wx(mc,function(){return $A(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=ne.T,ne.T=null,s=Ee.p,Ee.p=2,o=Te,Te|=4;try{Fx(t,e,n)}finally{Te=o,Ee.p=s,ne.T=i}}dt=1,zA(),YA(),KA()}}function zA(){if(dt===1){dt=0;var t=rs,e=yo,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ne.T,ne.T=null;var i=Ee.p;Ee.p=2;var s=Te;Te|=4;try{RA(e,t);var r=sm,o=lS(t.containerInfo),a=r.focusedElem,l=r.selectionRange;if(o!==a&&a&&a.ownerDocument&&aS(a.ownerDocument.documentElement,a)){if(l!==null&&up(a)){var u=l.start,h=l.end;if(h===void 0&&(h=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(h,a.value.length);else{var m=a.ownerDocument||document,p=m&&m.defaultView||window;if(p.getSelection){var v=p.getSelection(),w=a.textContent.length,N=Math.min(l.start,w),V=l.end===void 0?N:Math.min(l.end,w);!v.extend&&N>V&&(o=V,V=N,N=o);var I=m_(a,N),S=m_(a,V);if(I&&S&&(v.rangeCount!==1||v.anchorNode!==I.node||v.anchorOffset!==I.offset||v.focusNode!==S.node||v.focusOffset!==S.offset)){var R=m.createRange();R.setStart(I.node,I.offset),v.removeAllRanges(),N>V?(v.addRange(R),v.extend(S.node,S.offset)):(R.setEnd(S.node,S.offset),v.addRange(R))}}}}for(m=[],v=a;v=v.parentNode;)v.nodeType===1&&m.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<m.length;a++){var M=m[a];M.element.scrollLeft=M.left,M.element.scrollTop=M.top}}Oc=!!im,sm=im=null}finally{Te=s,Ee.p=i,ne.T=n}}t.current=e,dt=2}}function YA(){if(dt===2){dt=0;var t=rs,e=yo,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ne.T,ne.T=null;var i=Ee.p;Ee.p=2;var s=Te;Te|=4;try{SA(t,e.alternate,e)}finally{Te=s,Ee.p=i,ne.T=n}}dt=3}}function KA(){if(dt===4||dt===3){dt=0,_b();var t=rs,e=yo,n=pi,i=UA;e.subtreeFlags&10256||e.flags&10256?dt=5:(dt=0,yo=rs=null,JA(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(ss=null),np(n),e=e.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Dl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=ne.T,s=Ee.p,Ee.p=2,ne.T=null;try{for(var r=t.onRecoverableError,o=0;o<i.length;o++){var a=i[o];r(a.value,{componentStack:a.stack})}}finally{ne.T=e,Ee.p=s}}pi&3&&wd(),ei(t),s=t.pendingLanes,n&261930&&s&42?t===em?Wa++:(Wa=0,em=t):Wa=0,Bl(0)}}function JA(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Ll(e)))}function wd(){return zA(),YA(),KA(),$A()}function $A(){if(dt!==5)return!1;var t=rs,e=Wh;Wh=0;var n=np(pi),i=ne.T,s=Ee.p;try{Ee.p=32>n?32:n,ne.T=null,n=Zh,Zh=null;var r=rs,o=pi;if(dt=0,yo=rs=null,pi=0,Te&6)throw Error(B(331));var a=Te;if(Te|=4,DA(r.current),xA(r,r.current,o,n),Te=a,Bl(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Dl,r)}catch{}return!0}finally{Ee.p=s,ne.T=i,JA(t,e)}}function J_(t,e,n){e=mn(n,e),e=Jh(t.stateNode,e,2),t=is(t,e,2),t!==null&&(Vl(t,2),ei(t))}function we(t,e,n){if(t.tag===3)J_(t,t,n);else for(;e!==null;){if(e.tag===3){J_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ss===null||!ss.has(i))){t=mn(n,t),n=uA(2),i=is(e,n,2),i!==null&&(cA(n,i,e,t),Vl(i,2),ei(i));break}}e=e.return}}function Kf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new zx;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(Lp=!0,s.add(n),t=Qx.bind(null,t,e,n),e.then(t,t))}function Qx(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,De===t&&(pe&n)===n&&(je===4||je===3&&(pe&62914560)===pe&&300>tn()-Ad?!(Te&2)&&_o(t,0):Op|=n,go===pe&&(go=0)),ei(t)}function QA(t,e){e===0&&(e=BE()),t=pr(t,e),t!==null&&(Vl(t,e),ei(t))}function jx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),QA(t,n)}function Xx(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(B(314))}i!==null&&i.delete(e),QA(t,n)}function Wx(t,e){return ep(t,e)}var Mc=null,Nr=null,tm=!1,Dc=!1,Jf=!1,Xi=0;function ei(t){t!==Nr&&t.next===null&&(Nr===null?Mc=Nr=t:Nr=Nr.next=t),Dc=!0,tm||(tm=!0,eN())}function Bl(t,e){if(!Jf&&Dc){Jf=!0;do for(var n=!1,i=Mc;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var o=i.suspendedLanes,a=i.pingedLanes;r=(1<<31-sn(42|t)+1)-1,r&=s&~(o&~a),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,$_(i,r))}else r=pe,r=fd(i,i===De?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||Pl(i,r)||(n=!0,$_(i,r));i=i.next}while(n);Jf=!1}}function Zx(){jA()}function jA(){Dc=tm=!1;var t=0;Xi!==0&&cN()&&(t=Xi);for(var e=tn(),n=null,i=Mc;i!==null;){var s=i.next,r=XA(i,e);r===0?(i.next=null,n===null?Mc=s:n.next=s,s===null&&(Nr=n)):(n=i,(t!==0||r&3)&&(Dc=!0)),i=s}dt!==0&&dt!==5||Bl(t),Xi!==0&&(Xi=0)}function XA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var o=31-sn(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=wb(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}if(e=De,n=pe,n=fd(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Ie===2||Ie===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Ef(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Pl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Ef(i),np(n)){case 2:case 8:n=OE;break;case 32:n=mc;break;case 268435456:n=qE;break;default:n=mc}return i=WA.bind(null,t),n=ep(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Ef(i),t.callbackPriority=2,t.callbackNode=null,2}function WA(t,e){if(dt!==0&&dt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(wd()&&t.callbackNode!==n)return null;var i=pe;return i=fd(t,t===De?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(LA(t,i,e),XA(t,tn()),t.callbackNode!=null&&t.callbackNode===n?WA.bind(null,t):null)}function $_(t,e){if(wd())return null;LA(t,e,!0)}function eN(){fN(function(){Te&6?ep(LE,Zx):jA()})}function Bp(){if(Xi===0){var t=ho;t===0&&(t=gu,gu<<=1,!(gu&261888)&&(gu=256)),Xi=t}return Xi}function Q_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Bu(""+t)}function j_(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function tN(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=Q_((s[Kt]||null).action),o=i.submitter;o&&(e=(e=o[Kt]||null)?Q_(e.formAction):o.getAttribute("formAction"),e!==null&&(r=e,o=null));var a=new hd("action","action",null,i,s);t.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Xi!==0){var l=o?j_(s,o):new FormData(s);Yh(n,{pending:!0,data:l,method:s.method,action:r},null,l)}}else typeof r=="function"&&(a.preventDefault(),l=o?j_(s,o):new FormData(s),Yh(n,{pending:!0,data:l,method:s.method,action:r},r,l))},currentTarget:s}]})}}for(var $f=0;$f<Ph.length;$f++){var Qf=Ph[$f],nN=Qf.toLowerCase(),iN=Qf[0].toUpperCase()+Qf.slice(1);Pn(nN,"on"+iN)}Pn(cS,"onAnimationEnd");Pn(dS,"onAnimationIteration");Pn(fS,"onAnimationStart");Pn("dblclick","onDoubleClick");Pn("focusin","onFocus");Pn("focusout","onBlur");Pn(vx,"onTransitionRun");Pn(Tx,"onTransitionStart");Pn(Ex,"onTransitionCancel");Pn(hS,"onTransitionEnd");co("onMouseEnter",["mouseout","mouseover"]);co("onMouseLeave",["mouseout","mouseover"]);co("onPointerEnter",["pointerout","pointerover"]);co("onPointerLeave",["pointerout","pointerover"]);fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function ZA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=u;try{r(s)}catch(h){gc(h)}s.currentTarget=null,r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=u;try{r(s)}catch(h){gc(h)}s.currentTarget=null,r=l}}}}function ce(t,e){var n=e[Ih];n===void 0&&(n=e[Ih]=new Set);var i=t+"__bubble";n.has(i)||(eC(e,t,2,!1),n.add(i))}function jf(t,e,n){var i=0;e&&(i|=4),eC(n,t,i,e)}var wu="_reactListening"+Math.random().toString(36).slice(2);function Fp(t){if(!t[wu]){t[wu]=!0,YE.forEach(function(n){n!=="selectionchange"&&(sN.has(n)||jf(n,!1,t),jf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wu]||(e[wu]=!0,jf("selectionchange",!1,e))}}function eC(t,e,n,i){switch(hC(e)){case 2:var s=DN;break;case 8:s=PN;break;default:s=Yp}n=s.bind(null,e,n,t),s=void 0,!Nh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xf(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;a!==null;){if(o=Lr(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=r=o;continue e}a=a.parentNode}}i=i.return}ZE(function(){var u=r,h=rp(n),m=[];e:{var p=mS.get(t);if(p!==void 0){var v=hd,w=t;switch(t){case"keypress":if(Hu(n)===0)break e;case"keydown":case"keyup":v=Xb;break;case"focusin":w="focus",v=wf;break;case"focusout":w="blur",v=wf;break;case"beforeblur":case"afterblur":v=wf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=s_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=qb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ex;break;case cS:case dS:case fS:v=Hb;break;case hS:v=nx;break;case"scroll":case"scrollend":v=Lb;break;case"wheel":v=sx;break;case"copy":case"cut":case"paste":v=zb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=o_;break;case"toggle":case"beforetoggle":v=ox}var N=(e&4)!==0,V=!N&&(t==="scroll"||t==="scrollend"),I=N?p!==null?p+"Capture":null:p;N=[];for(var S=u,R;S!==null;){var M=S;if(R=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||R===null||I===null||(M=ll(S,I),M!=null&&N.push(yl(S,M,R))),V)break;S=S.return}0<N.length&&(p=new v(p,w,null,n,h),m.push({event:p,listeners:N}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==xh&&(w=n.relatedTarget||n.fromElement)&&(Lr(w)||w[No]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=u,w=w?Lr(w):null,w!==null&&(V=Ml(w),N=w.tag,w!==V||N!==5&&N!==27&&N!==6)&&(w=null)):(v=null,w=u),v!==w)){if(N=s_,M="onMouseLeave",I="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(N=o_,M="onPointerLeave",I="onPointerEnter",S="pointer"),V=v==null?p:Na(v),R=w==null?p:Na(w),p=new N(M,S+"leave",v,n,h),p.target=V,p.relatedTarget=R,M=null,Lr(h)===u&&(N=new N(I,S+"enter",w,n,h),N.target=R,N.relatedTarget=V,M=N),V=M,v&&w)t:{for(N=rN,I=v,S=w,R=0,M=I;M;M=N(M))R++;M=0;for(var U=S;U;U=N(U))M++;for(;0<R-M;)I=N(I),R--;for(;0<M-R;)S=N(S),M--;for(;R--;){if(I===S||S!==null&&I===S.alternate){N=I;break t}I=N(I),S=N(S)}N=null}else N=null;v!==null&&X_(m,p,v,N,!1),w!==null&&V!==null&&X_(m,V,w,N,!0)}}e:{if(p=u?Na(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var O=c_;else if(u_(p))if(rS)O=gx;else{O=mx;var A=hx}else v=p.nodeName,!v||v.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?u&&sp(u.elementType)&&(O=c_):O=px;if(O&&(O=O(t,u))){sS(m,O,n,h);break e}A&&A(t,p,u),t==="focusout"&&u&&p.type==="number"&&u.memoizedProps.value!=null&&bh(p,"number",p.value)}switch(A=u?Na(u):window,t){case"focusin":(u_(A)||A.contentEditable==="true")&&(Br=A,Mh=u,Ga=null);break;case"focusout":Ga=Mh=Br=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,p_(m,n,h);break;case"selectionchange":if(_x)break;case"keydown":case"keyup":p_(m,n,h)}var T;if(lp)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else qr?nS(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(tS&&n.locale!=="ko"&&(qr||E!=="onCompositionStart"?E==="onCompositionEnd"&&qr&&(T=eS()):($i=h,op="value"in $i?$i.value:$i.textContent,qr=!0)),A=Pc(u,E),0<A.length&&(E=new r_(E,t,null,n,h),m.push({event:E,listeners:A}),T?E.data=T:(T=iS(n),T!==null&&(E.data=T)))),(T=lx?ux(t,n):cx(t,n))&&(E=Pc(u,"onBeforeInput"),0<E.length&&(A=new r_("onBeforeInput","beforeinput",null,n,h),m.push({event:A,listeners:E}),A.data=T)),tN(m,t,u,n,h)}ZA(m,e)})}function yl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=ll(t,n),s!=null&&i.unshift(yl(t,s,r)),s=ll(t,e),s!=null&&i.push(yl(t,s,r))),t.tag===3)return i;t=t.return}return[]}function rN(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function X_(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||u===null||(l=u,s?(u=ll(n,r),u!=null&&o.unshift(yl(n,u,l))):s||(u=ll(n,r),u!=null&&o.push(yl(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oN=/\r\n?/g,aN=/\u0000|\uFFFD/g;function W_(t){return(typeof t=="string"?t:""+t).replace(oN,`
`).replace(aN,"")}function tC(t,e){return e=W_(e),W_(t)===e}function Re(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||fo(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&fo(t,""+i);break;case"className":vu(t,"class",i);break;case"tabIndex":vu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":vu(t,n,i);break;case"style":WE(t,i,r);break;case"data":if(e!=="object"){vu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Bu(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Re(t,e,"name",s.name,s,null),Re(t,e,"formEncType",s.formEncType,s,null),Re(t,e,"formMethod",s.formMethod,s,null),Re(t,e,"formTarget",s.formTarget,s,null)):(Re(t,e,"encType",s.encType,s,null),Re(t,e,"method",s.method,s,null),Re(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Bu(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=ui);break;case"onScroll":i!=null&&ce("scroll",t);break;case"onScrollEnd":i!=null&&ce("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Bu(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":ce("beforetoggle",t),ce("toggle",t),qu(t,"popover",i);break;case"xlinkActuate":ti(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ti(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ti(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ti(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ti(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ti(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ti(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ti(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ti(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":qu(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ub.get(n)||n,qu(t,n,i))}}function nm(t,e,n,i,s,r){switch(n){case"style":WE(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"children":typeof i=="string"?fo(t,i):(typeof i=="number"||typeof i=="bigint")&&fo(t,""+i);break;case"onScroll":i!=null&&ce("scroll",t);break;case"onScrollEnd":i!=null&&ce("scrollend",t);break;case"onClick":i!=null&&(t.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!KE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[Kt]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):qu(t,n,i)}}}function Rt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ce("error",t),ce("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Re(t,e,r,o,n,null)}}s&&Re(t,e,"srcSet",n.srcSet,n,null),i&&Re(t,e,"src",n.src,n,null);return;case"input":ce("invalid",t);var a=r=o=s=null,l=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":s=h;break;case"type":o=h;break;case"checked":l=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(B(137,e));break;default:Re(t,e,i,h,n,null)}}QE(t,r,a,l,u,o,s,!1);return;case"select":ce("invalid",t),i=o=r=null;for(s in n)if(n.hasOwnProperty(s)&&(a=n[s],a!=null))switch(s){case"value":r=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:Re(t,e,s,a,n,null)}e=r,n=o,t.multiple=!!i,e!=null?jr(t,!!i,e,!1):n!=null&&jr(t,!!i,n,!0);return;case"textarea":ce("invalid",t),r=s=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":s=a;break;case"children":r=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(B(91));break;default:Re(t,e,o,a,n,null)}XE(t,i,s,r);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Re(t,e,l,i,n,null)}return;case"dialog":ce("beforetoggle",t),ce("toggle",t),ce("cancel",t),ce("close",t);break;case"iframe":case"object":ce("load",t);break;case"video":case"audio":for(i=0;i<gl.length;i++)ce(gl[i],t);break;case"image":ce("error",t),ce("load",t);break;case"details":ce("toggle",t);break;case"embed":case"source":case"link":ce("error",t),ce("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Re(t,e,u,i,n,null)}return;default:if(sp(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&nm(t,e,h,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Re(t,e,a,i,n,null))}function lN(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,o=null,a=null,l=null,u=null,h=null;for(v in n){var m=n[v];if(n.hasOwnProperty(v)&&m!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":l=m;default:i.hasOwnProperty(v)||Re(t,e,v,null,i,m)}}for(var p in i){var v=i[p];if(m=n[p],i.hasOwnProperty(p)&&(v!=null||m!=null))switch(p){case"type":r=v;break;case"name":s=v;break;case"checked":u=v;break;case"defaultChecked":h=v;break;case"value":o=v;break;case"defaultValue":a=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(B(137,e));break;default:v!==m&&Re(t,e,p,v,i,m)}}Rh(t,o,a,l,u,h,r,s);return;case"select":v=o=a=p=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":v=l;default:i.hasOwnProperty(r)||Re(t,e,r,null,i,l)}for(s in i)if(r=i[s],l=n[s],i.hasOwnProperty(s)&&(r!=null||l!=null))switch(s){case"value":p=r;break;case"defaultValue":a=r;break;case"multiple":o=r;default:r!==l&&Re(t,e,s,r,i,l)}e=a,n=o,i=v,p!=null?jr(t,!!n,p,!1):!!i!=!!n&&(e!=null?jr(t,!!n,e,!0):jr(t,!!n,n?[]:"",!1));return;case"textarea":v=p=null;for(a in n)if(s=n[a],n.hasOwnProperty(a)&&s!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Re(t,e,a,null,i,s)}for(o in i)if(s=i[o],r=n[o],i.hasOwnProperty(o)&&(s!=null||r!=null))switch(o){case"value":p=s;break;case"defaultValue":v=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(B(91));break;default:s!==r&&Re(t,e,o,s,i,r)}jE(t,p,v);return;case"option":for(var w in n)if(p=n[w],n.hasOwnProperty(w)&&p!=null&&!i.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:Re(t,e,w,null,i,p)}for(l in i)if(p=i[l],v=n[l],i.hasOwnProperty(l)&&p!==v&&(p!=null||v!=null))switch(l){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Re(t,e,l,p,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var N in n)p=n[N],n.hasOwnProperty(N)&&p!=null&&!i.hasOwnProperty(N)&&Re(t,e,N,null,i,p);for(u in i)if(p=i[u],v=n[u],i.hasOwnProperty(u)&&p!==v&&(p!=null||v!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(B(137,e));break;default:Re(t,e,u,p,i,v)}return;default:if(sp(e)){for(var V in n)p=n[V],n.hasOwnProperty(V)&&p!==void 0&&!i.hasOwnProperty(V)&&nm(t,e,V,void 0,i,p);for(h in i)p=i[h],v=n[h],!i.hasOwnProperty(h)||p===v||p===void 0&&v===void 0||nm(t,e,h,p,i,v);return}}for(var I in n)p=n[I],n.hasOwnProperty(I)&&p!=null&&!i.hasOwnProperty(I)&&Re(t,e,I,null,i,p);for(m in i)p=i[m],v=n[m],!i.hasOwnProperty(m)||p===v||p==null&&v==null||Re(t,e,m,p,i,v)}function Z_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var s=n[i],r=s.transferSize,o=s.initiatorType,a=s.duration;if(r&&a&&Z_(o)){for(o=0,a=s.responseEnd,i+=1;i<n.length;i++){var l=n[i],u=l.startTime;if(u>a)break;var h=l.transferSize,m=l.initiatorType;h&&Z_(m)&&(l=l.responseEnd,o+=h*(l<a?1:(a-u)/(l-u)))}if(--i,e+=8*(r+o)/(s.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var im=null,sm=null;function Vc(t){return t.nodeType===9?t:t.ownerDocument}function ev(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nC(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wf=null;function cN(){var t=window.event;return t&&t.type==="popstate"?t===Wf?!1:(Wf=t,!0):(Wf=null,!1)}var iC=typeof setTimeout=="function"?setTimeout:void 0,dN=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,fN=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(t){return tv.resolve(null).then(t).catch(hN)}:iC;function hN(t){setTimeout(function(){throw t})}function Rs(t){return t==="head"}function nv(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(s),To(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Za(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Za(n);for(var r=n.firstChild;r;){var o=r.nextSibling,a=r.nodeName;r[Ul]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=o}}else n==="body"&&Za(t.ownerDocument.body);n=s}while(n);To(e)}function iv(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function om(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":om(n),ip(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function mN(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Ul])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=vn(t.nextSibling),t===null)break}return null}function pN(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=vn(t.nextSibling),t===null))return null;return t}function sC(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=vn(t.nextSibling),t===null))return null;return t}function am(t){return t.data==="$?"||t.data==="$~"}function lm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function gN(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var um=null;function sv(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return vn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function rv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function rC(t,e,n){switch(e=Vc(n),t){case"html":if(t=e.documentElement,!t)throw Error(B(452));return t;case"head":if(t=e.head,!t)throw Error(B(453));return t;case"body":if(t=e.body,!t)throw Error(B(454));return t;default:throw Error(B(451))}}function Za(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ip(t)}var En=new Map,ov=new Set;function Uc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ii=Ee.d;Ee.d={f:yN,r:_N,D:vN,C:TN,L:EN,m:SN,X:CN,S:AN,M:IN};function yN(){var t=Ii.f(),e=Cd();return t||e}function _N(t){var e=Mo(t);e!==null&&e.tag===5&&e.type==="form"?WS(e):Ii.r(t)}var Uo=typeof document>"u"?null:document;function oC(t,e,n){var i=Uo;if(i&&typeof e=="string"&&e){var s=hn(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),ov.has(s)||(ov.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),Rt(e,"link",t),_t(e),i.head.appendChild(e)))}}function vN(t){Ii.D(t),oC("dns-prefetch",t,null)}function TN(t,e){Ii.C(t,e),oC("preconnect",t,e)}function EN(t,e,n){Ii.L(t,e,n);var i=Uo;if(i&&t&&e){var s='link[rel="preload"][as="'+hn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+hn(n.imageSizes)+'"]')):s+='[href="'+hn(t)+'"]';var r=s;switch(e){case"style":r=vo(t);break;case"script":r=ko(t)}En.has(r)||(t=Ge({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),En.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(Fl(r))||e==="script"&&i.querySelector(Hl(r))||(e=i.createElement("link"),Rt(e,"link",t),_t(e),i.head.appendChild(e)))}}function SN(t,e){Ii.m(t,e);var n=Uo;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+hn(i)+'"][href="'+hn(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ko(t)}if(!En.has(r)&&(t=Ge({rel:"modulepreload",href:t},e),En.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Hl(r)))return}i=n.createElement("link"),Rt(i,"link",t),_t(i),n.head.appendChild(i)}}}function AN(t,e,n){Ii.S(t,e,n);var i=Uo;if(i&&t){var s=Qr(i).hoistableStyles,r=vo(t);e=e||"default";var o=s.get(r);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Fl(r)))a.loading=5;else{t=Ge({rel:"stylesheet",href:t,"data-precedence":e},n),(n=En.get(r))&&Hp(t,n);var l=o=i.createElement("link");_t(l),Rt(l,"link",t),l._p=new Promise(function(u,h){l.onload=u,l.onerror=h}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,ju(o,e,i)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(r,o)}}}function CN(t,e){Ii.X(t,e);var n=Uo;if(n&&t){var i=Qr(n).hoistableScripts,s=ko(t),r=i.get(s);r||(r=n.querySelector(Hl(s)),r||(t=Ge({src:t,async:!0},e),(e=En.get(s))&&Gp(t,e),r=n.createElement("script"),_t(r),Rt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function IN(t,e){Ii.M(t,e);var n=Uo;if(n&&t){var i=Qr(n).hoistableScripts,s=ko(t),r=i.get(s);r||(r=n.querySelector(Hl(s)),r||(t=Ge({src:t,async:!0,type:"module"},e),(e=En.get(s))&&Gp(t,e),r=n.createElement("script"),_t(r),Rt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function av(t,e,n,i){var s=(s=es.current)?Uc(s):null;if(!s)throw Error(B(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=vo(n.href),n=Qr(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=vo(n.href);var r=Qr(s).hoistableStyles,o=r.get(t);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,o),(r=s.querySelector(Fl(t)))&&!r._p&&(o.instance=r,o.state.loading=5),En.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},En.set(t,n),r||wN(s,t,n,o.state))),e&&i===null)throw Error(B(528,""));return o}if(e&&i!==null)throw Error(B(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=ko(n),n=Qr(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(B(444,t))}}function vo(t){return'href="'+hn(t)+'"'}function Fl(t){return'link[rel="stylesheet"]['+t+"]"}function aC(t){return Ge({},t,{"data-precedence":t.precedence,precedence:null})}function wN(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Rt(e,"link",n),_t(e),t.head.appendChild(e))}function ko(t){return'[src="'+hn(t)+'"]'}function Hl(t){return"script[async]"+t}function lv(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+hn(n.href)+'"]');if(i)return e.instance=i,_t(i),i;var s=Ge({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),_t(i),Rt(i,"style",s),ju(i,n.precedence,t),e.instance=i;case"stylesheet":s=vo(n.href);var r=t.querySelector(Fl(s));if(r)return e.state.loading|=4,e.instance=r,_t(r),r;i=aC(n),(s=En.get(s))&&Hp(i,s),r=(t.ownerDocument||t).createElement("link"),_t(r);var o=r;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Rt(r,"link",i),e.state.loading|=4,ju(r,n.precedence,t),e.instance=r;case"script":return r=ko(n.src),(s=t.querySelector(Hl(r)))?(e.instance=s,_t(s),s):(i=n,(s=En.get(r))&&(i=Ge({},n),Gp(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),_t(s),Rt(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(B(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,ju(i,n.precedence,t));return e.instance}function ju(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===e)r=a;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Hp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Gp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Xu=null;function uv(t,e,n){if(Xu===null){var i=new Map,s=Xu=new Map;s.set(n,i)}else s=Xu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[Ul]||r[At]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(e)||"";o=t+o;var a=i.get(o);a?a.push(r):i.set(o,[r])}}return i}function cv(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function RN(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function lC(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function bN(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=vo(i.href),r=e.querySelector(Fl(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=kc.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,_t(r);return}r=e.ownerDocument||e,i=aC(i),(s=En.get(s))&&Hp(i,s),r=r.createElement("link"),_t(r);var o=r;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Rt(r,"link",i),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=kc.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Zf=0;function xN(t,e){return t.stylesheets&&t.count===0&&Wu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Wu(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&Zf===0&&(Zf=62500*uN());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Wu(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>Zf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(s)}}:null}function kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Lc=null;function Wu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Lc=new Map,e.forEach(NN,t),Lc=null,kc.call(t))}function NN(t,e){if(!(e.state.loading&4)){var n=Lc.get(t);if(n)var i=n.get(null);else{n=new Map,Lc.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var o=s[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}s=e.instance,o=s.getAttribute("data-precedence"),r=n.get(o)||i,r===i&&n.set(null,s),n.set(o,s),this.count++,i=kc.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var _l={$$typeof:li,Provider:null,Consumer:null,_currentValue:Ks,_currentValue2:Ks,_threadCount:0};function MN(t,e,n,i,s,r,o,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sf(0),this.hiddenUpdates=Sf(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function uC(t,e,n,i,s,r,o,a,l,u,h,m){return t=new MN(t,e,n,o,l,u,h,m,a),e=1,r===!0&&(e|=24),r=Wt(3,null,null,e),t.current=r,r.stateNode=t,e=pp(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},_p(r),t}function cC(t){return t?(t=Gr,t):Gr}function dC(t,e,n,i,s,r){s=cC(s),i.context===null?i.context=s:i.pendingContext=s,i=ns(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=is(t,i,e),n!==null&&(Yt(n,t,e),Ya(n,t,e))}function dv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zp(t,e){dv(t,e),(t=t.alternate)&&dv(t,e)}function fC(t){if(t.tag===13||t.tag===31){var e=pr(t,67108864);e!==null&&Yt(e,t,67108864),zp(t,67108864)}}function fv(t){if(t.tag===13||t.tag===31){var e=rn();e=tp(e);var n=pr(t,e);n!==null&&Yt(n,t,e),zp(t,e)}}var Oc=!0;function DN(t,e,n,i){var s=ne.T;ne.T=null;var r=Ee.p;try{Ee.p=2,Yp(t,e,n,i)}finally{Ee.p=r,ne.T=s}}function PN(t,e,n,i){var s=ne.T;ne.T=null;var r=Ee.p;try{Ee.p=8,Yp(t,e,n,i)}finally{Ee.p=r,ne.T=s}}function Yp(t,e,n,i){if(Oc){var s=cm(i);if(s===null)Xf(t,e,i,qc,n),hv(t,i);else if(UN(s,t,e,n,i))i.stopPropagation();else if(hv(t,i),e&4&&-1<VN.indexOf(t)){for(;s!==null;){var r=Mo(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=Bs(r.pendingLanes);if(o!==0){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-sn(o);a.entanglements[1]|=l,o&=~l}ei(r),!(Te&6)&&(bc=tn()+500,Bl(0))}}break;case 31:case 13:a=pr(r,2),a!==null&&Yt(a,r,2),Cd(),zp(r,2)}if(r=cm(i),r===null&&Xf(t,e,i,qc,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Xf(t,e,i,null,n)}}function cm(t){return t=rp(t),Kp(t)}var qc=null;function Kp(t){if(qc=null,t=Lr(t),t!==null){var e=Ml(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=DE(e),t!==null)return t;t=null}else if(n===31){if(t=PE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return qc=t,null}function hC(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vb()){case LE:return 2;case OE:return 8;case mc:case Tb:return 32;case qE:return 268435456;default:return 32}default:return 32}}var dm=!1,os=null,as=null,ls=null,vl=new Map,Tl=new Map,Hi=[],VN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hv(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":vl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(e.pointerId)}}function va(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Mo(e),e!==null&&fC(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function UN(t,e,n,i,s){switch(e){case"focusin":return os=va(os,t,e,n,i,s),!0;case"dragenter":return as=va(as,t,e,n,i,s),!0;case"mouseover":return ls=va(ls,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return vl.set(r,va(vl.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Tl.set(r,va(Tl.get(r)||null,t,e,n,i,s)),!0}return!1}function mC(t){var e=Lr(t.target);if(e!==null){var n=Ml(e);if(n!==null){if(e=n.tag,e===13){if(e=DE(n),e!==null){t.blockedOn=e,Xy(t.priority,function(){fv(n)});return}}else if(e===31){if(e=PE(n),e!==null){t.blockedOn=e,Xy(t.priority,function(){fv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cm(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);xh=i,n.target.dispatchEvent(i),xh=null}else return e=Mo(n),e!==null&&fC(e),t.blockedOn=n,!1;e.shift()}return!0}function mv(t,e,n){Zu(t)&&n.delete(e)}function kN(){dm=!1,os!==null&&Zu(os)&&(os=null),as!==null&&Zu(as)&&(as=null),ls!==null&&Zu(ls)&&(ls=null),vl.forEach(mv),Tl.forEach(mv)}function Ru(t,e){t.blockedOn===e&&(t.blockedOn=null,dm||(dm=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,kN)))}var bu=null;function pv(t){bu!==t&&(bu=t,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,function(){bu===t&&(bu=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(Kp(i||n)===null)continue;break}var r=Mo(n);r!==null&&(t.splice(e,3),e-=3,Yh(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function To(t){function e(l){return Ru(l,t)}os!==null&&Ru(os,t),as!==null&&Ru(as,t),ls!==null&&Ru(ls,t),vl.forEach(e),Tl.forEach(e);for(var n=0;n<Hi.length;n++){var i=Hi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Hi.length&&(n=Hi[0],n.blockedOn===null);)mC(n),n.blockedOn===null&&Hi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],o=s[Kt]||null;if(typeof r=="function")o||pv(n);else if(o){var a=null;if(r&&r.hasAttribute("formAction")){if(s=r,o=r[Kt]||null)a=o.formAction;else if(Kp(s)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),pv(n)}}}function pC(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(o){return s=o})},focusReset:"manual",scroll:"manual"})}function e(){s!==null&&(s(),s=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),s!==null&&(s(),s=null)}}}function Jp(t){this._internalRoot=t}Rd.prototype.render=Jp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));var n=e.current,i=rn();dC(n,i,t,e,null,null)};Rd.prototype.unmount=Jp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dC(t.current,2,null,t,null,null),Cd(),e[No]=null}};function Rd(t){this._internalRoot=t}Rd.prototype.unstable_scheduleHydration=function(t){if(t){var e=zE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hi.length&&e!==0&&e<Hi[n].priority;n++);Hi.splice(n,0,t),n===0&&mC(t)}};var gv=NE.version;if(gv!=="19.2.0")throw Error(B(527,gv,"19.2.0"));Ee.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=fb(e),t=t!==null?VE(t):null,t=t===null?null:t.stateNode,t};var LN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{Dl=xu.inject(LN),nn=xu}catch{}}cd.createRoot=function(t,e){if(!ME(t))throw Error(B(299));var n=!1,i="",s=oA,r=aA,o=lA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=uC(t,1,!1,null,null,n,i,null,s,r,o,pC),t[No]=e.current,Fp(t),new Jp(e)};cd.hydrateRoot=function(t,e,n){if(!ME(t))throw Error(B(299));var i=!1,s="",r=oA,o=aA,a=lA,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=uC(t,1,!0,e,n??null,i,s,l,r,o,a,pC),e.context=cC(null),n=e.current,i=rn(),i=tp(i),s=ns(i),s.callback=null,is(n,s,i),n=i,e.current.lanes=n,Vl(e,n),ei(e),t[No]=e.current,Fp(t),new Rd(e)};cd.version="19.2.0";function gC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gC)}catch(t){console.error(t)}}gC(),CE.exports=cd;var ON=CE.exports;const qN=mE(ON),BN=()=>{};var yv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},FN=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},_C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=r>>2,m=(r&3)<<4|a>>4;let p=(a&15)<<2|u>>6,v=u&63;l||(v=64,o||(p=64)),i.push(n[h],n[m],n[p],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||u==null||m==null)throw new HN;const p=r<<2|a>>4;if(i.push(p),u!==64){const v=a<<4&240|u>>2;if(i.push(v),m!==64){const w=u<<6&192|m;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GN=function(t){const e=yC(t);return _C.encodeByteArray(e,!0)},Bc=function(t){return GN(t).replace(/\./g,"")},vC=function(t){try{return _C.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=()=>zN().__FIREBASE_DEFAULTS__,KN=()=>{if(typeof process>"u"||typeof yv>"u")return;const t=yv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vC(t[1]);return e&&JSON.parse(e)},bd=()=>{try{return BN()||YN()||KN()||JN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TC=t=>{var e,n;return(n=(e=bd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},$N=t=>{const e=TC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},EC=()=>{var t;return(t=bd())==null?void 0:t.config},SC=t=>{var e;return(e=bd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bc(JSON.stringify(n)),Bc(JSON.stringify(o)),""].join(".")}const el={};function XN(){const t={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?t.emulator.push(e):t.prod.push(e);return t}function WN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let _v=!1;function CC(t,e){if(typeof window>"u"||typeof document>"u"||!Lo(window.location.host)||el[t]===e||el[t]||_v)return;el[t]=e;function n(p){return`__firebase__banner__${p}`}const i="__firebase__banner",r=XN().prod.length>0;function o(){const p=document.getElementById(i);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{_v=!0,o()},p}function h(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=WN(i),v=n("text"),w=document.getElementById(v)||document.createElement("span"),N=n("learnmore"),V=document.getElementById(N)||document.createElement("a"),I=n("preprendIcon"),S=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const R=p.element;a(R),h(V,N);const M=u();l(S,I),R.append(S,w,V,M),document.body.appendChild(R)}r?(w.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function e1(){var e;const t=(e=bd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function t1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function n1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function i1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s1(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function r1(){return!e1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function o1(){try{return typeof indexedDB=="object"}catch{return!1}}function a1(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="FirebaseError";class wi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=l1,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?u1(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new wi(s,a,i)}}function u1(t,e){return t.replace(c1,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const c1=/\{\$([^}]+)}/g;function d1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(vv(r)&&vv(o)){if(!sr(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function vv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Pa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Va(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function f1(t,e){const n=new h1(t,e);return n.subscribe.bind(n)}class h1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");m1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=eh),s.error===void 0&&(s.error=eh),s.complete===void 0&&(s.complete=eh);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class rr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new QN;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y1(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:g1(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g1(t){return t===Gs?void 0:t}function y1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new p1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const v1={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},T1=fe.INFO,E1={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},S1=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=E1[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $p{constructor(e){this.name=e,this._logLevel=T1,this._logHandler=S1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const A1=(t,e)=>e.some(n=>t instanceof n);let Tv,Ev;function C1(){return Tv||(Tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I1(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IC=new WeakMap,fm=new WeakMap,wC=new WeakMap,th=new WeakMap,Qp=new WeakMap;function w1(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(us(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IC.set(n,t)}).catch(()=>{}),Qp.set(e,t),e}function R1(t){if(fm.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});fm.set(t,e)}let hm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function b1(t){hm=t(hm)}function x1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(nh(this),e,...n);return wC.set(i,e.sort?e.sort():[e]),us(i)}:I1().includes(t)?function(...e){return t.apply(nh(this),e),us(IC.get(this))}:function(...e){return us(t.apply(nh(this),e))}}function N1(t){return typeof t=="function"?x1(t):(t instanceof IDBTransaction&&R1(t),A1(t,C1())?new Proxy(t,hm):t)}function us(t){if(t instanceof IDBRequest)return w1(t);if(th.has(t))return th.get(t);const e=N1(t);return e!==t&&(th.set(t,e),Qp.set(e,t)),e}const nh=t=>Qp.get(t);function M1(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=us(o);return i&&o.addEventListener("upgradeneeded",l=>{i(us(o.result),l.oldVersion,l.newVersion,us(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const D1=["get","getKey","getAll","getAllKeys","count"],P1=["put","add","delete","clear"],ih=new Map;function Sv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ih.get(e))return ih.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=P1.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||D1.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return ih.set(e,r),r}b1(t=>({...t,get:(e,n,i)=>Sv(e,n)||t.get(e,n,i),has:(e,n)=>!!Sv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(U1(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function U1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mm="@firebase/app",Av="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new $p("@firebase/app"),k1="@firebase/app-compat",L1="@firebase/analytics-compat",O1="@firebase/analytics",q1="@firebase/app-check-compat",B1="@firebase/app-check",F1="@firebase/auth",H1="@firebase/auth-compat",G1="@firebase/database",z1="@firebase/data-connect",Y1="@firebase/database-compat",K1="@firebase/functions",J1="@firebase/functions-compat",$1="@firebase/installations",Q1="@firebase/installations-compat",j1="@firebase/messaging",X1="@firebase/messaging-compat",W1="@firebase/performance",Z1="@firebase/performance-compat",eM="@firebase/remote-config",tM="@firebase/remote-config-compat",nM="@firebase/storage",iM="@firebase/storage-compat",sM="@firebase/firestore",rM="@firebase/ai",oM="@firebase/firestore-compat",aM="firebase",lM="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",uM={[mm]:"fire-core",[k1]:"fire-core-compat",[O1]:"fire-analytics",[L1]:"fire-analytics-compat",[B1]:"fire-app-check",[q1]:"fire-app-check-compat",[F1]:"fire-auth",[H1]:"fire-auth-compat",[G1]:"fire-rtdb",[z1]:"fire-data-connect",[Y1]:"fire-rtdb-compat",[K1]:"fire-fn",[J1]:"fire-fn-compat",[$1]:"fire-iid",[Q1]:"fire-iid-compat",[j1]:"fire-fcm",[X1]:"fire-fcm-compat",[W1]:"fire-perf",[Z1]:"fire-perf-compat",[eM]:"fire-rc",[tM]:"fire-rc-compat",[nM]:"fire-gcs",[iM]:"fire-gcs-compat",[sM]:"fire-fst",[oM]:"fire-fst-compat",[rM]:"fire-vertex","fire-js":"fire-js",[aM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Map,cM=new Map,gm=new Map;function Cv(t,e){try{t.container.addComponent(e)}catch(n){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Eo(t){const e=t.name;if(gm.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,t);for(const n of Fc.values())Cv(n,t);for(const n of cM.values())Cv(n,t);return!0}function jp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Gl("app","Firebase",dM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=lM;function RC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:pm,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw cs.create("bad-app-name",{appName:String(s)});if(n||(n=EC()),!n)throw cs.create("no-options");const r=Fc.get(s);if(r){if(sr(n,r.options)&&sr(i,r.config))return r;throw cs.create("duplicate-app",{appName:s})}const o=new _1(s);for(const l of gm.values())o.addComponent(l);const a=new fM(n,i,o);return Fc.set(s,a),a}function bC(t=pm){const e=Fc.get(t);if(!e&&t===pm&&EC())return RC();if(!e)throw cs.create("no-app",{appName:t});return e}function ds(t,e,n){let i=uM[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(o.join(" "));return}Eo(new rr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="firebase-heartbeat-database",mM=1,El="firebase-heartbeat-store";let sh=null;function xC(){return sh||(sh=M1(hM,mM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(El)}catch(n){console.warn(n)}}}}).catch(t=>{throw cs.create("idb-open",{originalErrorMessage:t.message})})),sh}async function pM(t){try{const n=(await xC()).transaction(El),i=await n.objectStore(El).get(NC(t));return await n.done,i}catch(e){if(e instanceof wi)Ei.warn(e.message);else{const n=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ei.warn(n.message)}}}async function Iv(t,e){try{const i=(await xC()).transaction(El,"readwrite");await i.objectStore(El).put(e,NC(t)),await i.done}catch(n){if(n instanceof wi)Ei.warn(n.message);else{const i=cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ei.warn(i.message)}}}function NC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=1024,yM=30;class _M{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>yM){const o=EM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ei.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wv(),{heartbeatsToSend:i,unsentEntries:s}=vM(this._heartbeatsCache.heartbeats),r=Bc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Ei.warn(n),""}}}function wv(){return new Date().toISOString().substring(0,10)}function vM(t,e=gM){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Rv(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return o1()?a1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Rv(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}function EM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){Eo(new rr("platform-logger",e=>new V1(e),"PRIVATE")),Eo(new rr("heartbeat",e=>new _M(e),"PRIVATE")),ds(mm,Av,t),ds(mm,Av,"esm2020"),ds("fire-js","")}SM("");function MC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AM=MC,DC=new Gl("auth","Firebase",MC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new $p("@firebase/auth");function CM(t,...e){Hc.logLevel<=fe.WARN&&Hc.warn(`Auth (${Oo}): ${t}`,...e)}function ec(t,...e){Hc.logLevel<=fe.ERROR&&Hc.error(`Auth (${Oo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw Xp(t,...e)}function Yn(t,...e){return Xp(t,...e)}function PC(t,e,n){const i={...AM(),[e]:n};return new Gl("auth","Firebase",i).create(e,{appName:t.name})}function fs(t){return PC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return DC.create(t,...e)}function ee(t,e,...n){if(!t)throw Xp(e,...n)}function di(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ec(e),new Error(e)}function Si(t,e){t||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function IM(){return bv()==="http:"||bv()==="https:"}function bv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IM()||n1()||"connection"in navigator)?navigator.onLine:!0}function RM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=ZN()||i1()}get(){return wM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,e){Si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NM=new Yl(3e4,6e4);function yr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function bs(t,e,n,i,s={}){return UC(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=zl({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...r};return t1()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Lo(t.emulatorConfig.host)&&(u.credentials="include"),VC.fetch()(await kC(t,t.config.apiHost,n,a),u)})}async function UC(t,e,n){t._canInitEmulator=!1;const i={...bM,...e};try{const s=new DM(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Nu(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Nu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Nu(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw PC(t,h,u);Mn(t,h)}}catch(s){if(s instanceof wi)throw s;Mn(t,"network-request-failed",{message:String(s)})}}async function xd(t,e,n,i,s={}){const r=await bs(t,e,n,i,s);return"mfaPendingCredential"in r&&Mn(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function kC(t,e,n,i){const s=`${e}${n}?${i}`,r=t,o=r.config.emulator?Wp(t.config,s):`${t.config.apiScheme}://${s}`;return xM.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function MM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Yn(this.auth,"network-request-failed")),NM.get())})}}function Nu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Yn(t,e,i);return s.customData._tokenResponse=n,s}function xv(t){return t!==void 0&&t.enterprise!==void 0}class PM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VM(t,e){return bs(t,"GET","/v2/recaptchaConfig",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(t,e){return bs(t,"POST","/v1/accounts:delete",e)}async function Gc(t,e){return bs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kM(t,e=!1){const n=mt(t),i=await n.getIdToken(e),s=Zp(i);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:tl(rh(s.auth_time)),issuedAtTime:tl(rh(s.iat)),expirationTime:tl(rh(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function rh(t){return Number(t)*1e3}function Zp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ec("JWT malformed, contained fewer than 3 sections"),null;try{const s=vC(n);return s?JSON.parse(s):(ec("Failed to decode base64 JWT payload"),null)}catch(s){return ec("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Nv(t){const e=Zp(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof wi&&LM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function LM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(t){var m;const e=t.auth,n=await t.getIdToken(),i=await Sl(t,Gc(e,{idToken:n}));ee(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const r=(m=s.providerUserInfo)!=null&&m.length?LC(s.providerUserInfo):[],o=BM(t.providerData,r),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function qM(t){const e=mt(t);await zc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BM(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function LC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){const n=await UC(t,{},async()=>{const i=zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=await kC(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return t.emulatorConfig&&Lo(t.emulatorConfig.host)&&(l.credentials="include"),VC.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HM(t,e){return bs(t,"POST","/v2/accounts:revokeToken",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Nv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await FM(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new no;return i&&(ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(ee(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xn{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new OM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _m(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Sl(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kM(this,e)}reload(){return qM(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await zc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(fs(this.auth));const e=await this.getIdToken();return await Sl(this,UM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:v,providerData:w,stsTokenManager:N}=n;ee(m&&N,e,"internal-error");const V=no.fromJSON(this.name,N);ee(typeof m=="string",e,"internal-error"),Ui(i,e.name),Ui(s,e.name),ee(typeof p=="boolean",e,"internal-error"),ee(typeof v=="boolean",e,"internal-error"),Ui(r,e.name),Ui(o,e.name),Ui(a,e.name),Ui(l,e.name),Ui(u,e.name),Ui(h,e.name);const I=new xn({uid:m,auth:e,email:s,emailVerified:p,displayName:i,isAnonymous:v,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:V,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(I.providerData=w.map(S=>({...S}))),l&&(I._redirectEventId=l),I}static async _fromIdTokenResponse(e,n,i=!1){const s=new no;s.updateFromServerResponse(n);const r=new xn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await zc(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?LC(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new no;a.updateFromIdToken(i);const l=new xn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=new Map;function fi(t){Si(t instanceof Function,"Expected a class definition");let e=Mv.get(t);return e?(Si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Mv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OC.type="NONE";const Dv=OC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t,e,n){return`firebase:${t}:${e}:${n}`}class io{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=tc(this.userKey,s.apiKey,r),this.fullPersistenceKey=tc("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gc(this.auth,{idToken:e}).catch(()=>{});return n?xn._fromGetAccountInfoResponse(this.auth,n,e):null}return xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new io(fi(Dv),e,i);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=s[0]||fi(Dv);const o=tc(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let m;if(typeof h=="string"){const p=await Gc(e,{idToken:h}).catch(()=>{});if(!p)break;m=await xn._fromGetAccountInfoResponse(e,p,h)}else m=xn._fromJSON(e,h);u!==r&&(a=m),r=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new io(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new io(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zC(e))return"Blackberry";if(YC(e))return"Webos";if(BC(e))return"Safari";if((e.includes("chrome/")||FC(e))&&!e.includes("edge/"))return"Chrome";if(GC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function qC(t=Pt()){return/firefox\//i.test(t)}function BC(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FC(t=Pt()){return/crios\//i.test(t)}function HC(t=Pt()){return/iemobile/i.test(t)}function GC(t=Pt()){return/android/i.test(t)}function zC(t=Pt()){return/blackberry/i.test(t)}function YC(t=Pt()){return/webos/i.test(t)}function eg(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GM(t=Pt()){var e;return eg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function zM(){return s1()&&document.documentMode===10}function KC(t=Pt()){return eg(t)||GC(t)||YC(t)||zC(t)||/windows phone/i.test(t)||HC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e=[]){let n;switch(t){case"Browser":n=Pv(Pt());break;case"Worker":n=`${Pv(Pt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e={}){return bs(t,"GET","/v2/passwordPolicy",yr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=6;class $M{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??JM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vv(this),this.idTokenSubscription=new Vv(this),this.beforeStateQueue=new YM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fi(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await io.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gc(this,{idToken:e}),i=await xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(bn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(fs(this));const n=e?mt(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KM(this),n=new $M(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await HM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fi(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&CM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qo(t){return mt(t)}class Vv{constructor(e){this.auth=e,this.observer=null,this.addObserver=f1(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jM(t){Nd=t}function $C(t){return Nd.loadJS(t)}function XM(){return Nd.recaptchaEnterpriseScript}function WM(){return Nd.gapiScript}function ZM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class eD{constructor(){this.enterprise=new tD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nD="recaptcha-enterprise",QC="NO_RECAPTCHA";class iD{constructor(e){this.type=nD,this.auth=qo(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{VM(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new PM(l);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;xv(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(u=>{o(u)}).catch(()=>{o(QC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eD().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{i(this.auth).then(a=>{if(!n&&xv(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XM();l.length!==0&&(l+=a),$C(l).then(()=>{s(a,r,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Uv(t,e,n,i=!1,s=!1){const r=new iD(t);let o;if(s)o=QC;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function kv(t,e,n,i,s){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Uv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Uv(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t,e){const n=jp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(sr(r,e??{}))return s;Mn(s,"already-initialized")}return n.initialize({options:e})}function rD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function oD(t,e,n){const i=qo(t);ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=jC(e),{host:o,port:a}=aD(e),l=a===null?"":`:${a}`,u={url:`${r}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ee(sr(u,i.config.emulator)&&sr(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Lo(o)?(AC(`${r}//${o}${l}`),CC("Auth",!0)):lD()}function jC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function aD(t){const e=jC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Lv(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:Lv(o)}}}function Lv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,n){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function uD(t,e){return bs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(t,e){return xd(t,"POST","/v1/accounts:signInWithPassword",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){return xd(t,"POST","/v1/accounts:signInWithEmailLink",yr(t,e))}async function fD(t,e){return xd(t,"POST","/v1/accounts:signInWithEmailLink",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends tg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Al(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Al(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kv(e,n,"signInWithPassword",cD);case"emailLink":return dD(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kv(e,i,"signUpPassword",uD);case"emailLink":return fD(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e){return xd(t,"POST","/v1/accounts:signInWithIdp",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="http://localhost";class or extends tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const o=new or(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return so(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,so(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,so(e,n)}buildRequest(){const e={requestUri:hD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pD(t){const e=Pa(Va(t)).link,n=e?Pa(Va(e)).deep_link_id:null,i=Pa(Va(t)).deep_link_id;return(i?Pa(Va(i)).link:null)||i||n||e||t}class ng{constructor(e){const n=Pa(Va(e)),i=n.apiKey??null,s=n.oobCode??null,r=mD(n.mode??null);ee(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=pD(e);try{return new ng(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,n){return Al._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ng.parseLink(n);return ee(i,"argument-error"),Al._fromEmailAndCode(e,i.code,i.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends XC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Kl{constructor(){super("facebook.com")}static credential(e){return or._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return or._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return zi.credential(n,i)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Kl{constructor(){super("github.com")}static credential(e){return or._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Kl{constructor(){super("twitter.com")}static credential(e,n){return or._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ki.credential(n,i)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await xn._fromIdTokenResponse(e,i,s),o=Ov(i);return new So({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Ov(i);return new So({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Ov(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends wi{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Yc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Yc(e,n,i,s)}}function WC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Yc._fromErrorAndOperation(t,r,e,i):r})}async function gD(t,e,n=!1){const i=await Sl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return So._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e,n=!1){const{auth:i}=t;if(bn(i.app))return Promise.reject(fs(i));const s="reauthenticate";try{const r=await Sl(t,WC(i,s,e,t),n);ee(r.idToken,i,"internal-error");const o=Zp(r.idToken);ee(o,i,"internal-error");const{sub:a}=o;return ee(t.uid===a,i,"user-mismatch"),So._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Mn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(t,e,n=!1){if(bn(t.app))return Promise.reject(fs(t));const i="signIn",s=await WC(t,i,e),r=await So._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function _D(t,e){return ZC(qo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(t){const e=qo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function TD(t,e,n){return bn(t.app)?Promise.reject(fs(t)):_D(mt(t),Bo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&vD(t),i})}function ED(t,e,n,i){return mt(t).onIdTokenChanged(e,n,i)}function SD(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function AD(t,e,n,i){return mt(t).onAuthStateChanged(e,n,i)}function oh(t){return mt(t).signOut()}const Kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kc,"1"),this.storage.removeItem(Kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=1e3,ID=10;class tI extends eI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);zM()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ID):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},CD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tI.type="LOCAL";const wD=tI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI extends eI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nI.type="SESSION";const iI=nI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Md(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,r)),l=await RD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const u=ig("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(p.data.response);break;default:clearTimeout(h),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return window}function xD(t){Kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(){return typeof Kn().WorkerGlobalScope<"u"&&typeof Kn().importScripts=="function"}async function ND(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function DD(){return sI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firebaseLocalStorageDb",PD=1,Jc="firebaseLocalStorage",oI="fbase_key";class Jl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dd(t,e){return t.transaction([Jc],e?"readwrite":"readonly").objectStore(Jc)}function VD(){const t=indexedDB.deleteDatabase(rI);return new Jl(t).toPromise()}function vm(){const t=indexedDB.open(rI,PD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Jc,{keyPath:oI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Jc)?e(i):(i.close(),await VD(),e(await vm()))})})}async function qv(t,e,n){const i=Dd(t,!0).put({[oI]:e,value:n});return new Jl(i).toPromise()}async function UD(t,e){const n=Dd(t,!1).get(e),i=await new Jl(n).toPromise();return i===void 0?null:i.value}function Bv(t,e){const n=Dd(t,!0).delete(e);return new Jl(n).toPromise()}const kD=800,LD=3;class aI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>LD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Md._getInstance(DD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await ND(),!this.activeServiceWorker)return;this.sender=new bD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vm();return await qv(e,Kc,"1"),await Bv(e,Kc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>qv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>UD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Dd(s,!1).getAll();return new Jl(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aI.type="LOCAL";const OD=aI;new Yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t,e){return e?fi(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends tg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return so(e,this._buildIdpRequest())}_linkToIdToken(e,n){return so(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return so(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BD(t){return ZC(t.auth,new sg(t),t.bypassAuthState)}function FD(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),yD(n,new sg(t),t.bypassAuthState)}async function HD(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),gD(n,new sg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BD;case"linkViaPopup":case"linkViaRedirect":return HD;case"reauthViaPopup":case"reauthViaRedirect":return FD;default:Mn(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=new Yl(2e3,1e4);class Jr extends lI{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Jr.currentPopupAction&&Jr.currentPopupAction.cancel(),Jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GD.get())};e()}}Jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="pendingRedirect",nc=new Map;class YD extends lI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=nc.get(this.auth._key());if(!e){try{const i=await KD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}nc.set(this.auth._key(),e)}return this.bypassAuthState||nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KD(t,e){const n=QD(e),i=$D(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function JD(t,e){nc.set(t._key(),e)}function $D(t){return fi(t._redirectPersistence)}function QD(t){return tc(zD,t.config.apiKey,t.name)}async function jD(t,e,n=!1){if(bn(t.app))return Promise.reject(fs(t));const i=qo(t),s=qD(i,e),o=await new YD(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=10*60*1e3;class WD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!uI(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(t,e={}){return bs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n2=/^https?/;async function i2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await e2(t);for(const n of e)try{if(s2(n))return}catch{}Mn(t,"unauthorized-domain")}function s2(t){const e=ym(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!n2.test(n))return!1;if(t2.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new Yl(3e4,6e4);function Hv(){const t=Kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function o2(t){return new Promise((e,n)=>{var s,r,o;function i(){Hv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hv(),n(Yn(t,"network-request-failed"))},timeout:r2.get()})}if((r=(s=Kn().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((o=Kn().gapi)!=null&&o.load)i();else{const a=ZM("iframefcb");return Kn()[a]=()=>{gapi.load?i():n(Yn(t,"network-request-failed"))},$C(`${WM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ic=null,e})}let ic=null;function a2(t){return ic=ic||o2(t),ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Yl(5e3,15e3),u2="__/auth/iframe",c2="emulator/auth/iframe",d2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h2(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wp(e,c2):`https://${t.config.authDomain}/${u2}`,i={apiKey:e.apiKey,appName:t.name,v:Oo},s=f2.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${zl(i).slice(1)}`}async function m2(t){const e=await a2(t),n=Kn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:h2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d2,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Yn(t,"network-request-failed"),a=Kn().setTimeout(()=>{r(o)},l2.get());function l(){Kn().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g2=500,y2=600,_2="_blank",v2="http://localhost";class Gv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T2(t,e,n,i=g2,s=y2){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l={...p2,width:i.toString(),height:s.toString(),top:r,left:o},u=Pt().toLowerCase();n&&(a=FC(u)?_2:n),qC(u)&&(e=e||v2,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[v,w])=>`${p}${v}=${w},`,"");if(GM(u)&&a!=="_self")return E2(e||"",a),new Gv(null);const m=window.open(e||"",a,h);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new Gv(m)}function E2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="__/auth/handler",A2="emulator/auth/handler",C2=encodeURIComponent("fac");async function zv(t,e,n,i,s,r){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Oo,eventId:s};if(e instanceof XC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",d1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Kl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${C2}=${encodeURIComponent(l)}`:"";return`${I2(t)}?${zl(a).slice(1)}${u}`}function I2({config:t}){return t.emulator?Wp(t,A2):`https://${t.authDomain}/${S2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="webStorageSupport";class w2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iI,this._completeRedirectFn=jD,this._overrideRedirectResult=JD}async _openPopup(e,n,i,s){var o;Si((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await zv(e,n,i,ym(),s);return T2(e,r,ig())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await zv(e,n,i,ym(),s);return xD(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Si(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await m2(e),i=new WD(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ah,{type:ah},s=>{var o;const r=(o=s==null?void 0:s[0])==null?void 0:o[ah];r!==void 0&&n(!!r),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KC()||BC()||eg()}}const R2=w2;var Yv="@firebase/auth",Kv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N2(t){Eo(new rr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JC(t)},u=new QM(i,s,r,l);return rD(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Eo(new rr("auth-internal",e=>{const n=qo(e.getProvider("auth").getImmediate());return(i=>new b2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(Yv,Kv,x2(t)),ds(Yv,Kv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=5*60,D2=SC("authIdTokenMaxAge")||M2;let Jv=null;const P2=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>D2)return;const s=n==null?void 0:n.token;Jv!==s&&(Jv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function V2(t=bC()){const e=jp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sD(t,{popupRedirectResolver:R2,persistence:[OD,wD,iI]}),i=SC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=P2(r.toString());SD(n,o,()=>o(n.currentUser)),ED(n,a=>o(a))}}const s=TC("auth");return s&&oD(n,`http://${s}`),n}function U2(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}jM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Yn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",U2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N2("Browser");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,cI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function E(){}E.prototype=T.prototype,A.F=T.prototype,A.prototype=new E,A.prototype.constructor=A,A.D=function(b,D,P){for(var x=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)x[xe-2]=arguments[xe];return T.prototype[D].apply(b,x)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,T,E){E||(E=0);const b=Array(16);if(typeof T=="string")for(var D=0;D<16;++D)b[D]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(D=0;D<16;++D)b[D]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=A.g[0],E=A.g[1],D=A.g[2];let P=A.g[3],x;x=T+(P^E&(D^P))+b[0]+3614090360&4294967295,T=E+(x<<7&4294967295|x>>>25),x=P+(D^T&(E^D))+b[1]+3905402710&4294967295,P=T+(x<<12&4294967295|x>>>20),x=D+(E^P&(T^E))+b[2]+606105819&4294967295,D=P+(x<<17&4294967295|x>>>15),x=E+(T^D&(P^T))+b[3]+3250441966&4294967295,E=D+(x<<22&4294967295|x>>>10),x=T+(P^E&(D^P))+b[4]+4118548399&4294967295,T=E+(x<<7&4294967295|x>>>25),x=P+(D^T&(E^D))+b[5]+1200080426&4294967295,P=T+(x<<12&4294967295|x>>>20),x=D+(E^P&(T^E))+b[6]+2821735955&4294967295,D=P+(x<<17&4294967295|x>>>15),x=E+(T^D&(P^T))+b[7]+4249261313&4294967295,E=D+(x<<22&4294967295|x>>>10),x=T+(P^E&(D^P))+b[8]+1770035416&4294967295,T=E+(x<<7&4294967295|x>>>25),x=P+(D^T&(E^D))+b[9]+2336552879&4294967295,P=T+(x<<12&4294967295|x>>>20),x=D+(E^P&(T^E))+b[10]+4294925233&4294967295,D=P+(x<<17&4294967295|x>>>15),x=E+(T^D&(P^T))+b[11]+2304563134&4294967295,E=D+(x<<22&4294967295|x>>>10),x=T+(P^E&(D^P))+b[12]+1804603682&4294967295,T=E+(x<<7&4294967295|x>>>25),x=P+(D^T&(E^D))+b[13]+4254626195&4294967295,P=T+(x<<12&4294967295|x>>>20),x=D+(E^P&(T^E))+b[14]+2792965006&4294967295,D=P+(x<<17&4294967295|x>>>15),x=E+(T^D&(P^T))+b[15]+1236535329&4294967295,E=D+(x<<22&4294967295|x>>>10),x=T+(D^P&(E^D))+b[1]+4129170786&4294967295,T=E+(x<<5&4294967295|x>>>27),x=P+(E^D&(T^E))+b[6]+3225465664&4294967295,P=T+(x<<9&4294967295|x>>>23),x=D+(T^E&(P^T))+b[11]+643717713&4294967295,D=P+(x<<14&4294967295|x>>>18),x=E+(P^T&(D^P))+b[0]+3921069994&4294967295,E=D+(x<<20&4294967295|x>>>12),x=T+(D^P&(E^D))+b[5]+3593408605&4294967295,T=E+(x<<5&4294967295|x>>>27),x=P+(E^D&(T^E))+b[10]+38016083&4294967295,P=T+(x<<9&4294967295|x>>>23),x=D+(T^E&(P^T))+b[15]+3634488961&4294967295,D=P+(x<<14&4294967295|x>>>18),x=E+(P^T&(D^P))+b[4]+3889429448&4294967295,E=D+(x<<20&4294967295|x>>>12),x=T+(D^P&(E^D))+b[9]+568446438&4294967295,T=E+(x<<5&4294967295|x>>>27),x=P+(E^D&(T^E))+b[14]+3275163606&4294967295,P=T+(x<<9&4294967295|x>>>23),x=D+(T^E&(P^T))+b[3]+4107603335&4294967295,D=P+(x<<14&4294967295|x>>>18),x=E+(P^T&(D^P))+b[8]+1163531501&4294967295,E=D+(x<<20&4294967295|x>>>12),x=T+(D^P&(E^D))+b[13]+2850285829&4294967295,T=E+(x<<5&4294967295|x>>>27),x=P+(E^D&(T^E))+b[2]+4243563512&4294967295,P=T+(x<<9&4294967295|x>>>23),x=D+(T^E&(P^T))+b[7]+1735328473&4294967295,D=P+(x<<14&4294967295|x>>>18),x=E+(P^T&(D^P))+b[12]+2368359562&4294967295,E=D+(x<<20&4294967295|x>>>12),x=T+(E^D^P)+b[5]+4294588738&4294967295,T=E+(x<<4&4294967295|x>>>28),x=P+(T^E^D)+b[8]+2272392833&4294967295,P=T+(x<<11&4294967295|x>>>21),x=D+(P^T^E)+b[11]+1839030562&4294967295,D=P+(x<<16&4294967295|x>>>16),x=E+(D^P^T)+b[14]+4259657740&4294967295,E=D+(x<<23&4294967295|x>>>9),x=T+(E^D^P)+b[1]+2763975236&4294967295,T=E+(x<<4&4294967295|x>>>28),x=P+(T^E^D)+b[4]+1272893353&4294967295,P=T+(x<<11&4294967295|x>>>21),x=D+(P^T^E)+b[7]+4139469664&4294967295,D=P+(x<<16&4294967295|x>>>16),x=E+(D^P^T)+b[10]+3200236656&4294967295,E=D+(x<<23&4294967295|x>>>9),x=T+(E^D^P)+b[13]+681279174&4294967295,T=E+(x<<4&4294967295|x>>>28),x=P+(T^E^D)+b[0]+3936430074&4294967295,P=T+(x<<11&4294967295|x>>>21),x=D+(P^T^E)+b[3]+3572445317&4294967295,D=P+(x<<16&4294967295|x>>>16),x=E+(D^P^T)+b[6]+76029189&4294967295,E=D+(x<<23&4294967295|x>>>9),x=T+(E^D^P)+b[9]+3654602809&4294967295,T=E+(x<<4&4294967295|x>>>28),x=P+(T^E^D)+b[12]+3873151461&4294967295,P=T+(x<<11&4294967295|x>>>21),x=D+(P^T^E)+b[15]+530742520&4294967295,D=P+(x<<16&4294967295|x>>>16),x=E+(D^P^T)+b[2]+3299628645&4294967295,E=D+(x<<23&4294967295|x>>>9),x=T+(D^(E|~P))+b[0]+4096336452&4294967295,T=E+(x<<6&4294967295|x>>>26),x=P+(E^(T|~D))+b[7]+1126891415&4294967295,P=T+(x<<10&4294967295|x>>>22),x=D+(T^(P|~E))+b[14]+2878612391&4294967295,D=P+(x<<15&4294967295|x>>>17),x=E+(P^(D|~T))+b[5]+4237533241&4294967295,E=D+(x<<21&4294967295|x>>>11),x=T+(D^(E|~P))+b[12]+1700485571&4294967295,T=E+(x<<6&4294967295|x>>>26),x=P+(E^(T|~D))+b[3]+2399980690&4294967295,P=T+(x<<10&4294967295|x>>>22),x=D+(T^(P|~E))+b[10]+4293915773&4294967295,D=P+(x<<15&4294967295|x>>>17),x=E+(P^(D|~T))+b[1]+2240044497&4294967295,E=D+(x<<21&4294967295|x>>>11),x=T+(D^(E|~P))+b[8]+1873313359&4294967295,T=E+(x<<6&4294967295|x>>>26),x=P+(E^(T|~D))+b[15]+4264355552&4294967295,P=T+(x<<10&4294967295|x>>>22),x=D+(T^(P|~E))+b[6]+2734768916&4294967295,D=P+(x<<15&4294967295|x>>>17),x=E+(P^(D|~T))+b[13]+1309151649&4294967295,E=D+(x<<21&4294967295|x>>>11),x=T+(D^(E|~P))+b[4]+4149444226&4294967295,T=E+(x<<6&4294967295|x>>>26),x=P+(E^(T|~D))+b[11]+3174756917&4294967295,P=T+(x<<10&4294967295|x>>>22),x=D+(T^(P|~E))+b[2]+718787259&4294967295,D=P+(x<<15&4294967295|x>>>17),x=E+(P^(D|~T))+b[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+P&4294967295}i.prototype.v=function(A,T){T===void 0&&(T=A.length);const E=T-this.blockSize,b=this.C;let D=this.h,P=0;for(;P<T;){if(D==0)for(;P<=E;)s(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<T;)if(b[D++]=A.charCodeAt(P++),D==this.blockSize){s(this,b),D=0;break}}else for(;P<T;)if(b[D++]=A[P++],D==this.blockSize){s(this,b),D=0;break}}this.h=D,this.o+=T},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;T=this.o*8;for(var E=A.length-8;E<A.length;++E)A[E]=T&255,T/=256;for(this.v(A),A=Array(16),T=0,E=0;E<4;++E)for(let b=0;b<32;b+=8)A[T++]=this.g[E]>>>b&255;return A};function r(A,T){var E=a;return Object.prototype.hasOwnProperty.call(E,A)?E[A]:E[A]=T(A)}function o(A,T){this.h=T;const E=[];let b=!0;for(let D=A.length-1;D>=0;D--){const P=A[D]|0;b&&P==T||(E[D]=P,b=!1)}this.g=E}var a={};function l(A){return-128<=A&&A<128?r(A,function(T){return new o([T|0],T<0?-1:0)}):new o([A|0],A<0?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return m;if(A<0)return V(u(-A));const T=[];let E=1;for(let b=0;A>=E;b++)T[b]=A/E|0,E*=4294967296;return new o(T,0)}function h(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return V(h(A.substring(1),T));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(T,8));let b=m;for(let P=0;P<A.length;P+=8){var D=Math.min(8,A.length-P);const x=parseInt(A.substring(P,P+D),T);D<8?(D=u(Math.pow(T,D)),b=b.j(D).add(u(x))):(b=b.j(E),b=b.add(u(x)))}return b}var m=l(0),p=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-V(this).m();let A=0,T=1;for(let E=0;E<this.g.length;E++){const b=this.i(E);A+=(b>=0?b:4294967296+b)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(N(this))return"-"+V(this).toString(A);const T=u(Math.pow(A,6));var E=this;let b="";for(;;){const D=M(E,T).g;E=I(E,D.j(T));let P=((E.g.length>0?E.g[0]:E.h)>>>0).toString(A);if(E=D,w(E))return P+b;for(;P.length<6;)P="0"+P;b=P+b}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function N(A){return A.h==-1}t.l=function(A){return A=I(this,A),N(A)?-1:w(A)?0:1};function V(A){const T=A.g.length,E=[];for(let b=0;b<T;b++)E[b]=~A.g[b];return new o(E,~A.h).add(p)}t.abs=function(){return N(this)?V(this):this},t.add=function(A){const T=Math.max(this.g.length,A.g.length),E=[];let b=0;for(let D=0;D<=T;D++){let P=b+(this.i(D)&65535)+(A.i(D)&65535),x=(P>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);b=x>>>16,P&=65535,x&=65535,E[D]=x<<16|P}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(A,T){return A.add(V(T))}t.j=function(A){if(w(this)||w(A))return m;if(N(this))return N(A)?V(this).j(V(A)):V(V(this).j(A));if(N(A))return V(this.j(V(A)));if(this.l(v)<0&&A.l(v)<0)return u(this.m()*A.m());const T=this.g.length+A.g.length,E=[];for(var b=0;b<2*T;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(let D=0;D<A.g.length;D++){const P=this.i(b)>>>16,x=this.i(b)&65535,xe=A.i(D)>>>16,Ne=A.i(D)&65535;E[2*b+2*D]+=x*Ne,S(E,2*b+2*D),E[2*b+2*D+1]+=P*Ne,S(E,2*b+2*D+1),E[2*b+2*D+1]+=x*xe,S(E,2*b+2*D+1),E[2*b+2*D+2]+=P*xe,S(E,2*b+2*D+2)}for(A=0;A<T;A++)E[A]=E[2*A+1]<<16|E[2*A];for(A=T;A<2*T;A++)E[A]=0;return new o(E,0)};function S(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function R(A,T){this.g=A,this.h=T}function M(A,T){if(w(T))throw Error("division by zero");if(w(A))return new R(m,m);if(N(A))return T=M(V(A),T),new R(V(T.g),V(T.h));if(N(T))return T=M(A,V(T)),new R(V(T.g),T.h);if(A.g.length>30){if(N(A)||N(T))throw Error("slowDivide_ only works with positive integers.");for(var E=p,b=T;b.l(A)<=0;)E=U(E),b=U(b);var D=O(E,1),P=O(b,1);for(b=O(b,2),E=O(E,2);!w(b);){var x=P.add(b);x.l(A)<=0&&(D=D.add(E),P=x),b=O(b,1),E=O(E,1)}return T=I(A,D.j(T)),new R(D,T)}for(D=m;A.l(T)>=0;){for(E=Math.max(1,Math.floor(A.m()/T.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),P=u(E),x=P.j(T);N(x)||x.l(A)>0;)E-=b,P=u(E),x=P.j(T);w(P)&&(P=p),D=D.add(P),A=I(A,x)}return new R(D,A)}t.B=function(A){return M(this,A).h},t.and=function(A){const T=Math.max(this.g.length,A.g.length),E=[];for(let b=0;b<T;b++)E[b]=this.i(b)&A.i(b);return new o(E,this.h&A.h)},t.or=function(A){const T=Math.max(this.g.length,A.g.length),E=[];for(let b=0;b<T;b++)E[b]=this.i(b)|A.i(b);return new o(E,this.h|A.h)},t.xor=function(A){const T=Math.max(this.g.length,A.g.length),E=[];for(let b=0;b<T;b++)E[b]=this.i(b)^A.i(b);return new o(E,this.h^A.h)};function U(A){const T=A.g.length+1,E=[];for(let b=0;b<T;b++)E[b]=A.i(b)<<1|A.i(b-1)>>>31;return new o(E,A.h)}function O(A,T){const E=T>>5;T%=32;const b=A.g.length-E,D=[];for(let P=0;P<b;P++)D[P]=T>0?A.i(P+E)>>>T|A.i(P+E+1)<<32-T:A.i(P+E);return new o(D,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,cI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,hs=o}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var Mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dI,Ua,fI,sc,Tm,hI,mI,pI;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mu=="object"&&Mu];for(var y=0;y<d.length;++y){var _=d[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(d,y){if(y)e:{var _=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var k=d[C];if(!(k in _))break e;_=_[k]}d=d[d.length-1],C=_[d],y=y(C),y!=C&&y!=null&&e(_,d,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(y){var _=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.push([C,y[C]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function l(d,y,_){return d.call.apply(d.bind,arguments)}function u(d,y,_){return u=l,u.apply(null,arguments)}function h(d,y){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function m(d,y){function _(){}_.prototype=y.prototype,d.Z=y.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(C,k,L){for(var G=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)G[ae-2]=arguments[ae];return y.prototype[k].apply(C,G)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function v(d){const y=d.length;if(y>0){const _=Array(y);for(let C=0;C<y;C++)_[C]=d[C];return _}return[]}function w(d,y){for(let C=1;C<arguments.length;C++){const k=arguments[C];var _=typeof k;if(_=_!="object"?_:k?Array.isArray(k)?"array":_:"null",_=="array"||_=="object"&&typeof k.length=="number"){_=d.length||0;const L=k.length||0;d.length=_+L;for(let G=0;G<L;G++)d[_+G]=k[G]}else d.push(k)}}class N{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(d){o.setTimeout(()=>{throw d},0)}function I(){var d=A;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class S{constructor(){this.h=this.g=null}add(y,_){const C=R.get();C.set(y,_),this.h?this.h.next=C:this.g=C,this.h=C}}var R=new N(()=>new M,d=>d.reset());class M{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let U,O=!1,A=new S,T=()=>{const d=Promise.resolve(void 0);U=()=>{d.then(E)}};function E(){for(var d;d=I();){try{d.h.call(d.g)}catch(_){V(_)}var y=R;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}O=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};o.addEventListener("test",_,y),o.removeEventListener("test",_,y)}catch{}return d}();function x(d){return/^[\s\xa0]*$/.test(d)}function xe(d,y){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}m(xe,D),xe.prototype.init=function(d,y){const _=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(_=="mouseover"?y=d.fromElement:_=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),H=0;function W(d,y,_,C,k){this.listener=d,this.proxy=null,this.src=y,this.type=_,this.capture=!!C,this.ha=k,this.key=++H,this.da=this.fa=!1}function Z(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Se(d,y,_){for(const C in d)y.call(_,d[C],C,d)}function ze(d,y){for(const _ in d)y.call(void 0,d[_],_,d)}function Sn(d){const y={};for(const _ in d)y[_]=d[_];return y}const An="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Un(d,y){let _,C;for(let k=1;k<arguments.length;k++){C=arguments[k];for(_ in C)d[_]=C[_];for(let L=0;L<An.length;L++)_=An[L],Object.prototype.hasOwnProperty.call(C,_)&&(d[_]=C[_])}}function lt(d){this.src=d,this.g={},this.h=0}lt.prototype.add=function(d,y,_,C,k){const L=d.toString();d=this.g[L],d||(d=this.g[L]=[],this.h++);const G=K(d,y,C,k);return G>-1?(y=d[G],_||(y.fa=!1)):(y=new W(y,this.src,L,!!C,k),y.fa=_,d.push(y)),y};function $t(d,y){const _=y.type;if(_ in d.g){var C=d.g[_],k=Array.prototype.indexOf.call(C,y,void 0),L;(L=k>=0)&&Array.prototype.splice.call(C,k,1),L&&(Z(y),d.g[_].length==0&&(delete d.g[_],d.h--))}}function K(d,y,_,C){for(let k=0;k<d.length;++k){const L=d[k];if(!L.da&&L.listener==y&&L.capture==!!_&&L.ha==C)return k}return-1}var j="closure_lm_"+(Math.random()*1e6|0),le={};function ue(d,y,_,C,k){if(Array.isArray(y)){for(let L=0;L<y.length;L++)ue(d,y[L],_,C,k);return null}return _=jo(_),d&&d[Ne]?d.J(y,_,a(C)?!!C.capture:!1,k):Ae(d,y,_,!1,C,k)}function Ae(d,y,_,C,k,L){if(!y)throw Error("Invalid event type");const G=a(k)?!!k.capture:!!k;let ae=Ke(d);if(ae||(d[j]=ae=new lt(d)),_=ae.add(y,_,C,G,L),_.proxy)return _;if(C=ln(),_.proxy=C,C.src=d,C.listener=_,d.addEventListener)P||(k=G),k===void 0&&(k=!1),d.addEventListener(y.toString(),C,k);else if(d.attachEvent)d.attachEvent(J(y.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ln(){function d(_){return y.call(d.src,d.listener,_)}const y=_e;return d}function Cn(d,y,_,C,k){if(Array.isArray(y))for(var L=0;L<y.length;L++)Cn(d,y[L],_,C,k);else C=a(C)?!!C.capture:!!C,_=jo(_),d&&d[Ne]?(d=d.i,L=String(y).toString(),L in d.g&&(y=d.g[L],_=K(y,_,C,k),_>-1&&(Z(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete d.g[L],d.h--)))):d&&(d=Ke(d))&&(y=d.g[y.toString()],d=-1,y&&(d=K(y,_,C,k)),(_=d>-1?y[d]:null)&&kn(_))}function kn(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Ne])$t(y.i,d);else{var _=d.type,C=d.proxy;y.removeEventListener?y.removeEventListener(_,C,d.capture):y.detachEvent?y.detachEvent(J(_),C):y.addListener&&y.removeListener&&y.removeListener(C),(_=Ke(y))?($t(_,d),_.h==0&&(_.src=null,y[j]=null)):Z(d)}}}function J(d){return d in le?le[d]:le[d]="on"+d}function _e(d,y){if(d.da)d=!0;else{y=new xe(y,this);const _=d.listener,C=d.ha||d.src;d.fa&&kn(d),d=_.call(C,y)}return d}function Ke(d){return d=d[j],d instanceof lt?d:null}var In="__closure_events_fn_"+(Math.random()*1e9>>>0);function jo(d){return typeof d=="function"?d:(d[In]||(d[In]=function(y){return d.handleEvent(y)}),d[In])}function ut(){b.call(this),this.i=new lt(this),this.M=this,this.G=null}m(ut,b),ut.prototype[Ne]=!0,ut.prototype.removeEventListener=function(d,y,_,C){Cn(this,d,y,_,C)};function Vt(d,y){var _,C=d.G;if(C)for(_=[];C;C=C.G)_.push(C);if(d=d.M,C=y.type||y,typeof y=="string")y=new D(y,d);else if(y instanceof D)y.target=y.target||d;else{var k=y;y=new D(C,d),Un(y,k)}k=!0;let L,G;if(_)for(G=_.length-1;G>=0;G--)L=y.g=_[G],k=nu(L,C,!0,y)&&k;if(L=y.g=d,k=nu(L,C,!0,y)&&k,k=nu(L,C,!1,y)&&k,_)for(G=0;G<_.length;G++)L=y.g=_[G],k=nu(L,C,!1,y)&&k}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const _=d.g[y];for(let C=0;C<_.length;C++)Z(_[C]);delete d.g[y],d.h--}}this.G=null},ut.prototype.J=function(d,y,_,C){return this.i.add(String(d),y,!1,_,C)},ut.prototype.K=function(d,y,_,C){return this.i.add(String(d),y,!0,_,C)};function nu(d,y,_,C){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let k=!0;for(let L=0;L<y.length;++L){const G=y[L];if(G&&!G.da&&G.capture==_){const ae=G.listener,ct=G.ha||G.src;G.fa&&$t(d.i,G),k=ae.call(ct,C)!==!1&&k}}return k&&!C.defaultPrevented}function pR(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(d,y||0)}function Qg(d){d.g=pR(()=>{d.g=null,d.i&&(d.i=!1,Qg(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class gR extends b{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xo(d){b.call(this),this.h=d,this.g={}}m(Xo,b);var jg=[];function Xg(d){Se(d.g,function(y,_){this.g.hasOwnProperty(_)&&kn(y)},d),d.g={}}Xo.prototype.N=function(){Xo.Z.N.call(this),Xg(this)},Xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zd=o.JSON.stringify,yR=o.JSON.parse,_R=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Wg(){}function Zg(){}var Wo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ef(){D.call(this,"d")}m(ef,D);function tf(){D.call(this,"c")}m(tf,D);var Ps={},ey=null;function iu(){return ey=ey||new ut}Ps.Ia="serverreachability";function ty(d){D.call(this,Ps.Ia,d)}m(ty,D);function Zo(d){const y=iu();Vt(y,new ty(y))}Ps.STAT_EVENT="statevent";function ny(d,y){D.call(this,Ps.STAT_EVENT,d),this.stat=y}m(ny,D);function Ut(d){const y=iu();Vt(y,new ny(y,d))}Ps.Ja="timingevent";function iy(d,y){D.call(this,Ps.Ja,d),this.size=y}m(iy,D);function ea(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},y)}function ta(){this.g=!0}ta.prototype.ua=function(){this.g=!1};function vR(d,y,_,C,k,L){d.info(function(){if(d.g)if(L){var G="",ae=L.split("&");for(let Me=0;Me<ae.length;Me++){var ct=ae[Me].split("=");if(ct.length>1){const pt=ct[0];ct=ct[1];const On=pt.split("_");G=On.length>=2&&On[1]=="type"?G+(pt+"="+ct+"&"):G+(pt+"=redacted&")}}}else G=null;else G=L;return"XMLHTTP REQ ("+C+") [attempt "+k+"]: "+y+`
`+_+`
`+G})}function TR(d,y,_,C,k,L,G){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+k+"]: "+y+`
`+_+`
`+L+" "+G})}function Er(d,y,_,C){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+SR(d,_)+(C?" "+C:"")})}function ER(d,y){d.info(function(){return"TIMEOUT: "+y})}ta.prototype.info=function(){};function SR(d,y){if(!d.g)return y;if(!y)return null;try{const L=JSON.parse(y);if(L){for(d=0;d<L.length;d++)if(Array.isArray(L[d])){var _=L[d];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var k=C[0];if(k!="noop"&&k!="stop"&&k!="close")for(let G=1;G<C.length;G++)C[G]=""}}}}return Zd(L)}catch{return y}}var su={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sy={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ry;function nf(){}m(nf,Wg),nf.prototype.g=function(){return new XMLHttpRequest},ry=new nf;function na(d){return encodeURIComponent(String(d))}function AR(d){var y=1;d=d.split(":");const _=[];for(;y>0&&d.length;)_.push(d.shift()),y--;return d.length&&_.push(d.join(":")),_}function bi(d,y,_,C){this.j=d,this.i=y,this.l=_,this.S=C||1,this.V=new Xo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oy}function oy(){this.i=null,this.g="",this.h=!1}var ay={},sf={};function rf(d,y,_){d.M=1,d.A=ou(Ln(y)),d.u=_,d.R=!0,ly(d,null)}function ly(d,y){d.F=Date.now(),ru(d),d.B=Ln(d.A);var _=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),Ey(_.i,"t",C),d.C=0,_=d.j.L,d.h=new oy,d.g=qy(d.j,_?y:null,!d.u),d.P>0&&(d.O=new gR(u(d.Y,d,d.g),d.P)),y=d.V,_=d.g,C=d.ba;var k="readystatechange";Array.isArray(k)||(k&&(jg[0]=k.toString()),k=jg);for(let L=0;L<k.length;L++){const G=ue(_,k[L],C||y.handleEvent,!1,y.h||y);if(!G)break;y.g[G.key]=G}y=d.J?Sn(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),Zo(),vR(d.i,d.v,d.B,d.l,d.S,d.u)}bi.prototype.ba=function(d){d=d.target;const y=this.O;y&&Mi(d)==3?y.j():this.Y(d)},bi.prototype.Y=function(d){try{if(d==this.g)e:{const ae=Mi(this.g),ct=this.g.ya(),Me=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||by(this.g)))){this.K||ae!=4||ct==7||(ct==8||Me<=0?Zo(3):Zo(2)),of(this);var y=this.g.ca();this.X=y;var _=CR(this);if(this.o=y==200,TR(this.i,this.v,this.B,this.l,this.S,ae,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,k=this.g;if((C=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(C)){var L=C;break t}}L=null}if(d=L)Er(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,af(this,d);else{this.o=!1,this.m=3,Ut(12),Vs(this),ia(this);break e}}if(this.R){d=!0;let pt;for(;!this.K&&this.C<_.length;)if(pt=IR(this,_),pt==sf){ae==4&&(this.m=4,Ut(14),d=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==ay){this.m=4,Ut(15),Er(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Er(this.i,this.l,pt,null),af(this,pt);if(uy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||_.length!=0||this.h.h||(this.m=1,Ut(16),d=!1),this.o=this.o&&d,!d)Er(this.i,this.l,_,"[Invalid Chunked Response]"),Vs(this),ia(this);else if(_.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),pf(G),G.P=!0,Ut(11))}}else Er(this.i,this.l,_,null),af(this,_);ae==4&&Vs(this),this.o&&!this.K&&(ae==4?Uy(this.j,this):(this.o=!1,ru(this)))}else qR(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Vs(this),ia(this)}}}catch{}finally{}};function CR(d){if(!uy(d))return d.g.la();const y=by(d.g);if(y==="")return"";let _="";const C=y.length,k=Mi(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Vs(d),ia(d),"";d.h.i=new o.TextDecoder}for(let L=0;L<C;L++)d.h.h=!0,_+=d.h.i.decode(y[L],{stream:!(k&&L==C-1)});return y.length=0,d.h.g+=_,d.C=0,d.h.g}function uy(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function IR(d,y){var _=d.C,C=y.indexOf(`
`,_);return C==-1?sf:(_=Number(y.substring(_,C)),isNaN(_)?ay:(C+=1,C+_>y.length?sf:(y=y.slice(C,C+_),d.C=C+_,y)))}bi.prototype.cancel=function(){this.K=!0,Vs(this)};function ru(d){d.T=Date.now()+d.H,cy(d,d.H)}function cy(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ea(u(d.aa,d),y)}function of(d){d.D&&(o.clearTimeout(d.D),d.D=null)}bi.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(ER(this.i,this.B),this.M!=2&&(Zo(),Ut(17)),Vs(this),this.m=2,ia(this)):cy(this,this.T-d)};function ia(d){d.j.I==0||d.K||Uy(d.j,d)}function Vs(d){of(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,Xg(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function af(d,y){try{var _=d.j;if(_.I!=0&&(_.g==d||lf(_.h,d))){if(!d.L&&lf(_.h,d)&&_.I==3){try{var C=_.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var k=C;if(k[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)du(_),uu(_);else break e;mf(_),Ut(18)}}else _.xa=k[1],0<_.xa-_.K&&k[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ea(u(_.Va,_),6e3));hy(_.h)<=1&&_.ta&&(_.ta=void 0)}else ks(_,11)}else if((d.L||_.g==d)&&du(_),!x(y))for(k=_.Ba.g.parse(y),y=0;y<k.length;y++){let Me=k[y];const pt=Me[0];if(!(pt<=_.K))if(_.K=pt,Me=Me[1],_.I==2)if(Me[0]=="c"){_.M=Me[1],_.ba=Me[2];const On=Me[3];On!=null&&(_.ka=On,_.j.info("VER="+_.ka));const Ls=Me[4];Ls!=null&&(_.za=Ls,_.j.info("SVER="+_.za));const Di=Me[5];Di!=null&&typeof Di=="number"&&Di>0&&(C=1.5*Di,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const Pi=d.g;if(Pi){const hu=Pi.g?Pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hu){var L=C.h;L.g||hu.indexOf("spdy")==-1&&hu.indexOf("quic")==-1&&hu.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(uf(L,L.h),L.h=null))}if(C.G){const gf=Pi.g?Pi.g.getResponseHeader("X-HTTP-Session-Id"):null;gf&&(C.wa=gf,ke(C.J,C.G,gf))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var G=d;if(C.na=Oy(C,C.L?C.ba:null,C.W),G.L){my(C.h,G);var ae=G,ct=C.O;ct&&(ae.H=ct),ae.D&&(of(ae),ru(ae)),C.g=G}else Py(C);_.i.length>0&&cu(_)}else Me[0]!="stop"&&Me[0]!="close"||ks(_,7);else _.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?ks(_,7):hf(_):Me[0]!="noop"&&_.l&&_.l.qa(Me),_.A=0)}}Zo(4)}catch{}}var wR=class{constructor(d,y){this.g=d,this.map=y}};function dy(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fy(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function hy(d){return d.h?1:d.g?d.g.size:0}function lf(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function uf(d,y){d.g?d.g.add(y):d.h=y}function my(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}dy.prototype.cancel=function(){if(this.i=py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function py(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const _ of d.g.values())y=y.concat(_.G);return y}return v(d.i)}var gy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RR(d,y){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const C=d[_].indexOf("=");let k,L=null;C>=0?(k=d[_].substring(0,C),L=d[_].substring(C+1)):k=d[_],y(k,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function xi(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof xi?(this.l=d.l,sa(this,d.j),this.o=d.o,this.g=d.g,ra(this,d.u),this.h=d.h,cf(this,Sy(d.i)),this.m=d.m):d&&(y=String(d).match(gy))?(this.l=!1,sa(this,y[1]||"",!0),this.o=oa(y[2]||""),this.g=oa(y[3]||"",!0),ra(this,y[4]),this.h=oa(y[5]||"",!0),cf(this,y[6]||"",!0),this.m=oa(y[7]||"")):(this.l=!1,this.i=new la(null,this.l))}xi.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(aa(y,yy,!0),":");var _=this.g;return(_||y=="file")&&(d.push("//"),(y=this.o)&&d.push(aa(y,yy,!0),"@"),d.push(na(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(aa(_,_.charAt(0)=="/"?NR:xR,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",aa(_,DR)),d.join("")},xi.prototype.resolve=function(d){const y=Ln(this);let _=!!d.j;_?sa(y,d.j):_=!!d.o,_?y.o=d.o:_=!!d.g,_?y.g=d.g:_=d.u!=null;var C=d.h;if(_)ra(y,d.u);else if(_=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var k=y.h.lastIndexOf("/");k!=-1&&(C=y.h.slice(0,k+1)+C)}if(k=C,k==".."||k==".")C="";else if(k.indexOf("./")!=-1||k.indexOf("/.")!=-1){C=k.lastIndexOf("/",0)==0,k=k.split("/");const L=[];for(let G=0;G<k.length;){const ae=k[G++];ae=="."?C&&G==k.length&&L.push(""):ae==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),C&&G==k.length&&L.push("")):(L.push(ae),C=!0)}C=L.join("/")}else C=k}return _?y.h=C:_=d.i.toString()!=="",_?cf(y,Sy(d.i)):_=!!d.m,_&&(y.m=d.m),y};function Ln(d){return new xi(d)}function sa(d,y,_){d.j=_?oa(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function ra(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function cf(d,y,_){y instanceof la?(d.i=y,PR(d.i,d.l)):(_||(y=aa(y,MR)),d.i=new la(y,d.l))}function ke(d,y,_){d.i.set(y,_)}function ou(d){return ke(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function oa(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function aa(d,y,_){return typeof d=="string"?(d=encodeURI(d).replace(y,bR),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bR(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var yy=/[#\/\?@]/g,xR=/[#\?:]/g,NR=/[#\?]/g,MR=/[#\?@]/g,DR=/#/g;function la(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Us(d){d.g||(d.g=new Map,d.h=0,d.i&&RR(d.i,function(y,_){d.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}t=la.prototype,t.add=function(d,y){Us(this),this.i=null,d=Sr(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(y),this.h+=1,this};function _y(d,y){Us(d),y=Sr(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function vy(d,y){return Us(d),y=Sr(d,y),d.g.has(y)}t.forEach=function(d,y){Us(this),this.g.forEach(function(_,C){_.forEach(function(k){d.call(y,k,C,this)},this)},this)};function Ty(d,y){Us(d);let _=[];if(typeof y=="string")vy(d,y)&&(_=_.concat(d.g.get(Sr(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)_=_.concat(d[y]);return _}t.set=function(d,y){return Us(this),this.i=null,d=Sr(this,d),vy(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=Ty(this,d),d.length>0?String(d[0]):y):y};function Ey(d,y,_){_y(d,y),_.length>0&&(d.i=null,d.g.set(Sr(d,y),v(_)),d.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var _=y[C];const k=na(_);_=Ty(this,_);for(let L=0;L<_.length;L++){let G=k;_[L]!==""&&(G+="="+na(_[L])),d.push(G)}}return this.i=d.join("&")};function Sy(d){const y=new la;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function Sr(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function PR(d,y){y&&!d.j&&(Us(d),d.i=null,d.g.forEach(function(_,C){const k=C.toLowerCase();C!=k&&(_y(this,C),Ey(this,k,_))},d)),d.j=y}function VR(d,y){const _=new ta;if(o.Image){const C=new Image;C.onload=h(Ni,_,"TestLoadImage: loaded",!0,y,C),C.onerror=h(Ni,_,"TestLoadImage: error",!1,y,C),C.onabort=h(Ni,_,"TestLoadImage: abort",!1,y,C),C.ontimeout=h(Ni,_,"TestLoadImage: timeout",!1,y,C),o.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else y(!1)}function UR(d,y){const _=new ta,C=new AbortController,k=setTimeout(()=>{C.abort(),Ni(_,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:C.signal}).then(L=>{clearTimeout(k),L.ok?Ni(_,"TestPingServer: ok",!0,y):Ni(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(k),Ni(_,"TestPingServer: error",!1,y)})}function Ni(d,y,_,C,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),C(_)}catch{}}function kR(){this.g=new _R}function df(d){this.i=d.Sb||null,this.h=d.ab||!1}m(df,Wg),df.prototype.g=function(){return new au(this.i,this.h)};function au(d,y){ut.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(au,ut),t=au.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,ca(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ay(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ay(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?ua(this):ca(this),this.readyState==3&&Ay(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,ua(this))},t.Na=function(d){this.g&&(this.response=d,ua(this))},t.ga=function(){this.g&&ua(this)};function ua(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ca(d)}t.setRequestHeader=function(d,y){this.A.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=y.next();return d.join(`\r
`)};function ca(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Cy(d){let y="";return Se(d,function(_,C){y+=C,y+=":",y+=_,y+=`\r
`}),y}function ff(d,y,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Cy(_),typeof d=="string"?_!=null&&na(_):ke(d,y,_))}function $e(d){ut.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m($e,ut);var LR=/^https?$/i,OR=["POST","PUT"];t=$e.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,y,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ry.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(L){Iy(this,L);return}if(d=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var k in C)_.set(k,C[k]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const L of C.keys())_.set(L,C.get(L));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(L=>L.toLowerCase()=="content-type"),k=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(OR,y,void 0)>=0)||C||k||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,G]of _)this.g.setRequestHeader(L,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(L){Iy(this,L)}};function Iy(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,wy(d),lu(d)}function wy(d){d.A||(d.A=!0,Vt(d,"complete"),Vt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Vt(this,"complete"),Vt(this,"abort"),lu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lu(this,!0)),$e.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ry(this):this.Xa())},t.Xa=function(){Ry(this)};function Ry(d){if(d.h&&typeof r<"u"){if(d.v&&Mi(d)==4)setTimeout(d.Ca.bind(d),0);else if(Vt(d,"readystatechange"),Mi(d)==4){d.h=!1;try{const L=d.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var C;if(C=L===0){let G=String(d.D).match(gy)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),C=!LR.test(G?G.toLowerCase():"")}_=C}if(_)Vt(d,"complete"),Vt(d,"success");else{d.o=6;try{var k=Mi(d)>2?d.g.statusText:""}catch{k=""}d.l=k+" ["+d.ca()+"]",wy(d)}}finally{lu(d)}}}}function lu(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,y||Vt(d,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Mi(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Mi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),yR(y)}};function by(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function qR(d){const y={};d=(d.g&&Mi(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(x(d[C]))continue;var _=AR(d[C]);const k=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const L=y[k]||[];y[k]=L,L.push(_)}ze(y,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(d,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||y}function xy(d){this.za=0,this.i=[],this.j=new ta,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=da("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=da("baseRetryDelayMs",5e3,d),this.Za=da("retryDelaySeedMs",1e4,d),this.Ta=da("forwardChannelMaxRetries",2,d),this.va=da("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new dy(d&&d.concurrentRequestLimit),this.Ba=new kR,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=xy.prototype,t.ka=8,t.I=1,t.connect=function(d,y,_,C){Ut(0),this.W=d,this.H=y||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=Oy(this,null,this.W),cu(this)};function hf(d){if(Ny(d),d.I==3){var y=d.V++,_=Ln(d.J);if(ke(_,"SID",d.M),ke(_,"RID",y),ke(_,"TYPE","terminate"),fa(d,_),y=new bi(d,d.j,y),y.M=2,y.A=ou(Ln(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=y.A,_=!0),_||(y.g=qy(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ru(y)}Ly(d)}function uu(d){d.g&&(pf(d),d.g.cancel(),d.g=null)}function Ny(d){uu(d),d.v&&(o.clearTimeout(d.v),d.v=null),du(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function cu(d){if(!fy(d.h)&&!d.m){d.m=!0;var y=d.Ea;U||T(),O||(U(),O=!0),A.add(y,d),d.D=0}}function BR(d,y){return hy(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ea(u(d.Ea,d,y),ky(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const k=new bi(this,this.j,d);let L=this.o;if(this.U&&(L?(L=Sn(L),Un(L,this.U)):L=this.U),this.u!==null||this.R||(k.J=L,L=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Dy(this,k,y),_=Ln(this.J),ke(_,"RID",d),ke(_,"CVER",22),this.G&&ke(_,"X-HTTP-Session-Id",this.G),fa(this,_),L&&(this.R?y="headers="+na(Cy(L))+"&"+y:this.u&&ff(_,this.u,L)),uf(this.h,k),this.Ra&&ke(_,"TYPE","init"),this.S?(ke(_,"$req",y),ke(_,"SID","null"),k.U=!0,rf(k,_,null)):rf(k,_,y),this.I=2}}else this.I==3&&(d?My(this,d):this.i.length==0||fy(this.h)||My(this))};function My(d,y){var _;y?_=y.l:_=d.V++;const C=Ln(d.J);ke(C,"SID",d.M),ke(C,"RID",_),ke(C,"AID",d.K),fa(d,C),d.u&&d.o&&ff(C,d.u,d.o),_=new bi(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),y&&(d.i=y.G.concat(d.i)),y=Dy(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),uf(d.h,_),rf(_,C,y)}function fa(d,y){d.H&&Se(d.H,function(_,C){ke(y,C,_)}),d.l&&Se({},function(_,C){ke(y,C,_)})}function Dy(d,y,_){_=Math.min(d.i.length,_);const C=d.l?u(d.l.Ka,d.l,d):null;e:{var k=d.i;let ae=-1;for(;;){const ct=["count="+_];ae==-1?_>0?(ae=k[0].g,ct.push("ofs="+ae)):ae=0:ct.push("ofs="+ae);let Me=!0;for(let pt=0;pt<_;pt++){var L=k[pt].g;const On=k[pt].map;if(L-=ae,L<0)ae=Math.max(0,k[pt].g-100),Me=!1;else try{L="req"+L+"_"||"";try{var G=On instanceof Map?On:Object.entries(On);for(const[Ls,Di]of G){let Pi=Di;a(Di)&&(Pi=Zd(Di)),ct.push(L+Ls+"="+encodeURIComponent(Pi))}}catch(Ls){throw ct.push(L+"type="+encodeURIComponent("_badmap")),Ls}}catch{C&&C(On)}}if(Me){G=ct.join("&");break e}}G=void 0}return d=d.i.splice(0,_),y.G=d,G}function Py(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;U||T(),O||(U(),O=!0),A.add(y,d),d.A=0}}function mf(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ea(u(d.Da,d),ky(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Vy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ea(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),uu(this),Vy(this))};function pf(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function Vy(d){d.g=new bi(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Ln(d.na);ke(y,"RID","rpc"),ke(y,"SID",d.M),ke(y,"AID",d.K),ke(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&ke(y,"TO",d.ia),ke(y,"TYPE","xmlhttp"),fa(d,y),d.u&&d.o&&ff(y,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=ou(Ln(y)),_.u=null,_.R=!0,ly(_,d)}t.Va=function(){this.C!=null&&(this.C=null,uu(this),mf(this),Ut(19))};function du(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Uy(d,y){var _=null;if(d.g==y){du(d),pf(d),d.g=null;var C=2}else if(lf(d.h,y))_=y.G,my(d.h,y),C=1;else return;if(d.I!=0){if(y.o)if(C==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var k=d.D;C=iu(),Vt(C,new iy(C,_)),cu(d)}else Py(d);else if(k=y.m,k==3||k==0&&y.X>0||!(C==1&&BR(d,y)||C==2&&mf(d)))switch(_&&_.length>0&&(y=d.h,y.i=y.i.concat(_)),k){case 1:ks(d,5);break;case 4:ks(d,10);break;case 3:ks(d,6);break;default:ks(d,2)}}}function ky(d,y){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*y}function ks(d,y){if(d.j.info("Error code "+y),y==2){var _=u(d.bb,d),C=d.Ua;const k=!C;C=new xi(C||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||sa(C,"https"),ou(C),k?VR(C.toString(),_):UR(C.toString(),_)}else Ut(2);d.I=0,d.l&&d.l.pa(y),Ly(d),Ny(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Ly(d){if(d.I=0,d.ja=[],d.l){const y=py(d.h);(y.length!=0||d.i.length!=0)&&(w(d.ja,y),w(d.ja,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.oa()}}function Oy(d,y,_){var C=_ instanceof xi?Ln(_):new xi(_);if(C.g!="")y&&(C.g=y+"."+C.g),ra(C,C.u);else{var k=o.location;C=k.protocol,y=y?y+"."+k.hostname:k.hostname,k=+k.port;const L=new xi(null);C&&sa(L,C),y&&(L.g=y),k&&ra(L,k),_&&(L.h=_),C=L}return _=d.G,y=d.wa,_&&y&&ke(C,_,y),ke(C,"VER",d.ka),fa(d,C),C}function qy(d,y,_){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new $e(new df({ab:_})):new $e(d.ma),y.Fa(d.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function By(){}t=By.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function fu(){}fu.prototype.g=function(d,y){return new Qt(d,y)};function Qt(d,y){ut.call(this),this.g=new xy(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!x(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Ar(this)}m(Qt,ut),Qt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){hf(this.g)},Qt.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=Zd(d),d=_);y.i.push(new wR(y.Ya++,d)),y.I==3&&cu(y)},Qt.prototype.N=function(){this.g.l=null,delete this.j,hf(this.g),delete this.g,Qt.Z.N.call(this)};function Fy(d){ef.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const _ in y){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}m(Fy,ef);function Hy(){tf.call(this),this.status=1}m(Hy,tf);function Ar(d){this.g=d}m(Ar,By),Ar.prototype.ra=function(){Vt(this.g,"a")},Ar.prototype.qa=function(d){Vt(this.g,new Fy(d))},Ar.prototype.pa=function(d){Vt(this.g,new Hy)},Ar.prototype.oa=function(){Vt(this.g,"b")},fu.prototype.createWebChannel=fu.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,pI=function(){return new fu},mI=function(){return iu()},hI=Ps,Tm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},su.NO_ERROR=0,su.TIMEOUT=8,su.HTTP_ERROR=6,sc=su,sy.COMPLETE="complete",fI=sy,Zg.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Ua=Zg,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,dI=$e}).apply(typeof Mu<"u"?Mu:typeof self<"u"?self:typeof window<"u"?window:{});const Qv="@firebase/firestore",jv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new $p("@firebase/firestore");function Mr(){return ar.logLevel}function Y(t,...e){if(ar.logLevel<=fe.DEBUG){const n=e.map(rg);ar.debug(`Firestore (${Fo}): ${t}`,...n)}}function Ai(t,...e){if(ar.logLevel<=fe.ERROR){const n=e.map(rg);ar.error(`Firestore (${Fo}): ${t}`,...n)}}function Ao(t,...e){if(ar.logLevel<=fe.WARN){const n=e.map(rg);ar.warn(`Firestore (${Fo}): ${t}`,...n)}}function rg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,gI(t,i,n)}function gI(t,e,n){let i=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ai(i),new Error(i)}function Ce(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||gI(e,s,i)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class L2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class O2{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ms,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ms)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ce(typeof i.accessToken=="string",31837,{l:i}),new yI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class q2{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B2{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new q2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const i=r=>{r.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Xv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=H2(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function he(t,e){return t<e?-1:t>e?1:0}function Em(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),r=e.charAt(i);if(s!==r)return lh(s)===lh(r)?he(s,r):lh(s)?1:-1}return he(t.length,e.length)}const G2=55296,z2=57343;function lh(t){const e=t.charCodeAt(0);return e>=G2&&e<=z2}function Co(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="__name__";class Bn{constructor(e,n,i){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&te(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=Bn.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return he(e.length,n.length)}static compareSegments(e,n){const i=Bn.isNumericId(e),s=Bn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Bn.extractNumericId(e).compare(Bn.extractNumericId(n)):Em(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class Ve extends Bn{construct(e,n,i){return new Ve(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new z(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const Y2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Bn{construct(e,n,i){return new It(e,n,i)}static isValidIdentifier(e){return Y2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wv}static keyField(){return new It([Wv])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new z(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new z(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new z(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ve.fromString(e))}static fromName(e){return new X(Ve.fromString(e).popFirst(5))}static empty(){return new X(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t,e,n){if(!n)throw new z(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function K2(t,e,n,i){if(e===!0&&i===!0)throw new z(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zv(t){if(!X.isDocumentKey(t))throw new z(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eT(t){if(X.isDocumentKey(t))throw new z(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pd(t);throw new z(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function $l(t,e){if(!vI(t))throw new z(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const o=t[i];if(s&&typeof o!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new z(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=-62135596800,nT=1e6;class Fe{static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*nT);return new Fe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tT)throw new z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nT}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($l(e,Fe._jsonSchema))return new Fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fe._jsonSchemaVersion="firestore/timestamp/1.0",Fe._jsonSchema={type:ot("string",Fe._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Fe(0,0))}static max(){return new ie(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function J2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(i===1e9?new Fe(n+1,0):new Fe(n,i));return new Ts(s,X.empty(),e)}function $2(t){return new Ts(t.readTime,t.key,Cl)}class Ts{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ts(ie.min(),X.empty(),Cl)}static max(){return new Ts(ie.max(),X.empty(),Cl)}}function Q2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==j2)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,i)=>{n(e)})}static reject(e){return new F((n,i)=>{i(e)})}static waitFor(e){return new F((n,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(e){let n=F.resolve(!1);for(const i of e)n=n.next(s=>s?F.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new F((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===r&&i(o)},h=>s(h))}})}static doWhile(e,n){return new F((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function W2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=-1;function Ud(t){return t==null}function $c(t){return t===0&&1/t==-1/0}function Z2(t){return typeof t=="number"&&Number.isInteger(t)&&!$c(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="";function eP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=iT(e)),e=tP(t.get(n),e);return iT(e)}function tP(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case TI:n+="";break;default:n+=r}}return n}function iT(t){return t+TI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Du(this.root,e,this.comparator,!1)}getReverseIterator(){return new Du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Du(this.root,e,this.comparator,!0)}}class Du{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??St.RED,this.left=s??St.EMPTY,this.right=r??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new St(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rT(this.data.getIterator())}getIteratorFrom(e){return new rT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class rT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new en([])}unionWith(e){let n=new ft(It.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new SI("Invalid base64 string: "+r):r}}(e);return new bt(n)}static fromUint8Array(e){const n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const nP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=nP.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ss(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="server_timestamp",CI="__type__",II="__previous_value__",wI="__local_write_time__";function lg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[CI])==null?void 0:i.stringValue)===AI}function kd(t){const e=t.mapValue.fields[II];return lg(e)?kd(e):e}function Il(t){const e=Es(t.mapValue.fields[wI].timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n,i,s,r,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Qc="(default)";class wl{constructor(e,n){this.projectId=e,this.database=n||Qc}static empty(){return new wl("","")}get isDefaultDatabase(){return this.database===Qc}isEqual(e){return e instanceof wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="__type__",sP="__max__",Pu={mapValue:{}},bI="__vector__",jc="value";function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lg(t)?4:oP(t)?9007199254740991:rP(t)?10:11:te(28295,{value:t})}function Wn(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Il(t).isEqual(Il(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=Es(s.timestampValue),a=Es(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Ss(s.bytesValue).isEqual(Ss(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Xe(s.geoPointValue.latitude)===Xe(r.geoPointValue.latitude)&&Xe(s.geoPointValue.longitude)===Xe(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Xe(s.integerValue)===Xe(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Xe(s.doubleValue),a=Xe(r.doubleValue);return o===a?$c(o)===$c(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Co(t.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(sT(o)!==sT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Wn(o[l],a[l])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Rl(t,e){return(t.values||[]).find(n=>Wn(n,e))!==void 0}function Io(t,e){if(t===e)return 0;const n=As(t),i=As(e);if(n!==i)return he(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=Xe(r.integerValue||r.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return oT(t.timestampValue,e.timestampValue);case 4:return oT(Il(t),Il(e));case 5:return Em(t.stringValue,e.stringValue);case 6:return function(r,o){const a=Ss(r),l=Ss(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=he(a[u],l[u]);if(h!==0)return h}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=he(Xe(r.latitude),Xe(o.latitude));return a!==0?a:he(Xe(r.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return aT(t.arrayValue,e.arrayValue);case 10:return function(r,o){var p,v,w,N;const a=r.fields||{},l=o.fields||{},u=(p=a[jc])==null?void 0:p.arrayValue,h=(v=l[jc])==null?void 0:v.arrayValue,m=he(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((N=h==null?void 0:h.values)==null?void 0:N.length)||0);return m!==0?m:aT(u,h)}(t.mapValue,e.mapValue);case 11:return function(r,o){if(r===Pu.mapValue&&o===Pu.mapValue)return 0;if(r===Pu.mapValue)return 1;if(o===Pu.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let m=0;m<l.length&&m<h.length;++m){const p=Em(l[m],h[m]);if(p!==0)return p;const v=Io(a[l[m]],u[h[m]]);if(v!==0)return v}return he(l.length,h.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function oT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Es(t),i=Es(e),s=he(n.seconds,i.seconds);return s!==0?s:he(n.nanos,i.nanos)}function aT(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Io(n[s],i[s]);if(r)return r}return he(n.length,i.length)}function wo(t){return Sm(t)}function Sm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Es(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=Sm(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${Sm(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function rc(t){switch(As(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kd(t);return e?16+rc(e):16;case 5:return 2*t.stringValue.length;case 6:return Ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+rc(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return xs(i.fields,(r,o)=>{s+=r.length+rc(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function lT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Am(t){return!!t&&"integerValue"in t}function ug(t){return!!t&&"arrayValue"in t}function uT(t){return!!t&&"nullValue"in t}function cT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oc(t){return!!t&&"mapValue"in t}function rP(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RI])==null?void 0:i.stringValue)===bI}function nl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=nl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nl(t.arrayValue.values[n]);return e}return{...t}}function oP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===sP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!oc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(n)}setAll(e){let n=It.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=nl(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());oc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];oc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){xs(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new zt(nl(this.value))}}function xI(t){const e=[];return xs(t.fields,(n,i)=>{const s=new It([n]);if(oc(i)){const r=xI(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,i,s,r,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Mt(e,0,ie.min(),ie.min(),ie.min(),zt.empty(),0)}static newFoundDocument(e,n,i,s){return new Mt(e,1,n,ie.min(),i,s,0)}static newNoDocument(e,n){return new Mt(e,2,n,ie.min(),ie.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,ie.min(),ie.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this.position=e,this.inclusive=n}}function dT(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(r.field.isKeyField()?i=X.comparator(X.fromName(o.referenceValue),n.key):i=Io(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function fT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n="asc"){this.field=e,this.dir=n}}function aP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{}class st extends NI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new uP(e,n,i):n==="array-contains"?new fP(e,i):n==="in"?new hP(e,i):n==="not-in"?new mP(e,i):n==="array-contains-any"?new pP(e,i):new st(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new cP(e,i):new dP(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Io(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(Io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends NI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Dn(e,n)}matches(e){return MI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function MI(t){return t.op==="and"}function DI(t){return lP(t)&&MI(t)}function lP(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function Cm(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+wo(t.value);if(DI(t))return t.filters.map(e=>Cm(e)).join(",");{const e=t.filters.map(n=>Cm(n)).join(",");return`${t.op}(${e})`}}function PI(t,e){return t instanceof st?function(i,s){return s instanceof st&&i.op===s.op&&i.field.isEqual(s.field)&&Wn(i.value,s.value)}(t,e):t instanceof Dn?function(i,s){return s instanceof Dn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&PI(o,s.filters[a]),!0):!1}(t,e):void te(19439)}function VI(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(VI).join(" ,")+"}"}(t):"Filter"}class uP extends st{constructor(e,n,i){super(e,n,i),this.key=X.fromName(i.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class cP extends st{constructor(e,n){super(e,"in",n),this.keys=UI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dP extends st{constructor(e,n){super(e,"not-in",n),this.keys=UI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>X.fromName(i.referenceValue))}class fP extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ug(n)&&Rl(n.arrayValue,this.value)}}class hP extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rl(this.value.arrayValue,n)}}class mP extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rl(this.value.arrayValue,n)}}class pP extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Rl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function hT(t,e=null,n=[],i=[],s=null,r=null,o=null){return new gP(t,e,n,i,s,r,o)}function cg(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Cm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Ud(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>wo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>wo(i)).join(",")),e.Te=n}return e.Te}function dg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fT(t.startAt,e.startAt)&&fT(t.endAt,e.endAt)}function Im(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yP(t,e,n,i,s,r,o,a){return new zo(t,e,n,i,s,r,o,a)}function fg(t){return new zo(t)}function mT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kI(t){return t.collectionGroup!==null}function il(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ft(It.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new bl(r,i))}),n.has(It.keyField().canonicalString())||e.Ie.push(new bl(It.keyField(),i))}return e.Ie}function $n(t){const e=se(t);return e.Ee||(e.Ee=_P(e,il(t))),e.Ee}function _P(t,e){if(t.limitType==="F")return hT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new bl(s.field,r)});const n=t.endAt?new Xc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Xc(t.startAt.position,t.startAt.inclusive):null;return hT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function wm(t,e){const n=t.filters.concat([e]);return new zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rm(t,e,n){return new zo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return dg($n(t),$n(e))&&t.limitType===e.limitType}function LI(t){return`${cg($n(t))}|lt:${t.limitType}`}function Dr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>VI(s)).join(", ")}]`),Ud(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>wo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>wo(s)).join(",")),`Target(${i})`}($n(t))}; limitType=${t.limitType})`}function Od(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):X.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of il(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,a,l){const u=dT(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,il(i),s)||i.endAt&&!function(o,a,l){const u=dT(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,il(i),s))}(t,e)}function vP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OI(t){return(e,n)=>{let i=!1;for(const s of il(t)){const r=TP(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function TP(t,e,n){const i=t.field.isKeyField()?X.comparator(e.key,n.key):function(r,o,a){const l=o.data.field(r),u=a.data.field(r);return l!==null&&u!==null?Io(l,u):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return EI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=new Je(X.comparator);function Ci(){return EP}const qI=new Je(X.comparator);function ka(...t){let e=qI;for(const n of t)e=e.insert(n.key,n);return e}function BI(t){let e=qI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function zs(){return sl()}function FI(){return sl()}function sl(){return new _r(t=>t.toString(),(t,e)=>t.isEqual(e))}const SP=new Je(X.comparator),AP=new ft(X.comparator);function me(...t){let e=AP;for(const n of t)e=e.add(n);return e}const CP=new ft(he);function IP(){return CP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(e)?"-0":e}}function HI(t){return{integerValue:""+t}}function wP(t,e){return Z2(e)?HI(e):hg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this._=void 0}}function RP(t,e,n){return t instanceof Wc?function(s,r){const o={fields:{[CI]:{stringValue:AI},[wI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&lg(r)&&(r=kd(r)),r&&(o.fields[II]=r),{mapValue:o}}(n,e):t instanceof xl?zI(t,e):t instanceof Nl?YI(t,e):function(s,r){const o=GI(s,r),a=pT(o)+pT(s.Ae);return Am(o)&&Am(s.Ae)?HI(a):hg(s.serializer,a)}(t,e)}function bP(t,e,n){return t instanceof xl?zI(t,e):t instanceof Nl?YI(t,e):n}function GI(t,e){return t instanceof Zc?function(i){return Am(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class Wc extends qd{}class xl extends qd{constructor(e){super(),this.elements=e}}function zI(t,e){const n=KI(e);for(const i of t.elements)n.some(s=>Wn(s,i))||n.push(i);return{arrayValue:{values:n}}}class Nl extends qd{constructor(e){super(),this.elements=e}}function YI(t,e){let n=KI(e);for(const i of t.elements)n=n.filter(s=>!Wn(s,i));return{arrayValue:{values:n}}}class Zc extends qd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pT(t){return Xe(t.integerValue||t.doubleValue)}function KI(t){return ug(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xP(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof xl&&s instanceof xl||i instanceof Nl&&s instanceof Nl?Co(i.elements,s.elements,Wn):i instanceof Zc&&s instanceof Zc?Wn(i.Ae,s.Ae):i instanceof Wc&&s instanceof Wc}(t.transform,e.transform)}class NP{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ac(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bd{}function JI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mg(t.key,Nn.none()):new Ql(t.key,t.data,Nn.none());{const n=t.data,i=zt.empty();let s=new ft(It.comparator);for(let r of e.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Ns(t.key,i,new en(s.toArray()),Nn.none())}}function MP(t,e,n){t instanceof Ql?function(s,r,o){const a=s.value.clone(),l=yT(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(s,r,o){if(!ac(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=yT(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll($I(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function rl(t,e,n,i){return t instanceof Ql?function(r,o,a,l){if(!ac(r.precondition,o))return a;const u=r.value.clone(),h=_T(r.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ns?function(r,o,a,l){if(!ac(r.precondition,o))return a;const u=_T(r.fieldTransforms,l,o),h=o.data;return h.setAll($I(r)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(r,o,a){return ac(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function DP(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=GI(i.transform,s||null);r!=null&&(n===null&&(n=zt.empty()),n.set(i.field,r))}return n||null}function gT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Co(i,s,(r,o)=>xP(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ql extends Bd{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ns extends Bd{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function $I(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function yT(t,e,n){const i=new Map;Ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,bP(o,a,n[s]))}return i}function _T(t,e,n){const i=new Map;for(const s of t){const r=s.transform,o=n.data.field(s.field);i.set(s.field,RP(r,o,e))}return i}class mg extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PP extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&MP(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=rl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=rl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=FI();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=JI(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ie.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(n,i)=>gT(n,i))&&Co(this.baseMutations,e.baseMutations,(n,i)=>gT(n,i))}}class pg{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Ce(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return SP}();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new pg(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,ye;function LP(t){switch(t){case q.OK:return te(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function QI(t){if(t===void 0)return Ai("GRPC error has no .code"),q.UNKNOWN;switch(t){case et.OK:return q.OK;case et.CANCELLED:return q.CANCELLED;case et.UNKNOWN:return q.UNKNOWN;case et.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case et.INTERNAL:return q.INTERNAL;case et.UNAVAILABLE:return q.UNAVAILABLE;case et.UNAUTHENTICATED:return q.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case et.NOT_FOUND:return q.NOT_FOUND;case et.ALREADY_EXISTS:return q.ALREADY_EXISTS;case et.PERMISSION_DENIED:return q.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case et.ABORTED:return q.ABORTED;case et.OUT_OF_RANGE:return q.OUT_OF_RANGE;case et.UNIMPLEMENTED:return q.UNIMPLEMENTED;case et.DATA_LOSS:return q.DATA_LOSS;default:return te(39323,{code:t})}}(ye=et||(et={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new hs([4294967295,4294967295],0);function vT(t){const e=OP().encode(t),n=new cI;return n.update(e),new Uint8Array(n.digest())}function TT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new hs([n,i],0),new hs([s,r],0)]}class gg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new La(`Invalid padding: ${n}`);if(i<0)throw new La(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new La(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hs.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(hs.fromNumber(i)));return s.compare(qP)===1&&(s=new hs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vT(e),[i,s]=TT(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);if(!this.we(o))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new gg(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=vT(e),[i,s]=TT(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);this.Se(o)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class La extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Fd(ie.min(),s,new Je(he),Ci(),me())}}class jl{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new jl(i,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class jI{constructor(e,n){this.targetId=e,this.Ce=n}}class XI{constructor(e,n,i=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class ET{constructor(){this.ve=0,this.Fe=ST(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),n=me(),i=me();return this.Fe.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:te(38017,{changeType:r})}}),new jl(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=ST()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ci(),this.Je=Vu(),this.He=Vu(),this.Ye=new Je(he)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const r=s.target;if(Im(r))if(i===0){const o=new X(r.path);this.et(n,o,Mt.newNoDocument(o,ie.min()))}else Ce(i===1,20013,{expectedCount:i});else{const o=this._t(n);if(o!==i){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let o,a;try{o=Ss(i).toUint8Array()}catch(l){if(l instanceof SI)return Ao("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new gg(o,s,r)}catch(l){return Ao(l instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.et(n,r,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((r,o)=>{const a=this.ot(o);if(a){if(r.current&&Im(a.target)){const l=new X(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Mt.newNoDocument(l,e))}r.Be&&(n.set(o,r.ke()),r.qe())}});let i=me();this.He.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.je.forEach((r,o)=>o.setReadTime(e));const s=new Fd(e,n,this.Ye,this.je,i);return this.je=Ci(),this.Je=Vu(),this.He=Vu(),this.Ye=new Je(he),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ET,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(he),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(he),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ET),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Vu(){return new Je(X.comparator)}function ST(){return new Je(X.comparator)}const FP={asc:"ASCENDING",desc:"DESCENDING"},HP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GP={and:"AND",or:"OR"};class zP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bm(t,e){return t.useProto3Json||Ud(e)?e:{value:e}}function ed(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YP(t,e){return ed(t,e.toTimestamp())}function Qn(t){return Ce(!!t,49232),ie.fromTimestamp(function(n){const i=Es(n);return new Fe(i.seconds,i.nanos)}(t))}function yg(t,e){return xm(t,e).canonicalString()}function xm(t,e){const n=function(s){return new Ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ZI(t){const e=Ve.fromString(t);return Ce(sw(e),10190,{key:e.toString()}),e}function Nm(t,e){return yg(t.databaseId,e.path)}function uh(t,e){const n=ZI(e);if(n.get(1)!==t.databaseId.projectId)throw new z(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(tw(n))}function ew(t,e){return yg(t.databaseId,e)}function KP(t){const e=ZI(t);return e.length===4?Ve.emptyPath():tw(e)}function Mm(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tw(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function AT(t,e,n){return{name:Nm(t,e),fields:n.value.mapValue.fields}}function JP(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:te(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(u,h){return u.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),bt.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?q.UNKNOWN:QI(u.code);return new z(h,u.message||"")}(o);n=new XI(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=uh(t,i.document.name),r=Qn(i.document.updateTime),o=i.document.createTime?Qn(i.document.createTime):ie.min(),a=new zt({mapValue:{fields:i.document.fields}}),l=Mt.newFoundDocument(s,r,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new lc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=uh(t,i.document),r=i.readTime?Qn(i.readTime):ie.min(),o=Mt.newNoDocument(s,r),a=i.removedTargetIds||[];n=new lc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=uh(t,i.document),r=i.removedTargetIds||[];n=new lc([],r,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new kP(s,r),a=i.targetId;n=new jI(a,o)}}return n}function $P(t,e){let n;if(e instanceof Ql)n={update:AT(t,e.key,e.value)};else if(e instanceof mg)n={delete:Nm(t,e.key)};else if(e instanceof Ns)n={update:AT(t,e.key,e.data),updateMask:iV(e.fieldMask)};else{if(!(e instanceof PP))return te(16599,{Vt:e.type});n={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof Wc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw te(20930,{transform:o.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:YP(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:te(27497)}(t,e.precondition)),n}function QP(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>function(s,r){let o=s.updateTime?Qn(s.updateTime):Qn(r);return o.isEqual(ie.min())&&(o=Qn(r)),new NP(o,s.transformResults||[])}(n,e))):[]}function jP(t,e){return{documents:[ew(t,e.path)]}}function XP(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ew(t,s);const r=function(u){if(u.length!==0)return iw(Dn.create(u,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Pr(p.field),direction:eV(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=bm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function WP(t){let e=KP(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ce(i===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let r=[];n.where&&(r=function(m){const p=nw(m);return p instanceof Dn&&DI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(w){return new bl(Vr(w.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(m){let p;return p=typeof m=="object"?m.value:m,Ud(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(m){const p=!!m.before,v=m.values||[];return new Xc(v,p)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const p=!m.before,v=m.values||[];return new Xc(v,p)}(n.endAt)),yP(e,s,o,r,a,"F",l,u)}function ZP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Vr(n.unaryFilter.field);return st.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Vr(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vr(n.unaryFilter.field);return st.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vr(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(Vr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(i=>nw(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function eV(t){return FP[t]}function tV(t){return HP[t]}function nV(t){return GP[t]}function Pr(t){return{fieldPath:t.canonicalString()}}function Vr(t){return It.fromServerFormat(t.fieldPath)}function iw(t){return t instanceof st?function(n){if(n.op==="=="){if(cT(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NAN"}};if(uT(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cT(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NOT_NAN"}};if(uT(n.value))return{unaryFilter:{field:Pr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pr(n.field),op:tV(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const i=n.getFilters().map(s=>iw(s));return i.length===1?i[0]:{compositeFilter:{op:nV(n.op),filters:i}}}(t):te(54877,{filter:t})}function iV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,i,s,r=ie.min(),o=ie.min(),a=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.yt=e}}function rV(t){const e=WP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.Cn=new aV}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ts.min())}updateCollectionGroup(e,n,i){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class aV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new ft(Ve.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ft(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rw=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(rw,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ro(0)}static cr(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="LruGarbageCollector",lV=1048576;function wT([t,e],[n,i]){const s=he(t,n);return s===0?he(e,i):s}class uV{constructor(e){this.Ir=e,this.buffer=new ft(wT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();wT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(IT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Go(n)?Y(IT,"Ignoring IndexedDB error during garbage collection: ",n):await Ho(n)}await this.Vr(3e5)})}}class dV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Vd.ce);const i=new uV(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(CT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,r,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(i=m,a=Date.now(),this.removeTargets(e,i,n))).next(m=>(r=m,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(u=Date.now(),Mr()<=fe.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${m} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:m})))}}function fV(t,e){return new dV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.changes=new _r(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&rl(i.mutation,s,en.empty(),Fe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,me()).next(()=>i))}getLocalViewOfDocuments(e,n,i=me()){const s=zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let o=ka();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=zs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,me()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,s){let r=Ci();const o=sl(),a=function(){return sl()}();return n.forEach((l,u)=>{const h=i.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Ns)?r=r.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),rl(h.mutation,u,h.mutation.getFieldMask(),Fe.now())):o.set(u.key,en.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new mV(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const i=sl();let s=new Je((o,a)=>o-a),r=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=i.get(l)||en.empty();h=a.applyToLocalView(u,h),i.set(l,h);const m=(s.get(a.batchId)||me()).add(l);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,m=FI();h.forEach(p=>{if(!r.has(p)){const v=JI(n.get(p),i.get(p));v!==null&&m.set(p,v),r=r.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):F.resolve(zs());let a=Cl,l=r;return o.next(u=>F.forEach(u,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),r.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,r)).next(()=>this.computeViews(e,l,u,me())).next(h=>({batchId:a,changes:BI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(i=>{let s=ka();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let o=ka();return this.indexManager.getCollectionParents(e,r).next(a=>F.forEach(a,l=>{const u=function(m,p){return new zo(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,u,i,s).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(o=>{r.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Mt.newInvalidDocument(h)))});let a=ka();return o.forEach((l,u)=>{const h=r.get(l);h!==void 0&&rl(h.mutation,u,en.empty(),Fe.now()),Od(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Qn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:rV(s.bundledQuery),readTime:Qn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.overlays=new Je(X.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const i=zs();return F.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.St(e,n,r)}),F.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),F.resolve()}getOverlaysForCollection(e,n,i){const s=zs(),r=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Je((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=r.get(u.largestBatchId);h===null&&(h=zs(),r=r.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=zs(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return F.resolve(a)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new UP(n,i));let r=this.qr.get(n);r===void 0&&(r=me(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Qr=new ft(gt.$r),this.Ur=new ft(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new gt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new X(new Ve([])),i=new gt(n,e),s=new gt(n,e+1),r=[];return this.Ur.forEachInRange([i,s],o=>{this.Gr(o),r.push(o.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new X(new Ve([])),i=new gt(n,e),s=new gt(n,e+1);let r=me();return this.Ur.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new gt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return X.comparator(e.key,n.key)||he(e.Yr,n.Yr)}static Kr(e,n){return he(e.Yr,n.Yr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(gt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VP(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new gt(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return F.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?ag:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new gt(n,0),s=new gt(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],o=>{const a=this.Xr(o.Yr);r.push(a)}),F.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ft(he);return n.forEach(s=>{const r=new gt(s,0),o=new gt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],a=>{i=i.add(a.Yr)})}),F.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;X.isDocumentKey(r)||(r=r.child(""));const o=new gt(new X(r),0);let a=new ft(he);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)},o),F.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return F.forEach(n.mutations,s=>{const r=new gt(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new gt(n,0),s=this.Zr.firstAfterOrEqual(i);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.ri=e,this.docs=function(){return new Je(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let i=Ci();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():Mt.newInvalidDocument(s))}),F.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Ci();const o=n.path,a=new X(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Q2($2(h),i)<=0||(s.has(h.key)||Od(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return F.resolve(r)}getAllFromCollectionGroup(e,n,i,s){te(9500)}ii(e,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new EV(this)}getSize(e){return F.resolve(this.size)}}class EV extends hV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.persistence=e,this.si=new _r(n=>cg(n),dg),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.oi=0,this._i=new _g,this.targetCount=0,this.ai=Ro.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),F.waitFor(r).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return F.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),F.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return F.resolve(i)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vd(0),this.li=!1,this.li=!0,this.hi=new _V,this.referenceDelegate=e(this),this.Pi=new SV(this),this.indexManager=new oV,this.remoteDocumentCache=function(s){return new TV(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new sV(n),this.Ii=new gV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new vV(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){Y("MemoryPersistence","Starting transaction:",e);const s=new AV(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(e,n){return F.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class AV extends X2{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Ri=new _g,this.Vi=null}static mi(e){return new vg(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),F.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,i=>{const s=X.fromPath(i);return this.gi(e,s).next(r=>{r||n.removeEntry(s,ie.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class td{constructor(e,n){this.persistence=e,this.pi=new _r(i=>eP(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=fV(this,n)}static mi(e,n){return new td(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(i,s)=>this.br(e,i,s).next(r=>r?F.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(i++,r.removeEntry(o,ie.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rc(e.data.value)),n}br(e,n,i){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=me(),s=me();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Tg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return r1()?8:W2(Pt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.ys(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ws(e,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new CV;return this.Ss(e,n,o).next(a=>{if(r.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>r.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(Mr()<=fe.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Dr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Mr()<=fe.DEBUG&&Y("QueryEngine","Query:",Dr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Mr()<=fe.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Dr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):F.resolve())}ys(e,n){if(mT(n))return F.resolve(null);let i=$n(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Rm(n,null,"F"),i=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=me(...r);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Rm(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,i,s){return mT(n)||s.isEqual(ie.min())?F.resolve(null):this.ps.getDocuments(e,i).next(r=>{const o=this.Ds(n,r);return this.Cs(n,o,i,s)?F.resolve(null):(Mr()<=fe.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Dr(n)),this.vs(e,o,n,J2(s,Cl)).next(a=>a))})}Ds(e,n){let i=new ft(OI(e));return n.forEach((s,r)=>{Od(e,r)&&(i=i.add(r))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,n,i){return Mr()<=fe.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Dr(n)),this.ps.getDocumentsMatchingQuery(e,n,Ts.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",wV=3e8;class RV{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Je(he),this.xs=new _r(r=>cg(r),dg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function bV(t,e,n,i){return new RV(t,e,n,i)}async function aw(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=me();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of r){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function xV(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const m=u.batch,p=m.keys();let v=F.resolve();return p.forEach(w=>{v=v.next(()=>h.getEntry(l,w)).next(N=>{const V=u.docVersions.get(w);Ce(V!==null,48541),N.version.compareTo(V)<0&&(m.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,m))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function lw(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function NV(t,e){const n=se(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;a.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(r,h.addedDocuments,m)));let v=p.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(bt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,i)),s=s.insert(m,v),function(N,V,I){return N.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=wV?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,v,h)&&a.push(n.Pi.updateTargetData(r,v))});let l=Ci(),u=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))}),a.push(MV(r,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!i.isEqual(ie.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next(m=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,u)).next(()=>l)}).then(r=>(n.Ms=s,r))}function MV(t,e,n){let i=me(),s=me();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let o=Ci();return n.forEach((a,l)=>{const u=r.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ie.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Y(Eg,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:s}})}function DV(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ag),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function PV(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(r=>r?(s=r,F.resolve(s)):n.Pi.allocateTargetId(i).next(o=>(s=new Wi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Dm(t,e,n){const i=se(t),s=i.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Go(o))throw o;Y(Eg,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function RT(t,e,n){const i=se(t);let s=ie.min(),r=me();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const m=se(l),p=m.xs.get(h);return p!==void 0?F.resolve(m.Ms.get(p)):m.Pi.getTargetData(u,h)}(i,o,$n(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(o,e,n?s:ie.min(),n?r:me())).next(a=>(VV(i,vP(e),a),{documents:a,Qs:r})))}function VV(t,e,n){let i=t.Os.get(e)||ie.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Os.set(e,i)}class bT{constructor(){this.activeTargetIds=IP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UV{constructor(){this.Mo=new bT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="ConnectivityMonitor";class NT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(xT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(xT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function Pm(){return Uu===null?Uu=function(){return 268435456+Math.round(2147483648*Math.random())}():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="RestConnection",LV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Qc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,r){const o=Pm(),a=this.zo(e,n.toUriEncodedString());Y(ch,`Sending RPC '${e}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,r);const{host:u}=new URL(a),h=Lo(u);return this.Jo(e,a,l,i,h).then(m=>(Y(ch,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ao(ch,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",i),m})}Ho(e,n,i,s,r,o){return this.Go(e,n,i,s,r)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}zo(e,n){const i=LV[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class BV extends OV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,r){const o=Pm();return new Promise((a,l)=>{const u=new dI;u.setWithCredentials(!0),u.listenOnce(fI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case sc.NO_ERROR:const m=u.getResponseJson();Y(xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case sc.TIMEOUT:Y(xt,`RPC '${e}' ${o} timed out`),l(new z(q.DEADLINE_EXCEEDED,"Request time out"));break;case sc.HTTP_ERROR:const p=u.getStatus();if(Y(xt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const N=function(I){const S=I.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(S)>=0?S:q.UNKNOWN}(w.status);l(new z(N,w.message))}else l(new z(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(q.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Y(xt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);Y(xt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,i,15)})}T_(e,n,i){const s=Pm(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pI(),a=mI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=r.join("");Y(xt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const m=o.createWebChannel(h,l);this.I_(m);let p=!1,v=!1;const w=new qV({Yo:V=>{v?Y(xt,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(p||(Y(xt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),Y(xt,`RPC '${e}' stream ${s} sending:`,V),m.send(V))},Zo:()=>m.close()}),N=(V,I,S)=>{V.listen(I,R=>{try{S(R)}catch(M){setTimeout(()=>{throw M},0)}})};return N(m,Ua.EventType.OPEN,()=>{v||(Y(xt,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),N(m,Ua.EventType.CLOSE,()=>{v||(v=!0,Y(xt,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(m))}),N(m,Ua.EventType.ERROR,V=>{v||(v=!0,Ao(xt,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),w.a_(new z(q.UNAVAILABLE,"The operation could not be completed")))}),N(m,Ua.EventType.MESSAGE,V=>{var I;if(!v){const S=V.data[0];Ce(!!S,16349);const R=S,M=(R==null?void 0:R.error)||((I=R[0])==null?void 0:I.error);if(M){Y(xt,`RPC '${e}' stream ${s} received error:`,M);const U=M.status;let O=function(E){const b=et[E];if(b!==void 0)return QI(b)}(U),A=M.message;O===void 0&&(O=q.INTERNAL,A="Unknown error status: "+U+" with message "+M.message),v=!0,w.a_(new z(O,A)),m.close()}else Y(xt,`RPC '${e}' stream ${s} received:`,S),w.u_(S)}}),N(a,hI.STAT_EVENT,V=>{V.stat===Tm.PROXY?Y(xt,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Tm.NOPROXY&&Y(xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function dh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t){return new zP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="PersistentStream";class cw{constructor(e,n,i,s,r,o,a,l){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new z(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(MT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(MT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FV extends cw{constructor(e,n,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JP(this.serializer,e),i=function(r){if(!("targetChange"in r))return ie.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?Qn(o.readTime):ie.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Mm(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=Im(l)?{documents:jP(r,l)}:{query:XP(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WI(r,o.resumeToken);const u=bm(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=ed(r,o.snapshotVersion.toTimestamp());const u=bm(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=ZP(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Mm(this.serializer),n.removeTarget=e,this.q_(n)}}class HV extends cw{constructor(e,n,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QP(e.writeResults,e.commitTime),i=Qn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Mm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>$P(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{}class zV extends GV{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new z(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Go(e,xm(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(q.UNKNOWN,r.toString())})}Ho(e,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,xm(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class YV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ai(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="RemoteStore";class KV{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(o=>{i.enqueueAndForget(async()=>{vr(this)&&(Y(lr,"Restarting streams for network reachability change."),await async function(l){const u=se(l);u.Ea.add(4),await Xl(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Gd(u)}(this))})}),this.Ra=new YV(i,s)}}async function Gd(t){if(vr(t))for(const e of t.da)await e(!0)}async function Xl(t){for(const e of t.da)await e(!1)}function dw(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ig(n)?Cg(n):Yo(n).O_()&&Ag(n,e))}function Sg(t,e){const n=se(t),i=Yo(n);n.Ia.delete(e),i.O_()&&fw(n,e),n.Ia.size===0&&(i.O_()?i.L_():vr(n)&&n.Ra.set("Unknown"))}function Ag(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yo(t).Y_(e)}function fw(t,e){t.Va.Ue(e),Yo(t).Z_(e)}function Cg(t){t.Va=new BP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Yo(t).start(),t.Ra.ua()}function Ig(t){return vr(t)&&!Yo(t).x_()&&t.Ia.size>0}function vr(t){return se(t).Ea.size===0}function hw(t){t.Va=void 0}async function JV(t){t.Ra.set("Online")}async function $V(t){t.Ia.forEach((e,n)=>{Ag(t,e)})}async function QV(t,e){hw(t),Ig(t)?(t.Ra.ha(e),Cg(t)):t.Ra.set("Unknown")}async function jV(t,e,n){if(t.Ra.set("Online"),e instanceof XI&&e.state===2&&e.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(i){Y(lr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await nd(t,i)}else if(e instanceof lc?t.Va.Ze(e):e instanceof jI?t.Va.st(e):t.Va.tt(e),!n.isEqual(ie.min()))try{const i=await lw(t.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=r.Ia.get(u);h&&r.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=r.Ia.get(l);if(!h)return;r.Ia.set(l,h.withResumeToken(bt.EMPTY_BYTE_STRING,h.snapshotVersion)),fw(r,l);const m=new Wi(h.target,l,u,h.sequenceNumber);Ag(r,m)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){Y(lr,"Failed to raise snapshot:",i),await nd(t,i)}}async function nd(t,e,n){if(!Go(e))throw e;t.Ea.add(1),await Xl(t),t.Ra.set("Offline"),n||(n=()=>lw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(lr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Gd(t)})}function mw(t,e){return e().catch(n=>nd(t,n,e))}async function zd(t){const e=se(t),n=Cs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ag;for(;XV(e);)try{const s=await DV(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,WV(e,s)}catch(s){await nd(e,s)}pw(e)&&gw(e)}function XV(t){return vr(t)&&t.Ta.length<10}function WV(t,e){t.Ta.push(e);const n=Cs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function pw(t){return vr(t)&&!Cs(t).x_()&&t.Ta.length>0}function gw(t){Cs(t).start()}async function ZV(t){Cs(t).ra()}async function eU(t){const e=Cs(t);for(const n of t.Ta)e.ea(n.mutations)}async function tU(t,e,n){const i=t.Ta.shift(),s=pg.from(i,e,n);await mw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zd(t)}async function nU(t,e){e&&Cs(t).X_&&await async function(i,s){if(function(o){return LP(o)&&o!==q.ABORTED}(s.code)){const r=i.Ta.shift();Cs(i).B_(),await mw(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await zd(i)}}(t,e),pw(t)&&gw(t)}async function DT(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),Y(lr,"RemoteStore received new credentials");const i=vr(n);n.Ea.add(3),await Xl(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gd(n)}async function iU(t,e){const n=se(t);e?(n.Ea.delete(2),await Gd(n)):e||(n.Ea.add(2),await Xl(n),n.Ra.set("Unknown"))}function Yo(t){return t.ma||(t.ma=function(n,i,s){const r=se(n);return r.sa(),new FV(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:JV.bind(null,t),t_:$V.bind(null,t),r_:QV.bind(null,t),H_:jV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ig(t)?Cg(t):t.Ra.set("Unknown")):(await t.ma.stop(),hw(t))})),t.ma}function Cs(t){return t.fa||(t.fa=function(n,i,s){const r=se(n);return r.sa(),new HV(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZV.bind(null,t),r_:nU.bind(null,t),ta:eU.bind(null,t),na:tU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await zd(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(lr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const o=Date.now()+i,a=new wg(e,n,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),Go(t))return new z(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{static emptySet(e){return new ro(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||X.comparator(n.key,i.key):(n,i)=>X.comparator(n.key,i.key),this.keyedMap=ka(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ro)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ro;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.ga=new Je(X.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class bo{constructor(e,n,i,s,r,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bo(e,n,ro.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class rU{constructor(){this.queries=VT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=se(n),r=s.queries;s.queries=VT(),r.forEach((o,a)=>{for(const l of a.Sa)l.onError(i)})})(this,new z(q.ABORTED,"Firestore shutting down"))}}function VT(){return new _r(t=>LI(t),Ld)}async function yw(t,e){const n=se(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new sU,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Rg(o,`Initialization of query '${Dr(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&bg(n)}async function _w(t,e){const n=se(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const o=r.Sa.indexOf(e);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function oU(t,e){const n=se(t);let i=!1;for(const s of e){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(s)&&(i=!0);o.wa=s}}i&&bg(n)}function aU(t,e,n){const i=se(t),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(e)}function bg(t){t.Ca.forEach(e=>{e.next()})}var Vm,UT;(UT=Vm||(Vm={})).Ma="default",UT.Cache="cache";class vw{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.key=e}}class Ew{constructor(e){this.key=e}}class lU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=me(),this.mutatedKeys=me(),this.eu=OI(e),this.tu=new ro(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new PT,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),v=Od(this.query,m)?m:null,w=!!p&&this.mutatedKeys.has(p.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let V=!1;p&&v?p.data.isEqual(v.data)?w!==N&&(i.track({type:3,doc:v}),V=!0):this.su(p,v)||(i.track({type:2,doc:v}),V=!0,(l&&this.eu(v,l)>0||u&&this.eu(v,u)<0)&&(a=!0)):!p&&v?(i.track({type:0,doc:v}),V=!0):p&&!v&&(i.track({type:1,doc:p}),V=!0,(l||u)&&(a=!0)),V&&(v?(o=o.add(v),r=N?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),i.track({type:1,doc:h})}return{tu:o,iu:i,Cs:a,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(v,w){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:V})}};return N(v)-N(w)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(i),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new bo(this.query,e.tu,r,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=me(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new Ew(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new Tw(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xg="SyncEngine";class uU{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class cU{constructor(e){this.key=e,this.hu=!1}}class dU{constructor(e,n,i,s,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new _r(a=>LI(a),Ld),this.Iu=new Map,this.Eu=new Set,this.du=new Je(X.comparator),this.Au=new Map,this.Ru=new _g,this.Vu={},this.mu=new Map,this.fu=Ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fU(t,e,n=!0){const i=Rw(t);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await Sw(i,e,n,!0),s}async function hU(t,e){const n=Rw(t);await Sw(n,e,!0,!1)}async function Sw(t,e,n,i){const s=await PV(t.localStore,$n(e)),r=s.targetId,o=t.sharedClientState.addLocalQueryTarget(r,n);let a;return i&&(a=await mU(t,e,r,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&dw(t.remoteStore,s),a}async function mU(t,e,n,i,s){t.pu=(m,p,v)=>async function(N,V,I,S){let R=V.view.ru(I);R.Cs&&(R=await RT(N.localStore,V.query,!1).then(({documents:A})=>V.view.ru(A,R)));const M=S&&S.targetChanges.get(V.targetId),U=S&&S.targetMismatches.get(V.targetId)!=null,O=V.view.applyChanges(R,N.isPrimaryClient,M,U);return LT(N,V.targetId,O.au),O.snapshot}(t,m,p,v);const r=await RT(t.localStore,e,!0),o=new lU(e,r.Qs),a=o.ru(r.documents),l=jl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);LT(t,n,u.au);const h=new uU(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function pU(t,e,n){const i=se(t),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(o=>!Ld(o,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Dm(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Sg(i.remoteStore,s.targetId),Um(i,s.targetId)}).catch(Ho)):(Um(i,s.targetId),await Dm(i.localStore,s.targetId,!0))}async function gU(t,e){const n=se(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Sg(n.remoteStore,i.targetId))}async function yU(t,e,n){const i=CU(t);try{const s=await function(o,a){const l=se(o),u=Fe.now(),h=a.reduce((v,w)=>v.add(w.key),me());let m,p;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Ci(),N=me();return l.Ns.getEntries(v,h).next(V=>{w=V,w.forEach((I,S)=>{S.isValidDocument()||(N=N.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,w)).next(V=>{m=V;const I=[];for(const S of a){const R=DP(S,m.get(S.key).overlayedDocument);R!=null&&I.push(new Ns(S.key,R,xI(R.value.mapValue),Nn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,I,a)}).next(V=>{p=V;const I=V.applyToLocalDocumentSet(m,N);return l.documentOverlayCache.saveOverlays(v,V.batchId,I)})}).then(()=>({batchId:p.batchId,changes:BI(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Je(he)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(i,s.batchId,n),await Wl(i,s.changes),await zd(i.remoteStore)}catch(s){const r=Rg(s,"Failed to persist write");n.reject(r)}}async function Aw(t,e){const n=se(t);try{const i=await NV(n.localStore,e);e.targetChanges.forEach((s,r)=>{const o=n.Au.get(r);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ce(o.hu,14607):s.removedDocuments.size>0&&(Ce(o.hu,42227),o.hu=!1))}),await Wl(n,i,e)}catch(i){await Ho(i)}}function kT(t,e,n){const i=se(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=se(o);l.onlineState=a;let u=!1;l.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(a)&&(u=!0)}),u&&bg(l)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _U(t,e,n){const i=se(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),r=s&&s.key;if(r){let o=new Je(X.comparator);o=o.insert(r,Mt.newNoDocument(r,ie.min()));const a=me().add(r),l=new Fd(ie.min(),new Map,new Je(he),o,a);await Aw(i,l),i.du=i.du.remove(r),i.Au.delete(e),Ng(i)}else await Dm(i.localStore,e,!1).then(()=>Um(i,e,n)).catch(Ho)}async function vU(t,e){const n=se(t),i=e.batch.batchId;try{const s=await xV(n.localStore,e);Iw(n,i,null),Cw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Wl(n,s)}catch(s){await Ho(s)}}async function TU(t,e,n){const i=se(t);try{const s=await function(o,a){const l=se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(m=>(Ce(m!==null,37113),h=m.keys(),l.mutationQueue.removeMutationBatch(u,m))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);Iw(i,e,n),Cw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Wl(i,s)}catch(s){await Ho(s)}}function Cw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Iw(t,e,n){const i=se(t);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Um(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||ww(t,i)})}function ww(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Sg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ng(t))}function LT(t,e,n){for(const i of n)i instanceof Tw?(t.Ru.addReference(i.key,e),EU(t,i)):i instanceof Ew?(Y(xg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||ww(t,i.key)):te(19791,{wu:i})}function EU(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(Y(xg,"New document in limbo: "+n),t.Eu.add(i),Ng(t))}function Ng(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(Ve.fromString(e)),i=t.fu.next();t.Au.set(i,new cU(n)),t.du=t.du.insert(n,i),dw(t.remoteStore,new Wi($n(fg(n.path)),i,"TargetPurposeLimboResolution",Vd.ce))}}async function Wl(t,e,n){const i=se(t),s=[],r=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((a,l)=>{o.push(i.pu(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const m=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(u){s.push(u);const m=Tg.As(l.targetId,u);r.push(m)}}))}),await Promise.all(o),i.Pu.H_(s),await async function(l,u){const h=se(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(u,p=>F.forEach(p.Es,v=>h.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>F.forEach(p.ds,v=>h.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!Go(m))throw m;Y(Eg,"Failed to update sequence numbers: "+m)}for(const m of u){const p=m.targetId;if(!m.fromCache){const v=h.Ms.get(p),w=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,N)}}}(i.localStore,r))}async function SU(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){Y(xg,"User change. New user:",e.toKey());const i=await aw(n.localStore,e);n.currentUser=e,function(r,o){r.mu.forEach(a=>{a.forEach(l=>{l.reject(new z(q.CANCELLED,o))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wl(n,i.Ls)}}function AU(t,e){const n=se(t),i=n.Au.get(e);if(i&&i.hu)return me().add(i.key);{let s=me();const r=n.Iu.get(e);if(!r)return s;for(const o of r){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function Rw(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Aw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_U.bind(null,e),e.Pu.H_=oU.bind(null,e.eventManager),e.Pu.yu=aU.bind(null,e.eventManager),e}function CU(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TU.bind(null,e),e}class id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bV(this.persistence,new IV,e.initialUser,this.serializer)}Cu(e){return new ow(vg.mi,this.serializer)}Du(e){return new UV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}id.provider={build:()=>new id};class IU extends id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ce(this.persistence.referenceDelegate instanceof td,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new cV(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new ow(i=>td.mi(i,n),this.serializer)}}class km{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SU.bind(null,this.syncEngine),await iU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rU}()}createDatastore(e){const n=Hd(e.databaseInfo.databaseId),i=function(r){return new BV(r)}(e.databaseInfo);return function(r,o,a,l){return new zV(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,o,a){return new KV(i,s,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>kT(this.syncEngine,n,0),function(){return NT.v()?new NT:new kV}())}createSyncEngine(e,n){return function(s,r,o,a,l,u,h){const m=new dU(s,r,o,a,l,u);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=se(s);Y(lr,"RemoteStore shutting down."),r.Ea.add(5),await Xl(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}km.provider={build:()=>new km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class wU{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Nt.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{Y(Is,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Y(Is,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Rg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function fh(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Is,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await aw(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function OT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RU(t);Y(Is,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>DT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>DT(e.remoteStore,s)),t._onlineComponents=e}async function RU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Is,"Using user provided OfflineComponentProvider");try{await fh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ao("Error using user provided cache. Falling back to memory cache: "+n),await fh(t,new id)}}else Y(Is,"Using default OfflineComponentProvider"),await fh(t,new IU(void 0));return t._offlineComponents}async function xw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Is,"Using user provided OnlineComponentProvider"),await OT(t,t._uninitializedComponentsProvider._online)):(Y(Is,"Using default OnlineComponentProvider"),await OT(t,new km))),t._onlineComponents}function bU(t){return xw(t).then(e=>e.syncEngine)}async function Lm(t){const e=await xw(t),n=e.eventManager;return n.onListen=fU.bind(null,e.syncEngine),n.onUnlisten=pU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gU.bind(null,e.syncEngine),n}function xU(t,e,n={}){const i=new ms;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,u){const h=new bw({next:p=>{h.Nu(),o.enqueueAndForget(()=>_w(r,m)),p.fromCache&&l.source==="server"?u.reject(new z(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new vw(a,h,{includeMetadataChanges:!0,qa:!0});return yw(r,m)}(await Lm(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="firestore.googleapis.com",BT=!0;class FT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mw,this.ssl=BT}else this.host=e.host,this.ssl=e.ssl??BT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lV)throw new z(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nw(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yd{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new k2;switch(i.type){case"firstParty":return new B2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=qT.get(n);i&&(Y("ComponentProvider","Removing Datastore"),qT.delete(n),i.terminate())}(this),Promise.resolve()}}function NU(t,e,n,i={}){var u;t=Jn(t,Yd);const s=Lo(e),r=t._getSettings(),o={...r,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(AC(`https://${a}`),CC("Firestore",!0)),r.host!==Mw&&r.host!==a&&Ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:s,emulatorOptions:i};if(!sr(l,o)&&(t._setSettings(l),i.mockUserToken)){let h,m;if(typeof i.mockUserToken=="string")h=i.mockUserToken,m=Nt.MOCK_USER;else{h=jN(i.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new z(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Nt(p)}t._authCredentials=new L2(new yI(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class at{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if($l(n,at._jsonSchema))return new at(e,i||null,new X(Ve.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:ot("string",at._jsonSchemaVersion),referencePath:ot("string")};class ps extends Ms{constructor(e,n,i){super(e,n,fg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new X(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function ki(t,e,...n){if(t=mt(t),_I("collection","path",e),t instanceof Yd){const i=Ve.fromString(e,...n);return eT(i),new ps(t,null,i)}{if(!(t instanceof at||t instanceof ps))throw new z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ve.fromString(e,...n));return eT(i),new ps(t.firestore,null,i)}}function qn(t,e,...n){if(t=mt(t),arguments.length===1&&(e=og.newId()),_I("doc","path",e),t instanceof Yd){const i=Ve.fromString(e,...n);return Zv(i),new at(t,null,new X(i))}{if(!(t instanceof at||t instanceof ps))throw new z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ve.fromString(e,...n));return Zv(i),new at(t.firestore,t instanceof ps?t.converter:null,new X(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="AsyncQueue";class GT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uw(this,"async_queue_retry"),this._c=()=>{const i=dh();i&&Y(HT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=dh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ms;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Go(e))throw e;Y(HT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Ai("INTERNAL UNHANDLED ERROR: ",zT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=wg.createAndSchedule(this,e,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:zT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class ur extends Yd{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new GT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new GT(e),this._firestoreClient=void 0,await e}}}function MU(t,e){const n=typeof t=="object"?t:bC(),i=typeof t=="string"?t:Qc,s=jp(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=$N("firestore");r&&NU(s,...r)}return s}function Mg(t){if(t._terminated)throw new z(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DU(t),t._firestoreClient}function DU(t){var i,s,r;const e=t._freezeSettings(),n=function(a,l,u,h){return new iP(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Nw(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new wU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gn(bt.fromBase64String(e))}catch(n){throw new z(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($l(e,gn._jsonSchema))return gn.fromBase64String(e.bytes)}}gn._jsonSchemaVersion="firestore/bytes/1.0",gn._jsonSchema={type:ot("string",gn._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jn._jsonSchemaVersion}}static fromJSON(e){if($l(e,jn._jsonSchema))return new jn(e.latitude,e.longitude)}}jn._jsonSchemaVersion="firestore/geoPoint/1.0",jn._jsonSchema={type:ot("string",jn._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($l(e,Xn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Xn(e.vectorValues);throw new z(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xn._jsonSchemaVersion="firestore/vectorValue/1.0",Xn._jsonSchema={type:ot("string",Xn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=/^__.*__$/;class VU{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class Dw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Pw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class Pg{constructor(e,n,i,s,r,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Pw(this.Ac)&&PU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class UU{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Hd(e)}Cc(e,n,i,s=!1){return new Pg({Ac:e,methodName:n,Dc:i,path:It.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vg(t){const e=t._freezeSettings(),n=Hd(t._databaseId);return new UU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kU(t,e,n,i,s,r={}){const o=t.Cc(r.merge||r.mergeFields?2:0,e,n,s);Ug("Data must be an object, but it was:",o,i);const a=Vw(i,o);let l,u;if(r.merge)l=new en(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const m of r.mergeFields){const p=Om(e,m,n);if(!o.contains(p))throw new z(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kw(h,p)||h.push(p)}l=new en(h),u=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,u=o.fieldTransforms;return new VU(new zt(a),l,u)}class Zl extends Dg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zl}}function LU(t,e,n,i){const s=t.Cc(1,e,n);Ug("Data must be an object, but it was:",s,i);const r=[],o=zt.empty();xs(i,(l,u)=>{const h=kg(e,l,n);u=mt(u);const m=s.yc(h);if(u instanceof Zl)r.push(h);else{const p=eu(u,m);p!=null&&(r.push(h),o.set(h,p))}});const a=new en(r);return new Dw(o,a,s.fieldTransforms)}function OU(t,e,n,i,s,r){const o=t.Cc(1,e,n),a=[Om(e,i,n)],l=[s];if(r.length%2!=0)throw new z(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)a.push(Om(e,r[p])),l.push(r[p+1]);const u=[],h=zt.empty();for(let p=a.length-1;p>=0;--p)if(!kw(u,a[p])){const v=a[p];let w=l[p];w=mt(w);const N=o.yc(v);if(w instanceof Zl)u.push(v);else{const V=eu(w,N);V!=null&&(u.push(v),h.set(v,V))}}const m=new en(u);return new Dw(h,m,o.fieldTransforms)}function qU(t,e,n,i=!1){return eu(n,t.Cc(i?4:3,e))}function eu(t,e){if(Uw(t=mt(t)))return Ug("Unsupported field value:",e,t),Vw(t,e);if(t instanceof Dg)return function(i,s){if(!Pw(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let l=eu(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wP(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Fe.fromDate(i);return{timestampValue:ed(s.serializer,r)}}if(i instanceof Fe){const r=new Fe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ed(s.serializer,r)}}if(i instanceof jn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof gn)return{bytesValue:WI(s.serializer,i._byteString)};if(i instanceof at){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:yg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Xn)return function(o,a){return{mapValue:{fields:{[RI]:{stringValue:bI},[jc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return hg(a.serializer,u)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${Pd(i)}`)}(t,e)}function Vw(t,e){const n={};return EI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(t,(i,s)=>{const r=eu(s,e.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function Uw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof jn||t instanceof gn||t instanceof at||t instanceof Dg||t instanceof Xn)}function Ug(t,e,n){if(!Uw(n)||!vI(n)){const i=Pd(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Om(t,e,n){if((e=mt(e))instanceof Kd)return e._internalPath;if(typeof e=="string")return kg(t,e);throw sd("Field path arguments must be of type string or ",t,!1,void 0,n)}const BU=new RegExp("[~\\*/\\[\\]]");function kg(t,e,n){if(e.search(BU)>=0)throw sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kd(...e.split("."))._internalPath}catch{throw sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sd(t,e,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new z(q.INVALID_ARGUMENT,a+t+l)}function kw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FU extends Lw{data(){return super.data()}}function Jd(t,e){return typeof e=="string"?kg(t,e):e instanceof Kd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}class qw extends Lg{}function wr(t,e,...n){let i=[];e instanceof Lg&&i.push(e),i=i.concat(n),function(r){const o=r.filter(l=>l instanceof Og).length,a=r.filter(l=>l instanceof $d).length;if(o>1||o>0&&a>0)throw new z(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class $d extends qw{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new $d(e,n,i)}_apply(e){const n=this._parse(e);return Bw(e._query,n),new Ms(e.firestore,e.converter,wm(e._query,n))}_parse(e){const n=Vg(e.firestore);return function(r,o,a,l,u,h,m){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){$T(m,h);const w=[];for(const N of m)w.push(JT(l,r,N));p={arrayValue:{values:w}}}else p=JT(l,r,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||$T(m,h),p=qU(a,o,m,h==="in"||h==="not-in");return st.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ku(t,e,n){const i=e,s=Jd("where",t);return $d._create(s,i,n)}class Og extends Lg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Og(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let o=s;const a=r.getFlattenedFilters();for(const l of a)Bw(o,l),o=wm(o,l)}(e._query,n),new Ms(e.firestore,e.converter,wm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qg extends qw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new qg(e,n)}_apply(e){const n=function(s,r,o){if(s.startAt!==null)throw new z(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bl(r,o)}(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,function(s,r){const o=s.explicitOrderBy.concat([r]);return new zo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function KT(t,e="asc"){const n=e,i=Jd("orderBy",t);return qg._create(i,n)}function JT(t,e,n){if(typeof(n=mt(n))=="string"){if(n==="")throw new z(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kI(e)&&n.indexOf("/")!==-1)throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ve.fromString(n));if(!X.isDocumentKey(i))throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return lT(t,new X(i))}if(n instanceof at)return lT(t,n._key);throw new z(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pd(n)}.`)}function $T(t,e){if(!Array.isArray(t)||t.length===0)throw new z(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bw(t,e){const n=function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HU{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return xs(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var i,s,r;const n=(r=(s=(i=e.fields)==null?void 0:i[jc].arrayValue)==null?void 0:s.values)==null?void 0:r.map(o=>Xe(o.doubleValue));return new Xn(n)}convertGeoPoint(e){return new jn(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=kd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const n=Es(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ve.fromString(e);Ce(sw(i),9688,{name:e});const s=new wl(i.get(1),i.get(3)),r=new X(i.popFirst(5));return s.isEqual(n)||Ai(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xs extends Lw{constructor(e,n,i,s,r,o){super(e,n,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Jd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xs._jsonSchema={type:ot("string",Xs._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};class uc extends Xs{data(e={}){return super.data(e)}}class Ws{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Oa(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new uc(this._firestore,this._userDataWriter,i.key,i,new Oa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new uc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Oa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new uc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Oa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:zU(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ws._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}Ws._jsonSchemaVersion="firestore/querySnapshot/1.0",Ws._jsonSchema={type:ot("string",Ws._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class Bg extends HU{constructor(e){super(),this.firestore=e}convertBytes(e){return new gn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function YU(t){t=Jn(t,Ms);const e=Jn(t.firestore,ur),n=Mg(e),i=new Bg(e);return Ow(t._query),xU(n,t._query).then(s=>new Ws(e,i,t,s))}function Ta(t,e,n,...i){t=Jn(t,at);const s=Jn(t.firestore,ur),r=Vg(s);let o;return o=typeof(e=mt(e))=="string"||e instanceof Kd?OU(r,"updateDoc",t._key,e,n,i):LU(r,"updateDoc",t._key,e),Fg(s,[o.toMutation(t._key,Nn.exists(!0))])}function Lu(t){return Fg(Jn(t.firestore,ur),[new mg(t._key,Nn.none())])}function QT(t,e){const n=Jn(t.firestore,ur),i=qn(t),s=GU(t.converter,e);return Fg(n,[kU(Vg(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Nn.exists(!1))]).then(()=>i)}function Rr(t,...e){var l,u,h;t=mt(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||YT(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(YT(e[i])){const m=e[i];e[i]=(l=m.next)==null?void 0:l.bind(m),e[i+1]=(u=m.error)==null?void 0:u.bind(m),e[i+2]=(h=m.complete)==null?void 0:h.bind(m)}let r,o,a;if(t instanceof at)o=Jn(t.firestore,ur),a=fg(t._key.path),r={next:m=>{e[i]&&e[i](KU(o,t,m))},error:e[i+1],complete:e[i+2]};else{const m=Jn(t,Ms);o=Jn(m.firestore,ur),a=m._query;const p=new Bg(o);r={next:v=>{e[i]&&e[i](new Ws(o,p,m,v))},error:e[i+1],complete:e[i+2]},Ow(t._query)}return function(p,v,w,N){const V=new bw(N),I=new vw(v,V,w);return p.asyncQueue.enqueueAndForget(async()=>yw(await Lm(p),I)),()=>{V.Nu(),p.asyncQueue.enqueueAndForget(async()=>_w(await Lm(p),I))}}(Mg(o),a,s,r)}function Fg(t,e){return function(i,s){const r=new ms;return i.asyncQueue.enqueueAndForget(async()=>yU(await bU(i),s,r)),r.promise}(Mg(t),e)}function KU(t,e,n){const i=n.docs.get(e._key),s=new Bg(t);return new Xs(t,s,e._key,i,new Oa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(){return new Zl("deleteField")}(function(e,n=!0){(function(s){Fo=s})(Oo),Eo(new rr("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new ur(new O2(i.getProvider("auth-internal")),new F2(o,i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wl(u.options.projectId,h)}(o,s),o);return r={useFetchStreams:n,...r},a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),ds(Qv,jv,e),ds(Qv,jv,"esm2020")})();var $U="firebase",QU="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds($U,QU,"app");const jU={apiKey:"AIzaSyCJsXTXTKuyJAkc4JihBZz5vtxemIRJ4V0",authDomain:"qlda-npsc.firebaseapp.com",projectId:"qlda-npsc",storageBucket:"qlda-npsc.appspot.com",messagingSenderId:"212193217563",appId:"1:212193217563:web:ebb6d95b6fa9afd42cbcbe"},Fw=RC(jU),Ea=V2(Fw),Tt=MU(Fw),yn={canManageUsers(t){return!t||typeof t.role!="string"?!1:t.role.trim().toLowerCase()==="admin"},canFetchAllUsers(t){return!t||typeof t.role!="string"?!1:t.role.trim().toLowerCase()==="admin"},canAddProject(t){if(!t||typeof t.role!="string")return!1;const e=t.role.trim().toLowerCase();return["admin","departmenthead"].includes(e)},canEditProject(t,e){if(!t||typeof t.role!="string")return!1;const n=t.role.trim().toLowerCase();return n==="admin"||n==="projectmanager"&&e.projectManagerIds.includes(t.id)},canEditPersonnel(t){if(!t||typeof t.role!="string")return!1;const e=t.role.trim().toLowerCase();return["admin","departmenthead"].includes(e)},canAddReport(t,e){if(!t||typeof t.role!="string")return!1;const n=t.role.trim().toLowerCase();return n==="projectmanager"&&e.projectManagerIds.includes(t.id)||n==="leadsupervisor"&&e.leadSupervisorIds.includes(t.id)},canEditReport(t,e){return!t||typeof t.role!="string"?!1:t.role.trim().toLowerCase()==="admin"},canReviewReport(t,e){return!t||typeof t.role!="string"?!1:t.role.trim().toLowerCase()==="projectmanager"&&e.projectManagerIds.includes(t.id)},canDeleteReport(t,e){return!t||typeof t.role!="string"?!1:t.role.trim().toLowerCase()==="admin"},canDeleteProject(t){return!t||typeof t.role!="string"?!1:t.role.trim().toLowerCase()==="admin"},canDeleteUser(t){return!t||typeof t.role!="string"?!1:t.role.trim().toLowerCase()==="admin"}},rd=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:g.jsx("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),XU=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:g.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),Hw=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:g.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),Ko=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:g.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),WU=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),ZU=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),ek=t=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:[g.jsx("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),g.jsx("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),Sa=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",...t,children:g.jsx("path",{fillRule:"evenodd",d:"M4 16.5v-13h12v13h-2.5v-6h-7v6H4zM3 2.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v14a.5.5 0 0 1-.5-.5h-13a.5.5 0 0 1-.5-.5v-14zM8.5 4a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2z",clipRule:"evenodd"})}),Aa=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",...t,children:g.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-5.5-2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10 12a5.99 5.99 0 0 0-4.793 2.39A6.483 6.483 0 0 0 10 16.5a6.483 6.483 0 0 0 4.793-2.11A5.99 5.99 0 0 0 10 12Z",clipRule:"evenodd"})}),Ca=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",...t,children:g.jsx("path",{fillRule:"evenodd",d:"M2 3.5A1.5 1.5 0 0 1 3.5 2h1.148a1.5 1.5 0 0 1 1.465 1.175l.716 3.223a1.5 1.5 0 0 1-1.052 1.767l-.933.267c-.41.117-.643.555-.48.95a11.542 11.542 0 0 0 6.254 6.254c.395.163.833-.07.95-.48l.267-.933a1.5 1.5 0 0 1 1.767-1.052l3.223.716A1.5 1.5 0 0 1 18 15.352V16.5a1.5 1.5 0 0 1-1.5 1.5h-1.528a1.5 1.5 0 0 1-1.465-1.175l-.716-3.223a1.5 1.5 0 0 1 .43-1.448l.156-.129a.75.75 0 0 0-.533-1.265l-2.62 (1.123a.75.75 0 0 0-.665.176l-.283.255a.75.75 0 0 1-1.002-.187a7.49 7.49 0 0 1-3.37-3.37.75.75 0 0 1 .188-1.002l.255-.283a.75.75 0 0 0 .176-.665l-1.123-2.62a.75.75 0 0 0-1.265-.533l-.129.156a1.5 1.5 0 0 1-1.448.43L3.675 3.675A1.5 1.5 0 0 1 2.5 2.227V3.5Z",clipRule:"evenodd"})}),jT=t=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",...t,children:[g.jsx("path",{d:"M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.25 1.25 0 0 1 .411-1.493 5.01 5.01 0 0 1 7.182 0 1.25 1.25 0 0 1 .411 1.493 5.01 5.01 0 0 1-8 0ZM15.75 16a.75.75 0 0 0 .75-.75 4.5 4.5 0 0 0-8.995- .497.75.75 0 0 0 1.49-.154 3 3 0 0 1 5.995.301.75.75 0 0 0 .75.75Z"}),g.jsx("path",{d:"M13.5 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"})]}),tk=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),nk=t=>g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:[g.jsx("path",{d:"M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3Z"}),g.jsx("path",{d:"M19 8.839l-7.77 3.885a2.75 2.75 0 01-2.46 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839Z"})]}),ik=t=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...t,children:g.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1Zm3 8V5.5a3 3 0 10-6 0V9h6Z",clipRule:"evenodd"})}),sk=({onLogin:t,error:e})=>{const[n,i]=Q.useState(""),[s,r]=Q.useState(""),[o,a]=Q.useState(!1),l=async u=>{u.preventDefault(),!(!n||!s)&&(a(!0),await t(n,s),a(!1))};return g.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white p-4",children:[g.jsx("div",{className:"w-full max-w-sm mb-8",children:g.jsx("img",{src:"https://raw.githubusercontent.com/thanhlv87/pic/refs/heads/main/npsc.png",alt:"NPSC Logo",className:"w-full h-auto"})}),g.jsx("div",{className:"w-full max-w-md bg-neutral rounded-2xl shadow-2xl overflow-hidden transition-all duration-300",children:g.jsxs("form",{className:"p-8 sm:p-10 space-y-6",onSubmit:l,children:[g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-3xl font-extrabold text-accent mb-2 tracking-tight",children:"Chào mừng trở lại"}),g.jsx("p",{className:"text-gray-500",children:"Đăng nhập để thực hiện quản lý dự án"})]}),e&&g.jsxs("div",{className:"bg-error/10 border-l-4 border-error text-error p-4 rounded-r-md",role:"alert",children:[g.jsx("p",{className:"font-bold",children:"Lỗi Đăng nhập"}),g.jsx("p",{children:e})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),g.jsxs("div",{className:"relative",children:[g.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:g.jsx(nk,{className:"h-5 w-5 text-gray-400"})}),g.jsx("input",{id:"email",type:"email",placeholder:"nhap@email.com",className:"w-full pl-10 pr-4 py-3 bg-white text-gray-900 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-shadow",value:n,onChange:u=>i(u.target.value),required:!0})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Mật khẩu"}),g.jsxs("div",{className:"relative",children:[g.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:g.jsx(ik,{className:"h-5 w-5 text-gray-400"})}),g.jsx("input",{id:"password",type:"password",placeholder:"********",className:"w-full pl-10 pr-4 py-3 bg-white text-gray-900 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-shadow",value:s,onChange:u=>r(u.target.value),required:!0})]})]}),g.jsx("div",{className:"pt-4",children:g.jsx("button",{type:"submit",className:"w-full bg-accent hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed shadow-lg hover:shadow-orange-400/50 transform hover:scale-105",disabled:o,children:o?"Đang đăng nhập...":"Đăng nhập"})})]})}),g.jsx("p",{className:"text-center text-gray-500 text-xs mt-8",children:"©2025 NPSC."})]})},rk=({user:t,onLogout:e})=>{const[n,i]=Q.useState(!1);return g.jsxs("header",{className:"bg-primary text-white shadow-md p-4 flex justify-between items-center sticky top-0 z-30",children:[g.jsx("h1",{className:"text-xl sm:text-2xl font-bold truncate",children:"Phần mềm quản lý dự án - NPSC"}),t&&g.jsxs("div",{className:"relative",children:[g.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[g.jsx("div",{children:g.jsxs("span",{className:"font-medium",children:["Chào, ",t.name," (",t.role,")"]})}),g.jsx("button",{onClick:e,className:"bg-accent hover:opacity-90 text-white font-bold py-2 px-4 rounded transition-colors",children:"Đăng xuất"})]}),g.jsx("div",{className:"sm:hidden",children:g.jsx("button",{onClick:()=>i(!n),className:"text-white focus:outline-none p-1",children:n?g.jsx(Ko,{className:"h-6 w-6"}):g.jsx(tk,{className:"h-6 w-6"})})}),n&&g.jsxs("div",{className:"sm:hidden absolute top-full right-0 mt-2 w-56 bg-white rounded-md shadow-lg py-1 z-40 ring-1 ring-black ring-opacity-5 animate-fade-in",children:[g.jsxs("div",{className:"px-4 py-3 border-b",children:[g.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:t.name}),g.jsx("p",{className:"text-xs text-gray-500",children:t.role})]}),g.jsx("a",{href:"#",onClick:s=>{s.preventDefault(),e(),i(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Đăng xuất"})]})]})]})},ok=({project:t,currentUser:e,onSelectProject:n,onDeleteProject:i})=>{const s=Q.useMemo(()=>{const r=R=>{const[M,U,O]=R.split("/").map(Number);return new Date(O,U-1,M)},o=new Date;o.setHours(0,0,0,0);const a=r(t.constructionStartDate),l=r(t.plannedAcceptanceDate);if(isNaN(a.getTime())||isNaN(l.getTime())||a>=l)return{percentage:0,statusText:"Dữ liệu ngày không hợp lệ",statusColor:"text-error",progressColor:"bg-error",borderColor:"border-error"};const u=l.getTime()-a.getTime(),h=o.getTime()-a.getTime();let m=0;u>0&&(m=Math.round(h/u*100)),m=Math.max(0,Math.min(100,m));const p=1e3*60*60*24,v=l.getTime()-o.getTime(),w=Math.ceil(v/p);let N,V="text-gray-600",I="bg-success",S="border-success";return o<a?(N="Chưa bắt đầu",m=0,I="bg-gray-400",S="border-gray-400"):w<0?(N=`Quá hạn ${Math.abs(w)} ngày`,V="text-error",I="bg-error",S="border-error"):w<=7?(N=`Còn lại ${w} ngày`,V="text-warning",I="bg-warning",S="border-warning"):N=`Còn lại ${w} ngày`,{percentage:m,statusText:N,statusColor:V,progressColor:I,borderColor:S}},[t.constructionStartDate,t.plannedAcceptanceDate]);return g.jsxs("div",{className:`bg-base-100 rounded-lg shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 cursor-pointer overflow-hidden flex flex-col group relative border-l-4 ${s.borderColor}`,onClick:()=>n(t.id),children:[yn.canDeleteProject(e)&&g.jsx("button",{onClick:r=>{r.stopPropagation(),i(t.id,t.name)},className:"absolute top-3 right-3 bg-gray-200 text-gray-600 hover:bg-error hover:text-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity z-10","aria-label":`Xóa dự án ${t.name}`,children:g.jsx(XU,{className:"h-5 w-5"})}),g.jsxs("div",{className:"p-6 flex-grow",children:[g.jsx("h3",{className:"text-xl font-bold text-primary mb-3 truncate pr-8",children:t.name}),g.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx(rd,{className:"h-5 w-5 mr-2 text-gray-500"}),g.jsxs("span",{children:["Ngày bắt đầu: ",t.constructionStartDate]})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx(rd,{className:"h-5 w-5 mr-2 text-gray-500"}),g.jsxs("span",{children:["Nghiệm thu dự kiến: ",t.plannedAcceptanceDate]})]})]}),g.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[g.jsxs("div",{className:"flex justify-between mb-1",children:[g.jsx("span",{className:`text-sm font-medium ${s.statusColor}`,children:s.statusText}),g.jsxs("span",{className:"text-sm font-medium text-secondary",children:[s.percentage,"%"]})]}),g.jsx("div",{className:"w-full bg-neutral rounded-full h-2.5",children:g.jsx("div",{className:`${s.progressColor} h-2.5 rounded-full transition-all duration-500`,style:{width:`${s.percentage}%`}})})]})]}),g.jsx("div",{className:"bg-neutral px-6 py-3 mt-auto",children:g.jsx("div",{className:"w-full text-center text-secondary font-semibold group-hover:text-accent transition-colors duration-200",children:"Xem Chi Tiết →"})})]})};var cr=(t=>(t.Admin="Admin",t.DepartmentHead="DepartmentHead",t.ProjectManager="ProjectManager",t.LeadSupervisor="LeadSupervisor",t))(cr||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ak,lk;function uk(){return{geminiUrl:ak,vertexUrl:lk}}function ck(t,e,n,i){var s,r;if(!(t!=null&&t.baseUrl)){const o=uk();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(r=o.geminiUrl)!==null&&r!==void 0?r:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tr{}function $(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function f(t,e,n){for(let r=0;r<e.length-1;r++){const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const h=l[u];f(h,e.slice(r+1),n[u])}else for(const u of l)f(u,e.slice(r+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(r+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const s=e[i];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in t){const o=t[r];return Array.isArray(o)?o.map(a=>c(a,e.slice(i+1),n)):n}else return n}else t=t[s]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hg(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dk(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=c(t,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function fk(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=c(t,["done"]);s!=null&&f(e,["done"],s);const r=c(t,["error"]);r!=null&&f(e,["error"],r);const o=c(t,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],mk(o)),e}function hk(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=c(t,["done"]);s!=null&&f(e,["done"],s);const r=c(t,["error"]);r!=null&&f(e,["error"],r);const o=c(t,["response"]);return o!=null&&f(e,["response"],pk(o)),e}function mk(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>gk(o))),f(e,["generatedVideos"],r)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&f(e,["raiMediaFilteredReasons"],s),e}function pk(t){const e={},n=c(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>yk(o))),f(e,["generatedVideos"],r)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&f(e,["raiMediaFilteredReasons"],s),e}function gk(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],Tk(n)),e}function yk(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],Ek(n)),e}function _k(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function vk(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function Tk(t){const e={},n=c(t,["video","uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["video","encodedVideo"]);i!=null&&f(e,["videoBytes"],Hg(i));const s=c(t,["encoding"]);return s!=null&&f(e,["mimeType"],s),e}function Ek(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Hg(i));const s=c(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var XT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(XT||(XT={}));var WT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(WT||(WT={}));var Zi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Zi||(Zi={}));var ZT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ZT||(ZT={}));var e0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(e0||(e0={}));var t0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(t0||(t0={}));var n0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(n0||(n0={}));var i0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(i0||(i0={}));var s0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(s0||(s0={}));var r0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(r0||(r0={}));var o0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(o0||(o0={}));var a0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(a0||(a0={}));var l0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(l0||(l0={}));var u0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(u0||(u0={}));var c0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(c0||(c0={}));var od;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(od||(od={}));var d0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(d0||(d0={}));var qm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qm||(qm={}));var f0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(f0||(f0={}));var h0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(h0||(h0={}));var m0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(m0||(m0={}));var p0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(p0||(p0={}));var g0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(g0||(g0={}));var y0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(y0||(y0={}));var _0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(_0||(_0={}));var v0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(v0||(v0={}));var T0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(T0||(T0={}));var E0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(E0||(E0={}));var S0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(S0||(S0={}));var A0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(A0||(A0={}));var C0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(C0||(C0={}));var I0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(I0||(I0={}));var w0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(w0||(w0={}));var R0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(R0||(R0={}));var b0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(b0||(b0={}));var x0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(x0||(x0={}));var N0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(N0||(N0={}));var M0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(M0||(M0={}));var D0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(D0||(D0={}));var P0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(P0||(P0={}));var V0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(V0||(V0={}));var U0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(U0||(U0={}));var k0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(k0||(k0={}));var L0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(L0||(L0={}));var O0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(O0||(O0={}));var q0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(q0||(q0={}));var B0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(B0||(B0={}));var F0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(F0||(F0={}));var $r;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})($r||($r={}));class Bm{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ia{get text(){var e,n,i,s,r,o,a,l;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const m=[];for(const p of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[v,w]of Object.entries(p))v!=="text"&&v!=="thought"&&(w!==null||w!==void 0)&&m.push(v);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;h=!0,u+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var e,n,i,s,r,o,a,l;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const m of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[p,v]of Object.entries(m))p!=="inlineData"&&(v!==null||v!==void 0)&&h.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,i,s,r,o,a,l;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,i,s,r,o,a,l,u;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,i,s,r,o,a,l,u;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class H0{}class G0{}class Sk{}class Ak{}class Ck{}class Ik{}class z0{}class Y0{}class K0{}class wk{}class ad{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new ad;let s;const r=e;return n?s=hk(r):s=fk(r),Object.assign(i,s),i}}class J0{}class $0{}class Q0{}class Rk{}class bk{}class xk{}class j0{}class Nk{get text(){var e,n,i;let s="",r=!1;const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,n,i;let s="";const r=[];for(const o of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&r.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Mk{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ve(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Gw(t,e){const n=ve(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function zw(t){return Array.isArray(t)?t.map(e=>ld(e)):[ld(t)]}function ld(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Yw(t){const e=ld(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Kw(t){const e=ld(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function X0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Jw(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>X0(e)):[X0(t)]}function Fm(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function W0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Z0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Dt(t){if(t==null)throw new Error("ContentUnion is required");return Fm(t)?t:{role:"user",parts:Jw(t)}}function Gg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Dt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Dt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Dt(n)):[Dt(e)]}function Tn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(W0(t)||Z0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Dt(t)]}const e=[],n=[],i=Fm(t[0]);for(const s of t){const r=Fm(s);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(W0(s)||Z0(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:Jw(n)}),e}function Dk(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Zi).includes(n[0].toUpperCase())?n[0].toUpperCase():Zi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Zi).includes(i.toUpperCase())?i.toUpperCase():Zi.TYPE_UNSPECIFIED})}}function oo(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&Dk(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Zi).includes(a.toUpperCase())?a.toUpperCase():Zi.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=oo(a);else if(i.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(oo(u))}e[o]=l}else if(s.includes(o)){const l={};for(const[u,h]of Object.entries(a))l[u]=oo(h);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function zg(t){return oo(t)}function Yg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Kg(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Jo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oo(e.response));return t}function $o(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Pk(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Ri(t,e){if(typeof e!="string")throw new Error("name must be a string");return Pk(t,e,"cachedContents")}function $w(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ds(t){return Hg(t)}function Vk(t){return t!=null&&typeof t=="object"&&"name"in t}function Uk(t){return t!=null&&typeof t=="object"&&"video"in t}function kk(t){return t!=null&&typeof t=="object"&&"uri"in t}function Qw(t){var e;let n;if(Vk(t)&&(n=t.name),!(kk(t)&&(n=t.uri,n===void 0))&&!(Uk(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function jw(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Xw(t){for(const e of["models","tunedModels","publisherModels"])if(Lk(t,e))return t[e];return[]}function Lk(t,e){return t!==null&&typeof t=="object"&&e in t}function Ok(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function qk(t,e={}){const n=[],i=new Set;for(const s of t){const r=s.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const o=Ok(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function Ww(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Bk(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Zw(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let r=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Qo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function eR(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fk(t){const e={},n=c(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>y4(o))),f(e,["inlinedResponses"],r)}const s=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["inlinedEmbedContentResponses"],r)}return e}function Hk(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const s=c(t,["bigqueryDestination","outputUri"]);return s!=null&&f(e,["bigqueryUri"],s),e}function Gk(t){const e={},n=c(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const s=c(t,["bigqueryUri"]);if(s!=null&&f(e,["bigqueryDestination","outputUri"],s),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function qa(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const s=c(t,["metadata","state"]);s!=null&&f(e,["state"],eR(s));const r=c(t,["metadata","createTime"]);r!=null&&f(e,["createTime"],r);const o=c(t,["metadata","endTime"]);o!=null&&f(e,["endTime"],o);const a=c(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=c(t,["metadata","model"]);l!=null&&f(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&f(e,["dest"],Fk(Zw(u))),e}function Hm(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const s=c(t,["state"]);s!=null&&f(e,["state"],eR(s));const r=c(t,["error"]);r!=null&&f(e,["error"],r);const o=c(t,["createTime"]);o!=null&&f(e,["createTime"],o);const a=c(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=c(t,["endTime"]);l!=null&&f(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&f(e,["updateTime"],u);const h=c(t,["model"]);h!=null&&f(e,["model"],h);const m=c(t,["inputConfig"]);m!=null&&f(e,["src"],zk(m));const p=c(t,["outputConfig"]);return p!=null&&f(e,["dest"],Hk(Zw(p))),e}function zk(t){const e={},n=c(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const s=c(t,["bigquerySource","inputUri"]);return s!=null&&f(e,["bigqueryUri"],s),e}function Yk(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&f(n,["fileName"],i);const s=c(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>g4(t,o))),f(n,["requests","requests"],r)}return n}function Kk(t){const e={},n=c(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const s=c(t,["bigqueryUri"]);if(s!=null&&f(e,["bigquerySource","inputUri"],s),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Jk(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function $k(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Qo(t,i)),n}function Qk(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Qo(t,i)),n}function jk(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],Xk(i));const s=c(t,["tokenCount"]);s!=null&&f(e,["tokenCount"],s);const r=c(t,["finishReason"]);r!=null&&f(e,["finishReason"],r);const o=c(t,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=c(t,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const u=c(t,["index"]);u!=null&&f(e,["index"],u);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const m=c(t,["safetyRatings"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(v=>v)),f(e,["safetyRatings"],p)}return e}function Xk(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["citations"],i)}return e}function tR(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>C4(r))),f(e,["parts"],s)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function Wk(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Zk(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const s=c(t,["dest"]);return e!==void 0&&s!=null&&f(e,["outputConfig"],Gk(Bk(s))),n}function eE(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["src"]);s!=null&&f(n,["batch","inputConfig"],Yk(t,Ww(t,s)));const r=c(e,["config"]);return r!=null&&Wk(r,n),n}function e4(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],ve(t,i));const s=c(e,["src"]);s!=null&&f(n,["inputConfig"],Kk(Ww(t,s)));const r=c(e,["config"]);return r!=null&&Zk(r,n),n}function t4(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),n}function hh(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["src"]);s!=null&&f(n,["batch","inputConfig"],l4(t,s));const r=c(e,["config"]);return r!=null&&t4(r,n),n}function n4(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Qo(t,i)),n}function i4(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Qo(t,i)),n}function s4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const s=c(t,["done"]);s!=null&&f(e,["done"],s);const r=c(t,["error"]);return r!=null&&f(e,["error"],r),e}function r4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const s=c(t,["done"]);s!=null&&f(e,["done"],s);const r=c(t,["error"]);return r!=null&&f(e,["error"],r),e}function o4(t,e){const n={},i=c(e,["contents"]);if(i!=null){let r=Gg(t,i);Array.isArray(r)&&(r=r.map(o=>o)),f(n,["requests[]","request","content"],r)}const s=c(e,["config"]);return s!=null&&f(n,["_self"],a4(s,n)),n}function a4(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const s=c(t,["title"]);e!==void 0&&s!=null&&f(e,["requests[]","title"],s);const r=c(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&f(e,["requests[]","outputDimensionality"],r),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function l4(t,e){const n={},i=c(e,["fileName"]);i!=null&&f(n,["file_name"],i);const s=c(e,["inlinedRequests"]);return s!=null&&f(n,["requests"],o4(t,s)),n}function u4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function c4(t,e,n){const i={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],tR(Dt(s)));const r=c(e,["temperature"]);r!=null&&f(i,["temperature"],r);const o=c(e,["topP"]);o!=null&&f(i,["topP"],o);const a=c(e,["topK"]);a!=null&&f(i,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const m=c(e,["responseLogprobs"]);m!=null&&f(i,["responseLogprobs"],m);const p=c(e,["logprobs"]);p!=null&&f(i,["logprobs"],p);const v=c(e,["presencePenalty"]);v!=null&&f(i,["presencePenalty"],v);const w=c(e,["frequencyPenalty"]);w!=null&&f(i,["frequencyPenalty"],w);const N=c(e,["seed"]);N!=null&&f(i,["seed"],N);const V=c(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const I=c(e,["responseSchema"]);I!=null&&f(i,["responseSchema"],zg(I));const S=c(e,["responseJsonSchema"]);if(S!=null&&f(i,["responseJsonSchema"],S),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=c(e,["safetySettings"]);if(n!==void 0&&R!=null){let P=R;Array.isArray(P)&&(P=P.map(x=>I4(x))),f(n,["safetySettings"],P)}const M=c(e,["tools"]);if(n!==void 0&&M!=null){let P=$o(M);Array.isArray(P)&&(P=P.map(x=>w4(Jo(x)))),f(n,["tools"],P)}const U=c(e,["toolConfig"]);if(n!==void 0&&U!=null&&f(n,["toolConfig"],U),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=c(e,["cachedContent"]);n!==void 0&&O!=null&&f(n,["cachedContent"],Ri(t,O));const A=c(e,["responseModalities"]);A!=null&&f(i,["responseModalities"],A);const T=c(e,["mediaResolution"]);T!=null&&f(i,["mediaResolution"],T);const E=c(e,["speechConfig"]);if(E!=null&&f(i,["speechConfig"],Yg(E)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=c(e,["thinkingConfig"]);b!=null&&f(i,["thinkingConfig"],b);const D=c(e,["imageConfig"]);return D!=null&&f(i,["imageConfig"],D),i}function d4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>jk(u))),f(e,["candidates"],l)}const s=c(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const r=c(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const o=c(t,["responseId"]);o!=null&&f(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function f4(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Qo(t,i)),n}function h4(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Qo(t,i)),n}function m4(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function p4(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function g4(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["request","model"],ve(t,i));const s=c(e,["contents"]);if(s!=null){let a=Tn(s);Array.isArray(a)&&(a=a.map(l=>tR(l))),f(n,["request","contents"],a)}const r=c(e,["metadata"]);r!=null&&f(n,["metadata"],r);const o=c(e,["config"]);return o!=null&&f(n,["request","generationConfig"],c4(t,o,c(n,["request"],{}))),n}function y4(t){const e={},n=c(t,["response"]);n!=null&&f(e,["response"],d4(n));const i=c(t,["error"]);return i!=null&&f(e,["error"],i),e}function _4(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);if(e!==void 0&&s!=null&&f(e,["_query","pageToken"],s),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function v4(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=c(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),n}function T4(t){const e={},n=c(t,["config"]);return n!=null&&_4(n,e),e}function E4(t){const e={},n=c(t,["config"]);return n!=null&&v4(n,e),e}function S4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>qa(o))),f(e,["batchJobs"],r)}return e}function A4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Hm(o))),f(e,["batchJobs"],r)}return e}function C4(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const s=c(t,["inlineData"]);s!=null&&f(e,["inlineData"],Jk(s));const r=c(t,["fileData"]);r!=null&&f(e,["fileData"],u4(r));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(t,["text"]);return m!=null&&f(e,["text"],m),e}function I4(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&f(e,["category"],n);const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function w4(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],p4(i));const s=c(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["googleMaps"]);r!=null&&f(e,["googleMaps"],m4(r));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(dr||(dr={}));class tu{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!i||Object.keys(i).length===0?o={config:{}}:typeof i=="object"?o=Object.assign({},i):o=i,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(r=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R4 extends Tr{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{var i,s;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const a=this.createInlinedEmbedContentRequest(n),l=a.path,u=a.body,h=hh(this.apiClient,n)._query||{};return this.apiClient.request({path:l,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()).then(p=>qa(p))},this.list=async(n={})=>new tu(dr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=eE(this.apiClient,e),i=n._url,s=$("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const h of l){const m=Object.assign({},h);if(m.systemInstruction){const p=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=p,m.request=v}u.push(m)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:s,body:n}}createInlinedEmbedContentRequest(e){const n=hh(this.apiClient,e),i=n._url,s=$("{model}:asyncBatchEmbedContent",i),a=n.batch.inputConfig.requests,l=a.requests,u=[];delete a.config;for(const h of l){const m=Object.assign({},h),p=m.request;for(const v in m)v!=="request"&&(p[v]=m[v],delete m[v]);u.push(m)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const r=this.getGcsUri(e),o=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${s}`;else if(o)i.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=e4(this.apiClient,e);return a=$("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Hm(h))}else{const u=eE(this.apiClient,e);return a=$("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>qa(h))}}async createEmbeddingsInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hh(this.apiClient,e);return r=$("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>qa(l))}}async get(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=h4(this.apiClient,e);return a=$("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Hm(h))}else{const u=f4(this.apiClient,e);return a=$("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>qa(h))}}async cancel(e){var n,i,s,r;let o="",a={};if(this.apiClient.isVertexAI()){const l=Qk(this.apiClient,e);o=$("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=$k(this.apiClient,e);o=$("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=E4(e);return a=$("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=A4(h),p=new j0;return Object.assign(p,m),p})}else{const u=T4(e);return a=$("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=S4(h),p=new j0;return Object.assign(p,m),p})}}async delete(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=i4(this.apiClient,e);return a=$("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>r4(h))}else{const u=n4(this.apiClient,e);return a=$("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>s4(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function tE(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Q4(r))),f(e,["parts"],s)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function x4(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const s=c(t,["expireTime"]);e!==void 0&&s!=null&&f(e,["expireTime"],s);const r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let h=Tn(o);Array.isArray(h)&&(h=h.map(m=>tE(m))),f(e,["contents"],h)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],tE(Dt(a)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>j4(m))),f(e,["tools"],h)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&f(e,["toolConfig"],u),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function N4(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const s=c(t,["expireTime"]);e!==void 0&&s!=null&&f(e,["expireTime"],s);const r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let m=Tn(o);Array.isArray(m)&&(m=m.map(p=>p)),f(e,["contents"],m)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],Dt(a));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let m=l;Array.isArray(m)&&(m=m.map(p=>X4(p))),f(e,["tools"],m)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&f(e,["toolConfig"],u);const h=c(t,["kmsKeyName"]);return e!==void 0&&h!=null&&f(e,["encryption_spec","kmsKeyName"],h),n}function M4(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],Gw(t,i));const s=c(e,["config"]);return s!=null&&x4(s,n),n}function D4(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["model"],Gw(t,i));const s=c(e,["config"]);return s!=null&&N4(s,n),n}function P4(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ri(t,i)),n}function V4(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ri(t,i)),n}function U4(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function k4(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function L4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function O4(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const s=c(t,["parameters"]);s!=null&&f(e,["parameters"],s);const r=c(t,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function q4(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ri(t,i)),n}function B4(t,e){const n={},i=c(e,["name"]);return i!=null&&f(n,["_url","name"],Ri(t,i)),n}function F4(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function H4(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function G4(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&f(e,["_query","pageToken"],s),n}function z4(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&f(e,["_query","pageToken"],s),n}function Y4(t){const e={},n=c(t,["config"]);return n!=null&&G4(n,e),e}function K4(t){const e={},n=c(t,["config"]);return n!=null&&z4(n,e),e}function J4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["cachedContents"],r)}return e}function $4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["cachedContents"],r)}return e}function Q4(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const s=c(t,["inlineData"]);s!=null&&f(e,["inlineData"],b4(s));const r=c(t,["fileData"]);r!=null&&f(e,["fileData"],L4(r));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(t,["text"]);return m!=null&&f(e,["text"],m),e}function j4(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],H4(i));const s=c(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["googleMaps"]);r!=null&&f(e,["googleMaps"],F4(r));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function X4(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>O4(p))),f(e,["functionDeclarations"],m)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=c(t,["googleSearch"]);s!=null&&f(e,["googleSearch"],s);const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function W4(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const s=c(t,["expireTime"]);return e!==void 0&&s!=null&&f(e,["expireTime"],s),n}function Z4(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const s=c(t,["expireTime"]);return e!==void 0&&s!=null&&f(e,["expireTime"],s),n}function eL(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ri(t,i));const s=c(e,["config"]);return s!=null&&W4(s,n),n}function tL(t,e){const n={},i=c(e,["name"]);i!=null&&f(n,["_url","name"],Ri(t,i));const s=c(e,["config"]);return s!=null&&Z4(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nL extends Tr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new tu(dr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=D4(this.apiClient,e);return a=$("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=M4(this.apiClient,e);return a=$("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=B4(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=q4(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=V4(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=k4(h),p=new $0;return Object.assign(p,m),p})}else{const u=P4(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=U4(h),p=new $0;return Object.assign(p,m),p})}}async update(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=tL(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const u=eL(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async listInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=K4(e);return a=$("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=$4(h),p=new Q0;return Object.assign(p,m),p})}else{const u=Y4(e);return a=$("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=J4(h),p=new Q0;return Object.assign(p,m),p})}}}function nE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qe(t){return this instanceof qe?(this.v=t,this):new qe(t)}function ao(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(v){return function(w){return Promise.resolve(w).then(v,m)}}function a(v,w){i[v]&&(s[v]=function(N){return new Promise(function(V,I){r.push([v,N,V,I])>1||l(v,N)})},w&&(s[v]=w(s[v])))}function l(v,w){try{u(i[v](w))}catch(N){p(r[0][3],N)}}function u(v){v.value instanceof qe?Promise.resolve(v.value.v).then(h,m):p(r[0][2],v)}function h(v){l("next",v)}function m(v){l("throw",v)}function p(v,w){v(w),r.shift(),r.length&&l(r[0][0],r[0][1])}}function ol(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof nE=="function"?nE(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(o){return new Promise(function(a,l){o=t[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(u){r({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iL(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:nR(n)}function nR(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function sL(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let r=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),r&&!nR(t[i])&&(r=!1),i++;r?e.push(...s):e.pop()}return e}class rL{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new oL(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class oL{constructor(e,n,i,s={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),sL(r)}async sendMessage(e){var n;await this.sendPromise;const i=Dt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,o,a;const l=await s,u=(o=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content,h=l.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];h!=null&&(p=(a=h.slice(m))!==null&&a!==void 0?a:[]);const v=u?[u]:[];this.recordHistory(i,v,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=Dt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,i)}getHistory(e=!1){const n=e?iE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return ao(this,arguments,function*(){var o,a,l,u;const h=[];try{for(var m=!0,p=ol(e),v;v=yield qe(p.next()),o=v.done,!o;m=!0){u=v.value,m=!1;const w=u;if(iL(w)){const N=(s=(i=w.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;N!==void 0&&h.push(N)}yield yield qe(w)}}catch(w){a={error:w}}finally{try{!m&&!o&&(l=p.return)&&(yield qe(l.call(p)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(r=>r.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...iE(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Qd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aL(t){const e={},n=c(t,["file"]);return n!=null&&f(e,["file"],n),e}function lL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function uL(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],Qw(n)),e}function cL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function dL(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],Qw(n)),e}function fL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);return e!==void 0&&s!=null&&f(e,["_query","pageToken"],s),n}function hL(t){const e={},n=c(t,["config"]);return n!=null&&fL(n,e),e}function mL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pL extends Tr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new tu(dr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hL(e);return r=$("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const u=mL(l),h=new Rk;return Object.assign(h,u),h})}}async createInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aL(e);return r=$("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const u=lL(l),h=new bk;return Object.assign(h,u),h})}}async get(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dL(e);return r=$("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>l)}}async delete(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uL(e);return r=$("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const u=cL(l),h=new xk;return Object.assign(h,u),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cc(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function gL(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>ML(r))),f(e,["parts"],s)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function yL(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _L(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const s=c(t,["parameters"]);s!=null&&f(e,["parameters"],s);const r=c(t,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function vL(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=c(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const s=c(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const r=c(t,["enableAffectiveDialog"]);r!=null&&f(e,["enableAffectiveDialog"],r);const o=c(t,["frequencyPenalty"]);o!=null&&f(e,["frequencyPenalty"],o);const a=c(t,["logprobs"]);a!=null&&f(e,["logprobs"],a);const l=c(t,["maxOutputTokens"]);l!=null&&f(e,["maxOutputTokens"],l);const u=c(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const h=c(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const m=c(t,["responseJsonSchema"]);m!=null&&f(e,["responseJsonSchema"],m);const p=c(t,["responseLogprobs"]);p!=null&&f(e,["responseLogprobs"],p);const v=c(t,["responseMimeType"]);v!=null&&f(e,["responseMimeType"],v);const w=c(t,["responseModalities"]);w!=null&&f(e,["responseModalities"],w);const N=c(t,["responseSchema"]);N!=null&&f(e,["responseSchema"],N);const V=c(t,["routingConfig"]);V!=null&&f(e,["routingConfig"],V);const I=c(t,["seed"]);I!=null&&f(e,["seed"],I);const S=c(t,["speechConfig"]);S!=null&&f(e,["speechConfig"],iR(S));const R=c(t,["stopSequences"]);R!=null&&f(e,["stopSequences"],R);const M=c(t,["temperature"]);M!=null&&f(e,["temperature"],M);const U=c(t,["thinkingConfig"]);U!=null&&f(e,["thinkingConfig"],U);const O=c(t,["topK"]);O!=null&&f(e,["topK"],O);const A=c(t,["topP"]);return A!=null&&f(e,["topP"],A),e}function TL(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function EL(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function SL(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","responseModalities"],s);const r=c(t,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const m=c(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],Kg(m));const p=c(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);const v=c(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],gL(Dt(w)));const N=c(t,["tools"]);if(e!==void 0&&N!=null){let O=$o(N);Array.isArray(O)&&(O=O.map(A=>PL(Jo(A)))),f(e,["setup","tools"],O)}const V=c(t,["sessionResumption"]);e!==void 0&&V!=null&&f(e,["setup","sessionResumption"],DL(V));const I=c(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","inputAudioTranscription"],I);const S=c(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&f(e,["setup","outputAudioTranscription"],S);const R=c(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),n}function AL(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],vL(i));const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","responseModalities"],s);const r=c(t,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const m=c(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],iR(Kg(m)));const p=c(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);const v=c(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],Dt(w));const N=c(t,["tools"]);if(e!==void 0&&N!=null){let O=$o(N);Array.isArray(O)&&(O=O.map(A=>VL(Jo(A)))),f(e,["setup","tools"],O)}const V=c(t,["sessionResumption"]);e!==void 0&&V!=null&&f(e,["setup","sessionResumption"],V);const I=c(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","inputAudioTranscription"],I);const S=c(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&f(e,["setup","outputAudioTranscription"],S);const R=c(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),n}function CL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],ve(t,i));const s=c(e,["config"]);return s!=null&&f(n,["config"],SL(s,n)),n}function IL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],ve(t,i));const s=c(e,["config"]);return s!=null&&f(n,["config"],AL(s,n)),n}function wL(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function RL(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["weightedPrompts"],i)}return e}function bL(t){const e={},n=c(t,["media"]);if(n!=null){let u=zw(n);Array.isArray(u)&&(u=u.map(h=>cc(h))),f(e,["mediaChunks"],u)}const i=c(t,["audio"]);i!=null&&f(e,["audio"],cc(Kw(i)));const s=c(t,["audioStreamEnd"]);s!=null&&f(e,["audioStreamEnd"],s);const r=c(t,["video"]);r!=null&&f(e,["video"],cc(Yw(r)));const o=c(t,["text"]);o!=null&&f(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function xL(t){const e={},n=c(t,["media"]);if(n!=null){let u=zw(n);Array.isArray(u)&&(u=u.map(h=>h)),f(e,["mediaChunks"],u)}const i=c(t,["audio"]);i!=null&&f(e,["audio"],Kw(i));const s=c(t,["audioStreamEnd"]);s!=null&&f(e,["audioStreamEnd"],s);const r=c(t,["video"]);r!=null&&f(e,["video"],Yw(r));const o=c(t,["text"]);o!=null&&f(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function NL(t){const e={},n=c(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const i=c(t,["serverContent"]);i!=null&&f(e,["serverContent"],i);const s=c(t,["toolCall"]);s!=null&&f(e,["toolCall"],s);const r=c(t,["toolCallCancellation"]);r!=null&&f(e,["toolCallCancellation"],r);const o=c(t,["usageMetadata"]);o!=null&&f(e,["usageMetadata"],UL(o));const a=c(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=c(t,["sessionResumptionUpdate"]);return l!=null&&f(e,["sessionResumptionUpdate"],l),e}function ML(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const s=c(t,["inlineData"]);s!=null&&f(e,["inlineData"],cc(s));const r=c(t,["fileData"]);r!=null&&f(e,["fileData"],yL(r));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(t,["text"]);return m!=null&&f(e,["text"],m),e}function DL(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iR(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],n),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function PL(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],EL(i));const s=c(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["googleMaps"]);r!=null&&f(e,["googleMaps"],TL(r));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function VL(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>_L(p))),f(e,["functionDeclarations"],m)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=c(t,["googleSearch"]);s!=null&&f(e,["googleSearch"],s);const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function UL(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const s=c(t,["candidatesTokenCount"]);s!=null&&f(e,["responseTokenCount"],s);const r=c(t,["toolUsePromptTokenCount"]);r!=null&&f(e,["toolUsePromptTokenCount"],r);const o=c(t,["thoughtsTokenCount"]);o!=null&&f(e,["thoughtsTokenCount"],o);const a=c(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=c(t,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(w=>w)),f(e,["promptTokensDetails"],v)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(w=>w)),f(e,["cacheTokensDetails"],v)}const h=c(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(w=>w)),f(e,["responseTokensDetails"],v)}const m=c(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(w=>w)),f(e,["toolUsePromptTokensDetails"],v)}const p=c(t,["trafficType"]);return p!=null&&f(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kL(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function LL(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],OL(i));const s=c(t,["tokenCount"]);s!=null&&f(e,["tokenCount"],s);const r=c(t,["finishReason"]);r!=null&&f(e,["finishReason"],r);const o=c(t,["urlContextMetadata"]);o!=null&&f(e,["urlContextMetadata"],o);const a=c(t,["avgLogprobs"]);a!=null&&f(e,["avgLogprobs"],a);const l=c(t,["groundingMetadata"]);l!=null&&f(e,["groundingMetadata"],l);const u=c(t,["index"]);u!=null&&f(e,["index"],u);const h=c(t,["logprobsResult"]);h!=null&&f(e,["logprobsResult"],h);const m=c(t,["safetyRatings"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(v=>v)),f(e,["safetyRatings"],p)}return e}function OL(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["citations"],i)}return e}function qL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["contents"]);if(s!=null){let r=Tn(s);Array.isArray(r)&&(r=r.map(o=>o)),f(n,["contents"],r)}return n}function BL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["tokensInfo"],s)}return e}function FL(t){const e={},n=c(t,["values"]);n!=null&&f(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&f(e,["statistics"],HL(i)),e}function HL(t){const e={},n=c(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function jd(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>J3(r))),f(e,["parts"],s)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function GL(t){const e={},n=c(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function zL(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function YL(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],Dt(i));const s=c(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>lR(a))),f(e,["tools"],o)}const r=c(t,["generationConfig"]);return e!==void 0&&r!=null&&f(e,["generationConfig"],V3(r)),n}function KL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["contents"]);if(s!=null){let o=Tn(s);Array.isArray(o)&&(o=o.map(a=>jd(a))),f(n,["contents"],o)}const r=c(e,["config"]);return r!=null&&zL(r),n}function JL(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["contents"]);if(s!=null){let o=Tn(s);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}const r=c(e,["config"]);return r!=null&&YL(r,n),n}function $L(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const s=c(t,["cachedContentTokenCount"]);return s!=null&&f(e,["cachedContentTokenCount"],s),e}function QL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function jL(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],ve(t,i)),n}function XL(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],ve(t,i)),n}function WL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function ZL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function e3(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const s=c(t,["negativePrompt"]);e!==void 0&&s!=null&&f(e,["parameters","negativePrompt"],s);const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const p=c(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=c(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const N=c(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","compressionQuality"],N);const V=c(t,["addWatermark"]);e!==void 0&&V!=null&&f(e,["parameters","addWatermark"],V);const I=c(t,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const S=c(t,["editMode"]);e!==void 0&&S!=null&&f(e,["parameters","editMode"],S);const R=c(t,["baseSteps"]);return e!==void 0&&R!=null&&f(e,["parameters","editConfig","baseSteps"],R),n}function t3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const r=c(e,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Z3(l))),f(n,["instances[0]","referenceImages"],a)}const o=c(e,["config"]);return o!=null&&e3(o,n),n}function n3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Xd(r))),f(e,["generatedImages"],s)}return e}function i3(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const s=c(t,["title"]);e!==void 0&&s!=null&&f(e,["requests[]","title"],s);const r=c(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&f(e,["requests[]","outputDimensionality"],r),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function s3(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const s=c(t,["title"]);e!==void 0&&s!=null&&f(e,["instances[]","title"],s);const r=c(t,["outputDimensionality"]);e!==void 0&&r!=null&&f(e,["parameters","outputDimensionality"],r);const o=c(t,["mimeType"]);e!==void 0&&o!=null&&f(e,["instances[]","mimeType"],o);const a=c(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function r3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["contents"]);if(s!=null){let a=Gg(t,s);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const r=c(e,["config"]);r!=null&&i3(r,n);const o=c(e,["model"]);return o!==void 0&&f(n,["requests[]","model"],ve(t,o)),n}function o3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["contents"]);if(s!=null){let o=Gg(t,s);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["instances[]","content"],o)}const r=c(e,["config"]);return r!=null&&s3(r,n),n}function a3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),f(e,["embeddings"],r)}const s=c(t,["metadata"]);return s!=null&&f(e,["metadata"],s),e}function l3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>FL(o))),f(e,["embeddings"],r)}const s=c(t,["metadata"]);return s!=null&&f(e,["metadata"],s),e}function u3(t){const e={},n=c(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function c3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function d3(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const s=c(t,["parameters"]);s!=null&&f(e,["parameters"],s);const r=c(t,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const o=c(t,["response"]);o!=null&&f(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function f3(t,e,n){const i={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],jd(Dt(s)));const r=c(e,["temperature"]);r!=null&&f(i,["temperature"],r);const o=c(e,["topP"]);o!=null&&f(i,["topP"],o);const a=c(e,["topK"]);a!=null&&f(i,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const m=c(e,["responseLogprobs"]);m!=null&&f(i,["responseLogprobs"],m);const p=c(e,["logprobs"]);p!=null&&f(i,["logprobs"],p);const v=c(e,["presencePenalty"]);v!=null&&f(i,["presencePenalty"],v);const w=c(e,["frequencyPenalty"]);w!=null&&f(i,["frequencyPenalty"],w);const N=c(e,["seed"]);N!=null&&f(i,["seed"],N);const V=c(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const I=c(e,["responseSchema"]);I!=null&&f(i,["responseSchema"],zg(I));const S=c(e,["responseJsonSchema"]);if(S!=null&&f(i,["responseJsonSchema"],S),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=c(e,["safetySettings"]);if(n!==void 0&&R!=null){let P=R;Array.isArray(P)&&(P=P.map(x=>eO(x))),f(n,["safetySettings"],P)}const M=c(e,["tools"]);if(n!==void 0&&M!=null){let P=$o(M);Array.isArray(P)&&(P=P.map(x=>oO(Jo(x)))),f(n,["tools"],P)}const U=c(e,["toolConfig"]);if(n!==void 0&&U!=null&&f(n,["toolConfig"],U),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=c(e,["cachedContent"]);n!==void 0&&O!=null&&f(n,["cachedContent"],Ri(t,O));const A=c(e,["responseModalities"]);A!=null&&f(i,["responseModalities"],A);const T=c(e,["mediaResolution"]);T!=null&&f(i,["mediaResolution"],T);const E=c(e,["speechConfig"]);if(E!=null&&f(i,["speechConfig"],Yg(E)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=c(e,["thinkingConfig"]);b!=null&&f(i,["thinkingConfig"],b);const D=c(e,["imageConfig"]);return D!=null&&f(i,["imageConfig"],D),i}function h3(t,e,n){const i={},s=c(e,["systemInstruction"]);n!==void 0&&s!=null&&f(n,["systemInstruction"],Dt(s));const r=c(e,["temperature"]);r!=null&&f(i,["temperature"],r);const o=c(e,["topP"]);o!=null&&f(i,["topP"],o);const a=c(e,["topK"]);a!=null&&f(i,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const m=c(e,["responseLogprobs"]);m!=null&&f(i,["responseLogprobs"],m);const p=c(e,["logprobs"]);p!=null&&f(i,["logprobs"],p);const v=c(e,["presencePenalty"]);v!=null&&f(i,["presencePenalty"],v);const w=c(e,["frequencyPenalty"]);w!=null&&f(i,["frequencyPenalty"],w);const N=c(e,["seed"]);N!=null&&f(i,["seed"],N);const V=c(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const I=c(e,["responseSchema"]);I!=null&&f(i,["responseSchema"],zg(I));const S=c(e,["responseJsonSchema"]);S!=null&&f(i,["responseJsonSchema"],S);const R=c(e,["routingConfig"]);R!=null&&f(i,["routingConfig"],R);const M=c(e,["modelSelectionConfig"]);M!=null&&f(i,["modelConfig"],M);const U=c(e,["safetySettings"]);if(n!==void 0&&U!=null){let H=U;Array.isArray(H)&&(H=H.map(W=>W)),f(n,["safetySettings"],H)}const O=c(e,["tools"]);if(n!==void 0&&O!=null){let H=$o(O);Array.isArray(H)&&(H=H.map(W=>lR(Jo(W)))),f(n,["tools"],H)}const A=c(e,["toolConfig"]);n!==void 0&&A!=null&&f(n,["toolConfig"],A);const T=c(e,["labels"]);n!==void 0&&T!=null&&f(n,["labels"],T);const E=c(e,["cachedContent"]);n!==void 0&&E!=null&&f(n,["cachedContent"],Ri(t,E));const b=c(e,["responseModalities"]);b!=null&&f(i,["responseModalities"],b);const D=c(e,["mediaResolution"]);D!=null&&f(i,["mediaResolution"],D);const P=c(e,["speechConfig"]);P!=null&&f(i,["speechConfig"],aR(Yg(P)));const x=c(e,["audioTimestamp"]);x!=null&&f(i,["audioTimestamp"],x);const xe=c(e,["thinkingConfig"]);xe!=null&&f(i,["thinkingConfig"],xe);const Ne=c(e,["imageConfig"]);return Ne!=null&&f(i,["imageConfig"],Ne),i}function sE(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["contents"]);if(s!=null){let o=Tn(s);Array.isArray(o)&&(o=o.map(a=>jd(a))),f(n,["contents"],o)}const r=c(e,["config"]);return r!=null&&f(n,["generationConfig"],f3(t,r,n)),n}function rE(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["contents"]);if(s!=null){let o=Tn(s);Array.isArray(o)&&(o=o.map(a=>a)),f(n,["contents"],o)}const r=c(e,["config"]);return r!=null&&f(n,["generationConfig"],h3(t,r,n)),n}function oE(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>LL(u))),f(e,["candidates"],l)}const s=c(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const r=c(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const o=c(t,["responseId"]);o!=null&&f(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function aE(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["candidates"],u)}const s=c(t,["createTime"]);s!=null&&f(e,["createTime"],s);const r=c(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=c(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function m3(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const r=c(t,["guidanceScale"]);if(e!==void 0&&r!=null&&f(e,["parameters","guidanceScale"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const a=c(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);const h=c(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const m=c(t,["outputMimeType"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","mimeType"],m);const p=c(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=c(t,["imageSize"]);if(e!==void 0&&v!=null&&f(e,["parameters","sampleImageSize"],v),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function p3(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const s=c(t,["negativePrompt"]);e!==void 0&&s!=null&&f(e,["parameters","negativePrompt"],s);const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const p=c(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=c(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","mimeType"],w);const N=c(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","compressionQuality"],N);const V=c(t,["addWatermark"]);e!==void 0&&V!=null&&f(e,["parameters","addWatermark"],V);const I=c(t,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const S=c(t,["imageSize"]);e!==void 0&&S!=null&&f(e,["parameters","sampleImageSize"],S);const R=c(t,["enhancePrompt"]);return e!==void 0&&R!=null&&f(e,["parameters","enhancePrompt"],R),n}function g3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const r=c(e,["config"]);return r!=null&&m3(r,n),n}function y3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const r=c(e,["config"]);return r!=null&&p3(r,n),n}function _3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>N3(o))),f(e,["generatedImages"],r)}const s=c(t,["positivePromptSafetyAttributes"]);return s!=null&&f(e,["positivePromptSafetyAttributes"],rR(s)),e}function v3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Xd(o))),f(e,["generatedImages"],r)}const s=c(t,["positivePromptSafetyAttributes"]);return s!=null&&f(e,["positivePromptSafetyAttributes"],oR(s)),e}function T3(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=c(t,["durationSeconds"]);if(e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const o=c(t,["resolution"]);e!==void 0&&o!=null&&f(e,["parameters","resolution"],o);const a=c(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&f(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=c(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Wd(h));const m=c(t,["referenceImages"]);if(e!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(v=>vO(v))),f(e,["instances[0]","referenceImages"],p)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function E3(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const r=c(t,["fps"]);e!==void 0&&r!=null&&f(e,["parameters","fps"],r);const o=c(t,["durationSeconds"]);e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const m=c(t,["pubsubTopic"]);e!==void 0&&m!=null&&f(e,["parameters","pubsubTopic"],m);const p=c(t,["negativePrompt"]);e!==void 0&&p!=null&&f(e,["parameters","negativePrompt"],p);const v=c(t,["enhancePrompt"]);e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v);const w=c(t,["generateAudio"]);e!==void 0&&w!=null&&f(e,["parameters","generateAudio"],w);const N=c(t,["lastFrame"]);e!==void 0&&N!=null&&f(e,["instances[0]","lastFrame"],Vn(N));const V=c(t,["referenceImages"]);if(e!==void 0&&V!=null){let R=V;Array.isArray(R)&&(R=R.map(M=>TO(M))),f(e,["instances[0]","referenceImages"],R)}const I=c(t,["mask"]);e!==void 0&&I!=null&&f(e,["instances[0]","mask"],_O(I));const S=c(t,["compressionQuality"]);return e!==void 0&&S!=null&&f(e,["parameters","compressionQuality"],S),n}function S3(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=c(t,["done"]);s!=null&&f(e,["done"],s);const r=c(t,["error"]);r!=null&&f(e,["error"],r);const o=c(t,["response","generateVideoResponse"]);return o!=null&&f(e,["response"],w3(o)),e}function A3(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["metadata"]);i!=null&&f(e,["metadata"],i);const s=c(t,["done"]);s!=null&&f(e,["done"],s);const r=c(t,["error"]);r!=null&&f(e,["error"],r);const o=c(t,["response"]);return o!=null&&f(e,["response"],R3(o)),e}function C3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const r=c(e,["image"]);r!=null&&f(n,["instances[0]","image"],Wd(r));const o=c(e,["video"]);o!=null&&f(n,["instances[0]","video"],uR(o));const a=c(e,["source"]);a!=null&&b3(a,n);const l=c(e,["config"]);return l!=null&&T3(l,n),n}function I3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["prompt"]);s!=null&&f(n,["instances[0]","prompt"],s);const r=c(e,["image"]);r!=null&&f(n,["instances[0]","image"],Vn(r));const o=c(e,["video"]);o!=null&&f(n,["instances[0]","video"],cR(o));const a=c(e,["source"]);a!=null&&x3(a,n);const l=c(e,["config"]);return l!=null&&E3(l,n),n}function w3(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>D3(o))),f(e,["generatedVideos"],r)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&f(e,["raiMediaFilteredReasons"],s),e}function R3(t){const e={},n=c(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>P3(o))),f(e,["generatedVideos"],r)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const s=c(t,["raiMediaFilteredReasons"]);return s!=null&&f(e,["raiMediaFilteredReasons"],s),e}function b3(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const s=c(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Wd(s));const r=c(t,["video"]);return e!==void 0&&r!=null&&f(e,["instances[0]","video"],uR(r)),n}function x3(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const s=c(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Vn(s));const r=c(t,["video"]);return e!==void 0&&r!=null&&f(e,["instances[0]","video"],cR(r)),n}function N3(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],q3(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const s=c(t,["_self"]);return s!=null&&f(e,["safetyAttributes"],rR(s)),e}function Xd(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],sR(n));const i=c(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const s=c(t,["_self"]);s!=null&&f(e,["safetyAttributes"],oR(s));const r=c(t,["prompt"]);return r!=null&&f(e,["enhancedPrompt"],r),e}function M3(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["mask"],sR(n));const i=c(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["labels"],s)}return e}function D3(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],gO(n)),e}function P3(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],yO(n)),e}function V3(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=c(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const s=c(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const r=c(t,["enableAffectiveDialog"]);r!=null&&f(e,["enableAffectiveDialog"],r);const o=c(t,["frequencyPenalty"]);o!=null&&f(e,["frequencyPenalty"],o);const a=c(t,["logprobs"]);a!=null&&f(e,["logprobs"],a);const l=c(t,["maxOutputTokens"]);l!=null&&f(e,["maxOutputTokens"],l);const u=c(t,["mediaResolution"]);u!=null&&f(e,["mediaResolution"],u);const h=c(t,["presencePenalty"]);h!=null&&f(e,["presencePenalty"],h);const m=c(t,["responseJsonSchema"]);m!=null&&f(e,["responseJsonSchema"],m);const p=c(t,["responseLogprobs"]);p!=null&&f(e,["responseLogprobs"],p);const v=c(t,["responseMimeType"]);v!=null&&f(e,["responseMimeType"],v);const w=c(t,["responseModalities"]);w!=null&&f(e,["responseModalities"],w);const N=c(t,["responseSchema"]);N!=null&&f(e,["responseSchema"],N);const V=c(t,["routingConfig"]);V!=null&&f(e,["routingConfig"],V);const I=c(t,["seed"]);I!=null&&f(e,["seed"],I);const S=c(t,["speechConfig"]);S!=null&&f(e,["speechConfig"],aR(S));const R=c(t,["stopSequences"]);R!=null&&f(e,["stopSequences"],R);const M=c(t,["temperature"]);M!=null&&f(e,["temperature"],M);const U=c(t,["thinkingConfig"]);U!=null&&f(e,["thinkingConfig"],U);const O=c(t,["topK"]);O!=null&&f(e,["topK"],O);const A=c(t,["topP"]);return A!=null&&f(e,["topP"],A),e}function U3(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],ve(t,i)),n}function k3(t,e){const n={},i=c(e,["model"]);return i!=null&&f(n,["_url","name"],ve(t,i)),n}function L3(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function O3(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function q3(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Ds(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function sR(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Ds(i));const s=c(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Wd(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Ds(n));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Vn(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ds(i));const s=c(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function B3(t,e,n){const i={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);const o=c(e,["filter"]);n!==void 0&&o!=null&&f(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],jw(t,a)),i}function F3(t,e,n){const i={},s=c(e,["pageSize"]);n!==void 0&&s!=null&&f(n,["_query","pageSize"],s);const r=c(e,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);const o=c(e,["filter"]);n!==void 0&&o!=null&&f(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],jw(t,a)),i}function H3(t,e){const n={},i=c(e,["config"]);return i!=null&&B3(t,i,n),n}function G3(t,e){const n={},i=c(e,["config"]);return i!=null&&F3(t,i,n),n}function z3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["_self"]);if(s!=null){let r=Xw(s);Array.isArray(r)&&(r=r.map(o=>Gm(o))),f(e,["models"],r)}return e}function Y3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["_self"]);if(s!=null){let r=Xw(s);Array.isArray(r)&&(r=r.map(o=>zm(o))),f(e,["models"],r)}return e}function K3(t){const e={},n=c(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const s=c(t,["maskDilation"]);return s!=null&&f(e,["dilation"],s),e}function Gm(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const s=c(t,["description"]);s!=null&&f(e,["description"],s);const r=c(t,["version"]);r!=null&&f(e,["version"],r);const o=c(t,["_self"]);o!=null&&f(e,["tunedModelInfo"],aO(o));const a=c(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=c(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);return u!=null&&f(e,["supportedActions"],u),e}function zm(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const i=c(t,["displayName"]);i!=null&&f(e,["displayName"],i);const s=c(t,["description"]);s!=null&&f(e,["description"],s);const r=c(t,["versionId"]);r!=null&&f(e,["version"],r);const o=c(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(p=>u3(p))),f(e,["endpoints"],m)}const a=c(t,["labels"]);a!=null&&f(e,["labels"],a);const l=c(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],lO(l));const u=c(t,["defaultCheckpointId"]);u!=null&&f(e,["defaultCheckpointId"],u);const h=c(t,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(p=>p)),f(e,["checkpoints"],m)}return e}function J3(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const s=c(t,["inlineData"]);s!=null&&f(e,["inlineData"],kL(s));const r=c(t,["fileData"]);r!=null&&f(e,["fileData"],c3(r));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(t,["text"]);return m!=null&&f(e,["text"],m),e}function $3(t){const e={},n=c(t,["productImage"]);return n!=null&&f(e,["image"],Vn(n)),e}function Q3(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const s=c(t,["baseSteps"]);e!==void 0&&s!=null&&f(e,["parameters","editConfig","baseSteps"],s);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const o=c(t,["seed"]);e!==void 0&&o!=null&&f(e,["parameters","seed"],o);const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&f(e,["parameters","addWatermark"],u);const h=c(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const m=c(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m);const p=c(t,["enhancePrompt"]);e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p);const v=c(t,["labels"]);return e!==void 0&&v!=null&&f(e,["labels"],v),n}function j3(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["source"]);s!=null&&W3(s,n);const r=c(e,["config"]);return r!=null&&Q3(r,n),n}function X3(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Xd(s))),f(e,["generatedImages"],i)}return e}function W3(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const s=c(t,["personImage"]);e!==void 0&&s!=null&&f(e,["instances[0]","personImage","image"],Vn(s));const r=c(t,["productImages"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>$3(a))),f(e,["instances[0]","productImages"],o)}return n}function Z3(t){const e={},n=c(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Vn(n));const i=c(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const s=c(t,["referenceType"]);s!=null&&f(e,["referenceType"],s);const r=c(t,["maskImageConfig"]);r!=null&&f(e,["maskImageConfig"],K3(r));const o=c(t,["controlImageConfig"]);o!=null&&f(e,["controlImageConfig"],GL(o));const a=c(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=c(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function rR(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const s=c(t,["contentType"]);return s!=null&&f(e,["contentType"],s),e}function oR(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const s=c(t,["contentType"]);return s!=null&&f(e,["contentType"],s),e}function eO(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&f(e,["category"],n);const i=c(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function tO(t){const e={},n=c(t,["image"]);return n!=null&&f(e,["image"],Vn(n)),e}function nO(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const s=c(t,["maxPredictions"]);e!==void 0&&s!=null&&f(e,["parameters","maxPredictions"],s);const r=c(t,["confidenceThreshold"]);e!==void 0&&r!=null&&f(e,["parameters","confidenceThreshold"],r);const o=c(t,["maskDilation"]);e!==void 0&&o!=null&&f(e,["parameters","maskDilation"],o);const a=c(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=c(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function iO(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["source"]);s!=null&&rO(s,n);const r=c(e,["config"]);return r!=null&&nO(r,n),n}function sO(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>M3(s))),f(e,["generatedMasks"],i)}return e}function rO(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const s=c(t,["image"]);e!==void 0&&s!=null&&f(e,["instances[0]","image"],Vn(s));const r=c(t,["scribbleImage"]);return e!==void 0&&r!=null&&f(e,["instances[0]","scribble"],tO(r)),n}function aR(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&f(e,["voiceConfig"],n),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(t,["languageCode"]);return i!=null&&f(e,["languageCode"],i),e}function oO(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],O3(i));const s=c(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["googleMaps"]);r!=null&&f(e,["googleMaps"],L3(r));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}function lR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>d3(p))),f(e,["functionDeclarations"],m)}const i=c(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=c(t,["googleSearch"]);s!=null&&f(e,["googleSearch"],s);const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const o=c(t,["enterpriseWebSearch"]);o!=null&&f(e,["enterpriseWebSearch"],o);const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a);const l=c(t,["urlContext"]);l!=null&&f(e,["urlContext"],l);const u=c(t,["computerUse"]);u!=null&&f(e,["computerUse"],u);const h=c(t,["codeExecution"]);return h!=null&&f(e,["codeExecution"],h),e}function aO(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const s=c(t,["updateTime"]);return s!=null&&f(e,["updateTime"],s),e}function lO(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const s=c(t,["updateTime"]);return s!=null&&f(e,["updateTime"],s),e}function uO(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const s=c(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);const r=c(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&f(e,["defaultCheckpointId"],r),n}function cO(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const s=c(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);const r=c(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&f(e,["defaultCheckpointId"],r),n}function dO(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","name"],ve(t,i));const s=c(e,["config"]);return s!=null&&uO(s,n),n}function fO(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["config"]);return s!=null&&cO(s,n),n}function hO(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const s=c(t,["includeRaiReason"]);e!==void 0&&s!=null&&f(e,["parameters","includeRaiReason"],s);const r=c(t,["outputMimeType"]);e!==void 0&&r!=null&&f(e,["parameters","outputOptions","mimeType"],r);const o=c(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&f(e,["parameters","outputOptions","compressionQuality"],o);const a=c(t,["enhanceInputImage"]);e!==void 0&&a!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],a);const l=c(t,["imagePreservationFactor"]);e!==void 0&&l!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],l);const u=c(t,["labels"]);e!==void 0&&u!=null&&f(e,["labels"],u);const h=c(t,["numberOfImages"]);e!==void 0&&h!=null&&f(e,["parameters","sampleCount"],h);const m=c(t,["mode"]);return e!==void 0&&m!=null&&f(e,["parameters","mode"],m),n}function mO(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["_url","model"],ve(t,i));const s=c(e,["image"]);s!=null&&f(n,["instances[0]","image"],Vn(s));const r=c(e,["upscaleFactor"]);r!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],r);const o=c(e,["config"]);return o!=null&&hO(o,n),n}function pO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Xd(r))),f(e,["generatedImages"],s)}return e}function gO(t){const e={},n=c(t,["video","uri"]);n!=null&&f(e,["uri"],n);const i=c(t,["video","encodedVideo"]);i!=null&&f(e,["videoBytes"],Ds(i));const s=c(t,["encoding"]);return s!=null&&f(e,["mimeType"],s),e}function yO(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Ds(i));const s=c(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function _O(t){const e={},n=c(t,["image"]);n!=null&&f(e,["_self"],Vn(n));const i=c(t,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function vO(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Wd(n));const i=c(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function TO(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Vn(n));const i=c(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function uR(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["video","uri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["video","encodedVideo"],Ds(i));const s=c(t,["mimeType"]);return s!=null&&f(e,["encoding"],s),e}function cR(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Ds(i));const s=c(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EO="Content-Type",SO="X-Server-Timeout",AO="User-Agent",Ym="x-goog-api-client",CO="1.24.0",IO=`google-genai-sdk/${CO}`,wO="v1beta1",RO="v1beta",lE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class bO{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:wO,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:RO,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(n))typeof r=="object"?i[s]=Object.assign(Object.assign({},i[s]),r):r!==void 0&&(i[s]=r);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>s.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&xO(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await uE(s),new Bm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await uE(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return ao(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield qe(s.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=r.decode(l,{stream:!0});try{const m=JSON.parse(u);if("error"in m){const p=JSON.parse(JSON.stringify(m.error)),v=p.status,w=p.code,N=`got status: ${v}. ${JSON.stringify(m)}`;if(w>=400&&w<600)throw new Qd({message:N,status:w})}}catch(m){if(m.name==="ApiError")throw m}o+=u;let h=o.match(lE);for(;h;){const m=h[1];try{const p=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield qe(new Bm(p)),o=o.slice(h[0].length),h=o.match(lE)}catch(p){throw new Error(`exception parsing stream chunk ${m}. ${p}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=IO+" "+this.clientOptions.userAgentExtra;return e[AO]=n,e[Ym]=n,e[EO]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(SO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,o=await r.stat(e);s.sizeBytes=String(o.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l=await this.fetchUploadUrl(s,n);return r.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},o=await this.request({path:$("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function uE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Qd({message:s,status:n}):new Error(s)}}function xO(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,o){const a=Object.assign({},r);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],h=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=i(h,u):(h&&u&&typeof h!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NO="mcp_used/unknown";let MO=!1;function dR(t){for(const e of t)if(DO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return MO}function fR(t){var e;const n=(e=t[Ym])!==null&&e!==void 0?e:"";t[Ym]=(n+` ${NO}`).trimStart()}function DO(t){return t!==null&&typeof t=="object"&&t instanceof Jg}function PO(t,e=100){return ao(this,arguments,function*(){let i,s=0;for(;s<e;){const r=yield qe(t.listTools({cursor:i}));for(const o of r.tools)yield yield qe(o),s++;if(!r.nextCursor)break;i=r.nextCursor}})}class Jg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Jg(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const r={},o=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,ol(PO(h))),u;u=await l.next(),e=u.done,!e;a=!0){s=u.value,a=!1;const m=s;o.push(m);const p=m.name;if(r[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);r[p]=h}}catch(m){n={error:m}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),qk(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const o=await s.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function VO(t,e,n){const i=new Mk;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(i,s),e(i)}class UO{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),o=OO(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const h=new Promise(R=>{u=R}),m=e.callbacks,p=function(){u({})},v=this.apiClient,w={onopen:p,onmessage:R=>{VO(v,m.onmessage,R)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=m==null?void 0:m.onclose)!==null&&i!==void 0?i:function(R){}},N=this.webSocketFactory.create(l,LO(o),w);N.connect(),await h;const S={setup:{model:ve(this.apiClient,e.model)}};return N.send(JSON.stringify(S)),new kO(N,this.apiClient)}}class kO{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=RL(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=wL(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl($r.PLAY)}pause(){this.sendPlaybackControl($r.PAUSE)}stop(){this.sendPlaybackControl($r.STOP)}resetContext(){this.sendPlaybackControl($r.RESET_CONTEXT)}close(){this.conn.close()}}function LO(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function OO(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function BO(t,e,n){const i=new Nk;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const r=JSON.parse(s);if(t.isVertexAI()){const o=NL(r);Object.assign(i,o)}else Object.assign(i,r);e(i)}class FO{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new UO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,r,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&dR(e.config.tools)&&fR(m);const p=YO(m);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{const E=this.apiClient.getApiKey();let b="BidiGenerateContent",D="key";E!=null&&E.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",D="access_token"),h=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${b}?${D}=${E}`}let v=()=>{};const w=new Promise(E=>{v=E}),N=e.callbacks,V=function(){var E;(E=N==null?void 0:N.onopen)===null||E===void 0||E.call(N),v({})},I=this.apiClient,S={onopen:V,onmessage:E=>{BO(I,N.onmessage,E)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(E){},onclose:(i=N==null?void 0:N.onclose)!==null&&i!==void 0?i:function(E){}},R=this.webSocketFactory.create(h,zO(p),S);R.connect(),await w;let M=ve(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const E=this.apiClient.getProject(),b=this.apiClient.getLocation();M=`projects/${E}/locations/${b}/`+M}let U={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[od.AUDIO]}:e.config.responseModalities=[od.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],A=[];for(const E of O)if(this.isCallableTool(E)){const b=E;A.push(await b.tool())}else A.push(E);A.length>0&&(e.config.tools=A);const T={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=IL(this.apiClient,T):U=CL(this.apiClient,T),delete U.config,R.send(JSON.stringify(U)),new GO(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const HO={turnComplete:!0};class GO{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Tn(n.turns),e.isVertexAI()||(i=i.map(s=>jd(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(qO)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},HO),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:xL(e)}:n={realtimeInput:bL(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function zO(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function YO(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cE=10;function dE(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(lo(o)){s=!0;break}if(!s)return!0;const r=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function lo(t){return"callTool"in t&&typeof t.callTool=="function"}function KO(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>lo(s)))!==null&&i!==void 0?i:!1}function JO(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!lo(s)))!==null&&i!==void 0?i:!1}function fE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $O extends Tr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,r,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!KO(n)||dE(n.config))return await this.generateContentInternal(l);if(JO(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,h;const m=Tn(l.contents),p=(r=(s=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:cE;let v=0;for(;v<p&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const w=u.candidates[0].content,N=[];for(const V of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(lo(V)){const S=await V.callTool(u.functionCalls);N.push(...S)}v++,h={role:"user",parts:N},l.contents=Tn(l.contents),l.contents.push(w),l.contents.push(h),fE(l.config)&&(m.push(w),m.push(h))}return fE(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),dE(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let r;const o=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=l==null?void 0:l.safetyAttributes:o.push(l);let a;return r?a={generatedImages:o,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new tu(dr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const o=await Promise.all(r.map(async l=>lo(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&dR(e.config.tools)){const l=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),fR(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,i,s;const r=new Map;for(const o of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(lo(o)){const a=o,l=await a.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(r.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);r.set(u.name,a)}}return r}async processAfcStream(e){var n,i,s;const r=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:cE;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,h,m){var p,v;return ao(this,arguments,function*(){for(var w,N,V,I;a<r;){o&&(a++,o=!1);const U=yield qe(u.processParamsMaybeAddMcpUsage(m)),O=yield qe(u.generateContentStreamInternal(U)),A=[],T=[];try{for(var S=!0,R=(N=void 0,ol(O)),M;M=yield qe(R.next()),w=M.done,!w;S=!0){I=M.value,S=!1;const E=I;if(yield yield qe(E),E.candidates&&(!((p=E.candidates[0])===null||p===void 0)&&p.content)){T.push(E.candidates[0].content);for(const b of(v=E.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<r&&b.functionCall){if(!b.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(b.functionCall.name)){const D=yield qe(h.get(b.functionCall.name).callTool([b.functionCall]));A.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${b.functionCall.name}`)}}}}catch(E){N={error:E}}finally{try{!S&&!w&&(V=R.return)&&(yield qe(V.call(R)))}finally{if(N)throw N.error}}if(A.length>0){o=!0;const E=new Ia;E.candidates=[{content:{role:"user",parts:A}}],yield yield qe(E);const b=[];b.push(...T),b.push({role:"user",parts:A});const D=Tn(m.contents).concat(b);m.contents=D}else break}})}(this,l,e)}async generateContentInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=rE(this.apiClient,e);return a=$("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=aE(h),p=new Ia;return Object.assign(p,m),p})}else{const u=sE(this.apiClient,e);return a=$("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=oE(h),p=new Ia;return Object.assign(p,m),p})}}async generateContentStreamInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=rE(this.apiClient,e);return a=$("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return ao(this,arguments,function*(){var p,v,w,N;try{for(var V=!0,I=ol(m),S;S=yield qe(I.next()),p=S.done,!p;V=!0){N=S.value,V=!1;const R=N,M=aE(yield qe(R.json()));M.sdkHttpResponse={headers:R.headers};const U=new Ia;Object.assign(U,M),yield yield qe(U)}}catch(R){v={error:R}}finally{try{!V&&!p&&(w=I.return)&&(yield qe(w.call(I)))}finally{if(v)throw v.error}}})})}else{const u=sE(this.apiClient,e);return a=$("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return ao(this,arguments,function*(){var p,v,w,N;try{for(var V=!0,I=ol(m),S;S=yield qe(I.next()),p=S.done,!p;V=!0){N=S.value,V=!1;const R=N,M=oE(yield qe(R.json()));M.sdkHttpResponse={headers:R.headers};const U=new Ia;Object.assign(U,M),yield yield qe(U)}}catch(R){v={error:R}}finally{try{!V&&!p&&(w=I.return)&&(yield qe(w.call(I)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=o3(this.apiClient,e);return a=$("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=l3(h),p=new H0;return Object.assign(p,m),p})}else{const u=r3(this.apiClient,e);return a=$("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=a3(h),p=new H0;return Object.assign(p,m),p})}}async generateImagesInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=y3(this.apiClient,e);return a=$("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=v3(h),p=new G0;return Object.assign(p,m),p})}else{const u=g3(this.apiClient,e);return a=$("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=_3(h),p=new G0;return Object.assign(p,m),p})}}async editImageInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=t3(this.apiClient,e);return r=$("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const u=n3(l),h=new Sk;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=mO(this.apiClient,e);return r=$("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const u=pO(l),h=new Ak;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=j3(this.apiClient,e);return r=$("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const u=X3(l),h=new Ck;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=iO(this.apiClient,e);return r=$("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const u=sO(l),h=new Ik;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=k3(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>zm(h))}else{const u=U3(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Gm(h))}}async listInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=G3(this.apiClient,e);return a=$("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=Y3(h),p=new z0;return Object.assign(p,m),p})}else{const u=H3(this.apiClient,e);return a=$("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=z3(h),p=new z0;return Object.assign(p,m),p})}}async update(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=fO(this.apiClient,e);return a=$("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>zm(h))}else{const u=dO(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>Gm(h))}}async delete(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=XL(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=ZL(h),p=new Y0;return Object.assign(p,m),p})}else{const u=jL(this.apiClient,e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=WL(h),p=new Y0;return Object.assign(p,m),p})}}async countTokens(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=JL(this.apiClient,e);return a=$("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=QL(h),p=new K0;return Object.assign(p,m),p})}else{const u=KL(this.apiClient,e);return a=$("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=$L(h),p=new K0;return Object.assign(p,m),p})}}async computeTokens(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=qL(this.apiClient,e);return r=$("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const u=BL(l),h=new wk;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=I3(this.apiClient,e);return a=$("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=A3(h),p=new ad;return Object.assign(p,m),p})}else{const u=C3(this.apiClient,e);return a=$("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const m=S3(h),p=new ad;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QO extends Tr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=vk(e);return a=$("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}else{const u=_k(e);return a=$("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=dk(e);return r=$("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jO(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&f(e,["data"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function XO(t){const e={},n=c(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r5(r))),f(e,["parts"],s)}const i=c(t,["role"]);return i!=null&&f(e,["role"],i),e}function WO(t,e,n){const i={},s=c(e,["expireTime"]);n!==void 0&&s!=null&&f(n,["expireTime"],s);const r=c(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&f(n,["newSessionExpireTime"],r);const o=c(e,["uses"]);n!==void 0&&o!=null&&f(n,["uses"],o);const a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],s5(t,a));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),i}function ZO(t,e){const n={},i=c(e,["config"]);return i!=null&&f(n,["config"],WO(t,i,n)),n}function e5(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function t5(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function n5(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&f(e,["timeRangeFilter"],n),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function i5(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const s=c(t,["responseModalities"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","responseModalities"],s);const r=c(t,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const o=c(t,["topP"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const m=c(t,["speechConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","speechConfig"],Kg(m));const p=c(t,["thinkingConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","thinkingConfig"],p);const v=c(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],v);const w=c(t,["systemInstruction"]);e!==void 0&&w!=null&&f(e,["setup","systemInstruction"],XO(Dt(w)));const N=c(t,["tools"]);if(e!==void 0&&N!=null){let O=$o(N);Array.isArray(O)&&(O=O.map(A=>a5(Jo(A)))),f(e,["setup","tools"],O)}const V=c(t,["sessionResumption"]);e!==void 0&&V!=null&&f(e,["setup","sessionResumption"],o5(V));const I=c(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","inputAudioTranscription"],I);const S=c(t,["outputAudioTranscription"]);e!==void 0&&S!=null&&f(e,["setup","outputAudioTranscription"],S);const R=c(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&f(e,["setup","realtimeInputConfig"],R);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);return e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),n}function s5(t,e){const n={},i=c(e,["model"]);i!=null&&f(n,["setup","model"],ve(t,i));const s=c(e,["config"]);return s!=null&&f(n,["config"],i5(s,n)),n}function r5(t){const e={},n=c(t,["videoMetadata"]);n!=null&&f(e,["videoMetadata"],n);const i=c(t,["thought"]);i!=null&&f(e,["thought"],i);const s=c(t,["inlineData"]);s!=null&&f(e,["inlineData"],jO(s));const r=c(t,["fileData"]);r!=null&&f(e,["fileData"],e5(r));const o=c(t,["thoughtSignature"]);o!=null&&f(e,["thoughtSignature"],o);const a=c(t,["functionCall"]);a!=null&&f(e,["functionCall"],a);const l=c(t,["codeExecutionResult"]);l!=null&&f(e,["codeExecutionResult"],l);const u=c(t,["executableCode"]);u!=null&&f(e,["executableCode"],u);const h=c(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const m=c(t,["text"]);return m!=null&&f(e,["text"],m),e}function o5(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function a5(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearch"]);i!=null&&f(e,["googleSearch"],n5(i));const s=c(t,["googleSearchRetrieval"]);if(s!=null&&f(e,["googleSearchRetrieval"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["googleMaps"]);r!=null&&f(e,["googleMaps"],t5(r));const o=c(t,["urlContext"]);o!=null&&f(e,["urlContext"],o);const a=c(t,["computerUse"]);a!=null&&f(e,["computerUse"],a);const l=c(t,["codeExecution"]);return l!=null&&f(e,["codeExecution"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l5(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(r=>`${n}.${r}`);e.push(...s)}else e.push(n)}return e.join(",")}function u5(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const r=l5(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class c5 extends Tr{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=ZO(this.apiClient,e);r=$("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=u5(a,e.config);return s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d5(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function f5(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function h5(t,e){const n={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=c(t,["epochCount"]);e!==void 0&&s!=null&&f(e,["tuningTask","hyperparameters","epochCount"],s);const r=c(t,["learningRateMultiplier"]);if(r!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],r),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=c(t,["batchSize"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","batchSize"],o);const a=c(t,["learningRate"]);if(e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","learningRate"],a),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function m5(t,e){const n={},i=c(t,["validationDataset"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec"],x5(i,n));const s=c(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&f(e,["tunedModelDisplayName"],s);const r=c(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);const o=c(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=c(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=c(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=c(t,["adapterSize"]);if(e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=c(t,["labels"]);return e!==void 0&&h!=null&&f(e,["labels"],h),n}function p5(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["preTunedModel"]);i!=null&&f(e,["preTunedModel"],i);const s=c(t,["trainingDataset"]);s!=null&&f(e,["tuningTask","trainingData"],w5(s));const r=c(t,["config"]);return r!=null&&h5(r,e),e}function g5(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=c(t,["preTunedModel"]);i!=null&&f(e,["preTunedModel"],i);const s=c(t,["trainingDataset"]);s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],R5(s,e));const r=c(t,["config"]);return r!=null&&m5(r,e),e}function y5(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function _5(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function v5(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=c(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),n}function T5(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=c(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),n}function E5(t){const e={},n=c(t,["config"]);return n!=null&&v5(n,e),e}function S5(t){const e={},n=c(t,["config"]);return n!=null&&T5(n,e),e}function A5(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>hR(o))),f(e,["tuningJobs"],r)}return e}function C5(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const s=c(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Km(o))),f(e,["tuningJobs"],r)}return e}function I5(t){const e={},n=c(t,["name"]);n!=null&&f(e,["model"],n);const i=c(t,["name"]);return i!=null&&f(e,["endpoint"],i),e}function w5(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=c(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["examples","examples"],i)}return e}function R5(t,e){const n={},i=c(t,["gcsUri"]);e!==void 0&&i!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=c(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s),c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function hR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const s=c(t,["state"]);s!=null&&f(e,["state"],$w(s));const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const o=c(t,["tuningTask","startTime"]);o!=null&&f(e,["startTime"],o);const a=c(t,["tuningTask","completeTime"]);a!=null&&f(e,["endTime"],a);const l=c(t,["updateTime"]);l!=null&&f(e,["updateTime"],l);const u=c(t,["description"]);u!=null&&f(e,["description"],u);const h=c(t,["baseModel"]);h!=null&&f(e,["baseModel"],h);const m=c(t,["_self"]);m!=null&&f(e,["tunedModel"],I5(m));const p=c(t,["customBaseModel"]);p!=null&&f(e,["customBaseModel"],p);const v=c(t,["experiment"]);v!=null&&f(e,["experiment"],v);const w=c(t,["labels"]);w!=null&&f(e,["labels"],w);const N=c(t,["outputUri"]);N!=null&&f(e,["outputUri"],N);const V=c(t,["pipelineJob"]);V!=null&&f(e,["pipelineJob"],V);const I=c(t,["serviceAccount"]);I!=null&&f(e,["serviceAccount"],I);const S=c(t,["tunedModelDisplayName"]);S!=null&&f(e,["tunedModelDisplayName"],S);const R=c(t,["veoTuningSpec"]);return R!=null&&f(e,["veoTuningSpec"],R),e}function Km(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const s=c(t,["state"]);s!=null&&f(e,["state"],$w(s));const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const o=c(t,["startTime"]);o!=null&&f(e,["startTime"],o);const a=c(t,["endTime"]);a!=null&&f(e,["endTime"],a);const l=c(t,["updateTime"]);l!=null&&f(e,["updateTime"],l);const u=c(t,["error"]);u!=null&&f(e,["error"],u);const h=c(t,["description"]);h!=null&&f(e,["description"],h);const m=c(t,["baseModel"]);m!=null&&f(e,["baseModel"],m);const p=c(t,["tunedModel"]);p!=null&&f(e,["tunedModel"],p);const v=c(t,["preTunedModel"]);v!=null&&f(e,["preTunedModel"],v);const w=c(t,["supervisedTuningSpec"]);w!=null&&f(e,["supervisedTuningSpec"],w);const N=c(t,["tuningDataStats"]);N!=null&&f(e,["tuningDataStats"],N);const V=c(t,["encryptionSpec"]);V!=null&&f(e,["encryptionSpec"],V);const I=c(t,["partnerModelTuningSpec"]);I!=null&&f(e,["partnerModelTuningSpec"],I);const S=c(t,["customBaseModel"]);S!=null&&f(e,["customBaseModel"],S);const R=c(t,["experiment"]);R!=null&&f(e,["experiment"],R);const M=c(t,["labels"]);M!=null&&f(e,["labels"],M);const U=c(t,["outputUri"]);U!=null&&f(e,["outputUri"],U);const O=c(t,["pipelineJob"]);O!=null&&f(e,["pipelineJob"],O);const A=c(t,["serviceAccount"]);A!=null&&f(e,["serviceAccount"],A);const T=c(t,["tunedModelDisplayName"]);T!=null&&f(e,["tunedModelDisplayName"],T);const E=c(t,["veoTuningSpec"]);return E!=null&&f(e,["veoTuningSpec"],E),e}function b5(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&f(e,["name"],i);const s=c(t,["metadata"]);s!=null&&f(e,["metadata"],s);const r=c(t,["done"]);r!=null&&f(e,["done"],r);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function x5(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const s=c(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N5 extends Tr{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new tu(dr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),r=await this.tuneMldevInternal(s);let o="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?o=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(o=r.name.split("/operations/")[0]),{name:o,state:qm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=_5(e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>Km(h))}else{const u=y5(e);return a=$("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>hR(h))}}async listInternal(e){var n,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=S5(e);return a=$("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=C5(h),p=new J0;return Object.assign(p,m),p})}else{const u=E5(e);return a=$("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),o.then(h=>{const m=A5(h),p=new J0;return Object.assign(p,m),p})}}async cancel(e){var n,i,s,r;let o="",a={};if(this.apiClient.isVertexAI()){const l=f5(e);o=$("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=d5(e);o=$("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=g5(e);return r=$("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>Km(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=p5(e);return r=$("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>b5(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M5{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const D5=1024*1024*8,P5=3,V5=1e3,U5=2,mh="x-goog-upload-status";async function k5(t,e,n){var i,s,r;let o=0,a=0,l=new Bm(new Response),u="upload";for(o=t.size;a<o;){const m=Math.min(D5,o-a),p=t.slice(a,a+m);a+m>=o&&(u+=", finalize");let v=0,w=V5;for(;v<P5&&(l=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(m)}}}),!(!((i=l==null?void 0:l.headers)===null||i===void 0)&&i[mh]));)v++,await O5(w),w=w*U5;if(a+=m,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[mh])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(l==null?void 0:l.json());if(((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[mh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function L5(t){return{size:t.size,type:t.type}}function O5(t){return new Promise(e=>setTimeout(e,t))}class q5{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await k5(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await L5(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B5{create(e,n,i){return new F5(e,n,i)}}class F5{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hE="x-goog-api-key";class H5{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(hE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G5="gl-node/";class z5{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=ck(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new H5(this.apiKey);this.apiClient=new bO({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:G5+"web",uploader:new q5,downloader:new M5}),this.models=new $O(this.apiClient),this.live=new FO(this.apiClient,s,new B5),this.batches=new R4(this.apiClient),this.chats=new rL(this.models,this.apiClient),this.caches=new nL(this.apiClient),this.files=new pL(this.apiClient),this.operations=new QO(this.apiClient),this.authTokens=new c5(this.apiClient),this.tunings=new N5(this.apiClient)}}var Y5={};const K5=new z5({apiKey:Y5.API_KEY}),J5=async(t,e)=>{const n=e.map(o=>`Date: ${o.date}
Tasks: ${o.tasks}
`).join(`
---
`);if(n.length===0)return"No reports available to generate a summary.";const i=new Date,s=`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()}`,r=`
    As an expert construction project analyst, provide a clear and concise summary (around 5-7 lines or a few key bullet points) of the project's progress.

    **Project Context:**
    - Project Name: "${t.name}"
    - Key Dates: Start ${t.constructionStartDate}, Planned End ${t.plannedAcceptanceDate}
    - Today's Date: ${s}

    **Your Task:**
    Based on the daily reports, provide a summary that is easy to grasp quickly. Structure your response with these key sections:
    1.  **Đánh giá Chung (Overall Assessment):** Briefly evaluate the project's status (e.g., on track, behind schedule) based on the timeline.
    2.  **Hoạt động Chính Gần đây (Key Recent Activities):** List the most significant accomplishments from the latest reports.
    3.  **Rủi ro & Vấn đề Cần chú ý (Risks & Points of Attention):** Highlight any potential issues, blockers, or items that need attention. If none, state that.

    **Output Format:**
    - Use Markdown for clear formatting (bolding, headings, lists).
    - The entire summary **must be in Vietnamese**.

    **Daily Reports Data:**
    ---
    ${n}
    ---
  `;try{return(await K5.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{temperature:.5}})).text}catch(o){return console.error("Error generating summary with Gemini API:",o),"An error occurred while generating the AI summary. Please check the console for details."}},$5=({projectId:t,currentUser:e,onAddReport:n,onCancel:i})=>{const s=()=>{const U=new Date,O=String(U.getDate()).padStart(2,"0"),A=String(U.getMonth()+1).padStart(2,"0"),T=U.getFullYear();return`${O}/${A}/${T}`},[r,o]=Q.useState(s()),[a,l]=Q.useState(""),[u,h]=Q.useState([]),[m,p]=Q.useState(!1),[v,w]=Q.useState(!1),N=U=>{if(!U||typeof U!="string")return"";const O=U.split("/");if(O.length!==3)return"";const[A,T,E]=O;return`${E}-${T.padStart(2,"0")}-${A.padStart(2,"0")}`},V=U=>{if(!U||typeof U!="string")return"";const O=U.split("-");if(O.length!==3)return"";const[A,T,E]=O;return`${E.padStart(2,"0")}/${T.padStart(2,"0")}/${A}`},I=U=>new Promise((O,A)=>{const T=new FileReader;T.readAsDataURL(U),T.onload=E=>{var D;const b=new Image;b.src=(D=E.target)==null?void 0:D.result,b.onload=()=>{const P=document.createElement("canvas"),x=1024,xe=1024;let Ne=b.width,H=b.height;Ne>H?Ne>x&&(H*=x/Ne,Ne=x):H>xe&&(Ne*=xe/H,H=xe),P.width=Ne,P.height=H;const W=P.getContext("2d");if(!W)return A(new Error("Could not get canvas context"));W.drawImage(b,0,0,Ne,H);const Z=P.toDataURL("image/jpeg",.75);O(Z)},b.onerror=P=>A(P)},T.onerror=E=>A(E)}),S=async U=>{if(!U.target.files)return;p(!0);const A=Array.from(U.target.files).map(I);try{const T=await Promise.all(A);h(E=>[...E,...T])}catch(T){console.error("Error optimizing images:",T),alert("An error occurred while processing the images. Please try again.")}finally{p(!1),U.target.value=""}},R=U=>{h(O=>O.filter((A,T)=>T!==U))},M=async U=>{if(U.preventDefault(),!a.trim()||!r.trim()){alert("Vui lòng điền đầy đủ ngày báo cáo và nội dung công việc.");return}w(!0);const O={projectId:t,date:r,tasks:a,images:u,submittedBy:e.name};await n(O),w(!1),i()};return g.jsxs("div",{className:"bg-base-100 p-6 sm:p-8 rounded-lg shadow-lg border border-gray-200 animate-fade-in",children:[g.jsx("h3",{className:"text-xl font-bold text-primary mb-6",children:"Gửi báo cáo mới"}),g.jsxs("form",{onSubmit:M,className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"md:col-span-1",children:[g.jsx("label",{htmlFor:"reportDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngày báo cáo"}),g.jsx("input",{id:"reportDate",type:"date",value:N(r),onChange:U=>o(V(U.target.value)),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary bg-white text-gray-900",style:{colorScheme:"light"},required:!0})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{htmlFor:"reportTasks",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nội dung công việc"}),g.jsx("textarea",{id:"reportTasks",rows:3,value:a,onChange:U=>l(U.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary bg-white text-gray-900",placeholder:"Mô tả chi tiết các công việc đã làm trong ngày...",required:!0})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hình ảnh đính kèm"}),u.length>0&&g.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-4 p-4 border rounded-md bg-gray-50",children:u.map((U,O)=>g.jsxs("div",{className:"relative group",children:[g.jsx("img",{src:U,alt:`Preview ${O+1}`,className:"w-full h-24 object-cover rounded-md shadow-sm"}),g.jsx("button",{type:"button",onClick:()=>R(O),className:"absolute top-0 right-0 -mt-2 -mr-2 bg-error text-white rounded-full p-0 w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity focus:opacity-100","aria-label":"Remove image",children:g.jsx(Ko,{className:"h-4 w-4"})})]},O))}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsxs("label",{htmlFor:"imageUploadAdd",className:"cursor-pointer bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:[g.jsx("span",{children:"Thêm ảnh..."}),g.jsx("input",{id:"imageUploadAdd",name:"imageUploadAdd",type:"file",className:"sr-only",multiple:!0,accept:"image/*",onChange:S})]}),m&&g.jsx("div",{className:"text-sm text-gray-500",children:"Đang xử lý..."})]})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t mt-8",children:[g.jsx("button",{type:"button",onClick:i,className:"bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Hủy"}),g.jsx("button",{type:"submit",disabled:m||v,className:"bg-success text-white font-bold py-2 px-6 rounded-md hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:v?"Đang gửi...":"Gửi Báo cáo"})]})]})]})},Q5=({report:t,onUpdateReport:e,onCancel:n})=>{const[i,s]=Q.useState(t.tasks),[r,o]=Q.useState(t.images),[a,l]=Q.useState(!1),u=v=>new Promise((w,N)=>{const V=new FileReader;V.readAsDataURL(v),V.onload=I=>{var R;const S=new Image;S.src=(R=I.target)==null?void 0:R.result,S.onload=()=>{const M=document.createElement("canvas"),U=1024,O=1024;let A=S.width,T=S.height;A>T?A>U&&(T*=U/A,A=U):T>O&&(A*=O/T,T=O),M.width=A,M.height=T;const E=M.getContext("2d");if(!E)return N(new Error("Could not get canvas context"));E.drawImage(S,0,0,A,T);const b=M.toDataURL("image/jpeg",.75);w(b)},S.onerror=M=>N(M)},V.onerror=I=>N(I)}),h=async v=>{if(!v.target.files)return;l(!0);const N=Array.from(v.target.files).map(u);try{const V=await Promise.all(N);o(I=>[...I,...V])}catch(V){console.error("Error optimizing images:",V),alert("An error occurred while processing the images. Please try again.")}finally{l(!1),v.target.value=""}},m=v=>{o(w=>w.filter((N,V)=>V!==v))},p=v=>{if(v.preventDefault(),!i.trim()){alert("Nội dung công việc không được để trống.");return}e({...t,tasks:i,images:r})};return g.jsxs("div",{className:"bg-base-100 p-6 sm:p-8 rounded-lg shadow-lg border border-gray-200 animate-fade-in",children:[g.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Chỉnh sửa Báo cáo"}),g.jsxs("p",{className:"text-gray-600 mb-6",children:["Ngày: ",t.date]}),g.jsxs("form",{onSubmit:p,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"reportTasks",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nội dung công việc đã thực hiện"}),g.jsx("textarea",{id:"reportTasks",rows:5,value:i,onChange:v=>s(v.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary bg-white text-gray-900",placeholder:"Mô tả chi tiết các công việc đã làm trong ngày...",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quản lý hình ảnh"}),r.length>0?g.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-4 p-4 border rounded-md bg-gray-50",children:r.map((v,w)=>g.jsxs("div",{className:"relative group",children:[g.jsx("img",{src:v,alt:`Preview ${w+1}`,className:"w-full h-24 object-cover rounded-md shadow-sm"}),g.jsx("button",{type:"button",onClick:()=>m(w),className:"absolute top-0 right-0 -mt-2 -mr-2 bg-error text-white rounded-full p-0 w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity focus:opacity-100","aria-label":"Remove image",children:g.jsx(Ko,{className:"h-4 w-4"})})]},w))}):g.jsx("p",{className:"text-sm text-gray-500 mb-4 italic",children:"Hiện không có hình ảnh nào."}),g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsxs("label",{htmlFor:"imageUpload",className:"cursor-pointer bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:[g.jsx("span",{children:"Thêm ảnh..."}),g.jsx("input",{id:"imageUpload",name:"imageUpload",type:"file",className:"sr-only",multiple:!0,accept:"image/*",onChange:h})]}),a&&g.jsx("div",{className:"text-sm text-gray-500",children:"Đang xử lý..."})]})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t mt-8",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Hủy"}),g.jsx("button",{type:"submit",disabled:a,className:"bg-success text-white font-bold py-2 px-6 rounded-md hover:bg-green-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Lưu Thay Đổi"})]})]})]})},Oe=({label:t,type:e="text",...n})=>g.jsxs("div",{children:[g.jsx("label",{htmlFor:n.name,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),g.jsx("input",{id:n.name,type:e,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary bg-white text-gray-900",style:e==="date"?{colorScheme:"light"}:{},...n})]}),j5=({project:t,onUpdateProject:e,onCancel:n,users:i,currentUser:s})=>{var w,N,V,I,S,R;const[r,o]=Q.useState(t),a=M=>{if(!M||typeof M!="string")return"";const U=M.split("/");if(U.length!==3)return"";const[O,A,T]=U;return`${T}-${A.padStart(2,"0")}-${O.padStart(2,"0")}`},l=M=>{if(!M||typeof M!="string")return"";const U=M.split("-");if(U.length!==3)return"";const[O,A,T]=U;return`${T}/${A}/${O}`},u=M=>{const{name:U,value:O,type:A}=M.target,T=A==="date"?l(O):O,E=U.split(".");E.length>1?o(b=>({...b,[E[0]]:{...b[E[0]],[E[1]]:T}})):o(b=>({...b,[U]:T}))},h=M=>{const{name:U,options:O}=M.target,A=Array.from(O).filter(T=>T.selected).map(T=>T.value);o(T=>({...T,[U]:A}))},m=M=>{M.preventDefault(),e(r)},p=i.filter(M=>M.role===cr.ProjectManager),v=i.filter(M=>M.role===cr.LeadSupervisor);return g.jsxs("div",{className:"bg-base-100 p-6 sm:p-8 rounded-lg shadow-lg border border-gray-200 animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Chỉnh sửa dự án"}),g.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800",children:g.jsx(Ko,{className:"h-6 w-6"})})]}),g.jsx("p",{className:"text-lg text-gray-600 mb-6",children:t.name}),g.jsxs("form",{onSubmit:m,className:"space-y-8",children:[g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Kế hoạch Tiến độ (Google Sheet)"}),g.jsxs("div",{className:"mt-2 space-y-4",children:[g.jsxs("div",{children:[g.jsx(Oe,{label:"Link nhúng (để hiển thị)",name:"scheduleSheetUrl",value:r.scheduleSheetUrl||"",onChange:u,placeholder:"Dán link nhúng (src) từ Google Sheets..."}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Trong Google Sheet, chọn 'Tệp' > 'Chia sẻ' > 'Xuất bản lên web' > 'Nhúng', sau đó sao chép đường link trong thuộc tính 'src'."})]}),g.jsxs("div",{children:[g.jsx(Oe,{label:"Link Chỉnh sửa (để mở file gốc)",name:"scheduleSheetEditUrl",value:r.scheduleSheetEditUrl||"",onChange:u,placeholder:"Dán link từ thanh địa chỉ trình duyệt..."}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sao chép đường link bình thường từ thanh địa chỉ của trình duyệt (link có chữ /edit ở cuối)."})]})]})]}),yn.canEditPersonnel(s)&&g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Gán Nhân sự Phụ trách (để phân quyền)"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"projectManagerIds",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cán bộ Quản lý (chọn nhiều)"}),g.jsx("select",{id:"projectManagerIds",name:"projectManagerIds",multiple:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary h-32 bg-white text-gray-900",value:r.projectManagerIds,onChange:h,children:p.map(M=>g.jsx("option",{value:M.id,children:M.name},M.id))})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"leadSupervisorIds",className:"block text-sm font-medium text-gray-700 mb-1",children:"Giám sát trưởng (chọn nhiều)"}),g.jsx("select",{id:"leadSupervisorIds",name:"leadSupervisorIds",multiple:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary h-32 bg-white text-gray-900",value:r.leadSupervisorIds,onChange:h,children:v.map(M=>g.jsx("option",{value:M.id,children:M.name},M.id))})]})]})]}),g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Thông tin Phê duyệt"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-2",children:[g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Kế hoạch vốn"}),g.jsx(Oe,{label:"Số Quyết định",name:"capitalPlanApproval.decisionNumber",value:r.capitalPlanApproval.decisionNumber,onChange:u}),g.jsx(Oe,{label:"Ngày",name:"capitalPlanApproval.date",value:a(r.capitalPlanApproval.date),onChange:u,type:"date"})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Phương án kỹ thuật"}),g.jsx(Oe,{label:"Số Quyết định",name:"technicalPlanApproval.decisionNumber",value:r.technicalPlanApproval.decisionNumber,onChange:u}),g.jsx(Oe,{label:"Ngày",name:"technicalPlanApproval.date",value:a(r.technicalPlanApproval.date),onChange:u,type:"date"})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Dự toán"}),g.jsx(Oe,{label:"Số Quyết định",name:"budgetApproval.decisionNumber",value:r.budgetApproval.decisionNumber,onChange:u}),g.jsx(Oe,{label:"Ngày",name:"budgetApproval.date",value:a(r.budgetApproval.date),onChange:u,type:"date"})]})]})]}),g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Mốc thời gian"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[g.jsx(Oe,{label:"Ngày triển khai thi công",name:"constructionStartDate",value:a(r.constructionStartDate),onChange:u,type:"date"}),g.jsx(Oe,{label:"Ngày nghiệm thu theo kế hoạch",name:"plannedAcceptanceDate",value:a(r.plannedAcceptanceDate),onChange:u,type:"date"})]})]}),g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Thông tin các Đơn vị & Cán bộ"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[g.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 rounded-md border border-blue-200",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Cán bộ Quản lý Dự án"}),g.jsx(Oe,{label:"Tên phòng",name:"projectManagementUnit.departmentName",value:((w=r.projectManagementUnit)==null?void 0:w.departmentName)||"",onChange:u}),g.jsx(Oe,{label:"Tên Cán bộ",name:"projectManagementUnit.personnelName",value:((N=r.projectManagementUnit)==null?void 0:N.personnelName)||"",onChange:u}),g.jsx(Oe,{label:"SĐT",name:"projectManagementUnit.phone",value:((V=r.projectManagementUnit)==null?void 0:V.phone)||"",onChange:u})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 rounded-md border border-blue-200",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Giám sát A của đơn vị QLVH"}),g.jsx(Oe,{label:"Tên XNDV",name:"supervisorA.enterpriseName",value:((I=r.supervisorA)==null?void 0:I.enterpriseName)||"",onChange:u}),g.jsx(Oe,{label:"Tên Cán bộ",name:"supervisorA.personnelName",value:((S=r.supervisorA)==null?void 0:S.personnelName)||"",onChange:u}),g.jsx(Oe,{label:"SĐT",name:"supervisorA.phone",value:((R=r.supervisorA)==null?void 0:R.phone)||"",onChange:u})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Đơn vị Thiết kế"}),g.jsx(Oe,{label:"Tên công ty",name:"designUnit.companyName",value:r.designUnit.companyName,onChange:u}),g.jsx(Oe,{label:"Chủ nhiệm đề án",name:"designUnit.personnelName",value:r.designUnit.personnelName,onChange:u}),g.jsx(Oe,{label:"SĐT",name:"designUnit.phone",value:r.designUnit.phone,onChange:u})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Đơn vị Thi công"}),g.jsx(Oe,{label:"Tên công ty",name:"constructionUnit.companyName",value:r.constructionUnit.companyName,onChange:u}),g.jsx(Oe,{label:"Chỉ huy trưởng",name:"constructionUnit.personnelName",value:r.constructionUnit.personnelName,onChange:u}),g.jsx(Oe,{label:"SĐT",name:"constructionUnit.phone",value:r.constructionUnit.phone,onChange:u})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Đơn vị Giám sát"}),g.jsx(Oe,{label:"Tên công ty",name:"supervisionUnit.companyName",value:r.supervisionUnit.companyName,onChange:u}),g.jsx(Oe,{label:"Giám sát trưởng",name:"supervisionUnit.personnelName",value:r.supervisionUnit.personnelName,onChange:u}),g.jsx(Oe,{label:"SĐT",name:"supervisionUnit.phone",value:r.supervisionUnit.phone,onChange:u})]})]})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Hủy"}),g.jsx("button",{type:"submit",className:"bg-success text-white font-bold py-2 px-6 rounded-md hover:bg-green-700 transition-colors",children:"Lưu Thay Đổi"})]})]})]})},X5=({report:t,onViewDetails:e,review:n,reviewerName:i})=>{const r=t.images.length>0?t.images[0]:null,o=t.images.length-1;return g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-lg border border-gray-200 flex flex-col overflow-hidden group transition-all duration-300 hover:shadow-xl hover:-translate-y-1 hover:ring-2 hover:ring-secondary cursor-pointer",onClick:e,children:[g.jsx("div",{className:"relative aspect-video bg-gray-100 flex items-center justify-center overflow-hidden",children:r?g.jsxs(g.Fragment,{children:[g.jsx("img",{src:r,alt:`Báo cáo ngày ${t.date}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),o>0&&g.jsxs("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-60 text-white text-xs font-bold px-2 py-1 rounded-md",children:["+",o," ảnh"]})]}):g.jsx("p",{className:"text-sm text-gray-400 italic",children:"Không có hình ảnh"})}),g.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[g.jsxs("div",{className:"mb-2",children:[g.jsx("h4",{className:"text-md font-bold text-primary",children:t.date}),g.jsxs("span",{className:"text-xs text-gray-500",children:["Bởi: ",t.submittedBy]})]}),g.jsx("div",{className:"flex-grow mt-1",children:g.jsx("p",{className:"text-sm text-gray-800 line-clamp-2",title:t.tasks,children:t.tasks})})]}),g.jsx("div",{className:"px-4 pb-4 mt-auto",children:n&&g.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-800 p-3 rounded-r-lg",children:[g.jsxs("p",{className:"font-bold text-sm",children:["✔️ ",i,":"]}),g.jsxs("p",{className:"text-sm italic truncate",children:['"',n.comment,'"']})]})})]})},$g=({message:t,onConfirm:e,onCancel:n,confirmText:i="Xác nhận",cancelText:s="Hủy",confirmButtonClass:r="bg-error text-white hover:opacity-90"})=>g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 animate-fade-in",role:"dialog","aria-modal":"true",onClick:n,children:g.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",onClick:o=>o.stopPropagation(),children:[g.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Xác nhận hành động"}),g.jsx("p",{className:"text-gray-600 mb-6 whitespace-pre-wrap",children:t}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{onClick:n,className:"bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:s}),g.jsx("button",{onClick:e,className:`font-bold py-2 px-4 rounded-md transition-colors ${r}`,children:i})]})]})}),W5=({images:t,startIndex:e,onClose:n})=>{const[i,s]=Q.useState(e);Q.useEffect(()=>{s(e)},[e]);const r=a=>{a.stopPropagation(),s(l=>l===0?t.length-1:l-1)},o=a=>{a.stopPropagation(),s(l=>l===t.length-1?0:l+1)};return Q.useEffect(()=>{const a=l=>{l.key==="ArrowLeft"?s(u=>u===0?t.length-1:u-1):l.key==="ArrowRight"?s(u=>u===t.length-1?0:u+1):l.key==="Escape"&&n()};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[t.length,n]),!t||t.length===0?null:g.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4 animate-fade-in",onClick:n,role:"dialog","aria-modal":"true",children:[g.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-50","aria-label":"Close",children:g.jsx(Ko,{className:"h-8 w-8"})}),g.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",onClick:a=>a.stopPropagation(),children:[t.length>1&&g.jsx("button",{onClick:r,className:"absolute left-2 sm:left-4 text-white hover:text-gray-300 p-2 bg-black bg-opacity-30 rounded-full z-50 transition-colors","aria-label":"Previous image",children:g.jsx(WU,{className:"h-8 w-8"})}),g.jsx("div",{className:"max-w-4xl max-h-[90vh] flex items-center justify-center",children:g.jsx("img",{src:t[i],alt:`Image ${i+1} of ${t.length}`,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"})}),t.length>1&&g.jsx("button",{onClick:o,className:"absolute right-2 sm:right-4 text-white hover:text-gray-300 p-2 bg-black bg-opacity-30 rounded-full z-50 transition-colors","aria-label":"Next image",children:g.jsx(ZU,{className:"h-8 w-8"})}),t.length>1&&g.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-sm bg-black bg-opacity-50 px-3 py-1 rounded-full",children:[i+1," / ",t.length]})]})]})},Z5=()=>g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-md border border-gray-200 flex flex-col overflow-hidden animate-pulse",children:[g.jsx("div",{className:"aspect-video bg-gray-300"}),g.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[g.jsxs("div",{className:"mb-2",children:[g.jsx("div",{className:"h-5 bg-gray-300 rounded w-1/2 mb-2"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),g.jsxs("div",{className:"flex-grow mt-2 space-y-2",children:[g.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})]}),e6=({report:t,project:e,currentUser:n,review:i,reviewerName:s,onClose:r,onEdit:o,onDelete:a,onReview:l,onImageClick:u})=>{const h=yn.canEditReport(n,e),m=yn.canDeleteReport(n,e),p=yn.canReviewReport(n,e);return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-40 p-4 animate-fade-in",onClick:r,children:g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-xl w-full max-w-3xl h-[90vh] flex flex-col",onClick:v=>v.stopPropagation(),children:[g.jsxs("header",{className:"p-4 border-b flex justify-between items-center sticky top-0 bg-white rounded-t-lg z-10",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-xl font-bold text-primary",children:"Chi tiết Báo cáo"}),g.jsxs("p",{className:"text-sm text-gray-500",children:["Ngày ",t.date," - Bởi: ",t.submittedBy]})]}),g.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-800 rounded-full hover:bg-gray-100",children:g.jsx(Ko,{className:"h-6 w-6"})})]}),g.jsxs("main",{className:"p-6 overflow-y-auto flex-grow space-y-6",children:[g.jsxs("section",{children:[g.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Nội dung công việc"}),g.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.tasks})]}),t.images.length>0&&g.jsxs("section",{children:[g.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Hình ảnh đính kèm"}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.images.map((v,w)=>g.jsx("div",{className:"relative group cursor-pointer",onClick:()=>u(t.images,w),children:g.jsx("img",{src:v,alt:`Hình ảnh báo cáo ${w+1}`,className:"w-full h-32 object-cover rounded-md shadow-sm transition-transform duration-200 group-hover:scale-105"})},w))})]}),g.jsxs("section",{children:[g.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Xác nhận & Nhận xét"}),i?g.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-800 p-4 rounded-r-lg",children:[g.jsxs("p",{className:"font-bold text-sm",children:["✔️ ",s,":"]}),g.jsxs("p",{className:"text-sm italic mt-1 whitespace-pre-wrap",children:['"',i.comment,'"']})]}):g.jsx("p",{className:"text-sm text-gray-500 italic",children:"Chưa có nhận xét nào."})]})]}),(h||m||p&&!i)&&g.jsxs("footer",{className:"p-4 bg-gray-50 flex justify-end space-x-3 rounded-b-lg border-t sticky bottom-0",children:[p&&!i&&g.jsx("button",{onClick:()=>l(t),className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Xác nhận & Nhận xét"}),h&&g.jsx("button",{onClick:()=>o(t),className:"bg-secondary text-white font-bold py-2 px-4 rounded-md hover:opacity-90",children:"Chỉnh sửa"}),m&&g.jsx("button",{onClick:()=>a(t.id,t.date),className:"bg-error text-white font-bold py-2 px-4 rounded-md hover:opacity-90",children:"Xóa"})]})]})})},t6=({report:t,currentUser:e,onClose:n,onAddReview:i})=>{const[s,r]=Q.useState(""),[o,a]=Q.useState(!1),l=async u=>{u.preventDefault(),s.trim()&&(a(!0),await i(t.projectId,t.id,s,e),a(!1),n())};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-40 p-4 animate-fade-in",onClick:n,children:g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-xl w-full max-w-lg",onClick:u=>u.stopPropagation(),children:[g.jsxs("header",{className:"p-4 border-b",children:[g.jsx("h3",{className:"text-xl font-bold text-primary",children:"Xác nhận & Nhận xét Báo cáo"}),g.jsxs("p",{className:"text-sm text-gray-500",children:["Ngày ",t.date]})]}),g.jsxs("form",{onSubmit:l,children:[g.jsxs("main",{className:"p-6",children:[g.jsx("label",{htmlFor:"reviewComment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nội dung nhận xét"}),g.jsx("textarea",{id:"reviewComment",value:s,onChange:u=>r(u.target.value),rows:4,placeholder:"Nhập nhận xét hoặc chỉ đạo của bạn...",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary",required:!0})]}),g.jsxs("footer",{className:"p-4 bg-gray-50 flex justify-end space-x-3 rounded-b-lg",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300",children:"Hủy"}),g.jsx("button",{type:"submit",disabled:o,className:"bg-success text-white font-bold py-2 px-6 rounded-md hover:bg-green-700 disabled:bg-gray-400",children:o?"Đang lưu...":"Lưu"})]})]})]})})},Ou=({title:t,children:e})=>g.jsxs("div",{className:"mb-8",children:[g.jsx("h4",{className:"text-lg font-semibold text-primary border-b-2 border-primary/20 pb-2 mb-4",children:t}),g.jsx("div",{className:"space-y-3",children:e})]}),Ys=({label:t,value:e,icon:n})=>g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-4 gap-y-1 text-sm items-start",children:[g.jsxs("dt",{className:"font-medium text-gray-500 flex items-center",children:[n&&g.jsx("span",{className:"mr-2 text-gray-400",children:n}),t]}),g.jsx("dd",{className:"text-gray-900 md:col-span-2",children:e||g.jsx("span",{className:"italic text-gray-400",children:"Chưa có thông tin"})})]}),ph=({title:t,approval:e})=>g.jsxs("div",{className:"space-y-2 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h5",{className:"font-semibold text-gray-800 text-base",children:t}),g.jsx(Ys,{label:"Số Quyết định",value:e.decisionNumber}),g.jsx(Ys,{label:"Ngày",value:e.date})]}),wa=({title:t,details:e})=>g.jsxs("div",{className:"p-4 bg-gray-50 rounded-md border h-full",children:[g.jsx("h5",{className:"font-semibold text-gray-800 mb-3 text-base",children:t}),g.jsx("div",{className:"space-y-2",children:e.map(n=>g.jsx(Ys,{label:n.label,value:n.value,icon:n.icon},n.label))})]}),n6=({project:t,reports:e,isReportsLoading:n,currentUser:i,users:s,onBack:r,onAddReport:o,onUpdateProject:a,onDeleteProject:l,onUpdateReport:u,onDeleteReport:h,onAddReportReview:m})=>{var kn;const[p,v]=Q.useState("details"),[w,N]=Q.useState("reports"),[V,I]=Q.useState(null),[S,R]=Q.useState(null),[M,U]=Q.useState(null),[O,A]=Q.useState(!1),[T,E]=Q.useState(""),[b,D]=Q.useState(""),[P,x]=Q.useState(null),[xe,Ne]=Q.useState(0),[H,W]=Q.useState(null);Q.useEffect(()=>{if(T){D("");let J=0;const _e=setInterval(()=>{D(Ke=>Ke+T.charAt(J)),J++,J>T.length&&clearInterval(_e)},10);return()=>clearInterval(_e)}},[T]),Q.useEffect(()=>{E(""),D(""),N("reports")},[t.id]);const Z=async()=>{A(!0),E(""),D("");try{const J=await J5(t,e);E(J)}catch(J){console.error("Failed to generate summary:",J),E("Đã xảy ra lỗi khi tạo tóm tắt. Vui lòng thử lại.")}finally{A(!1)}},Se=J=>{I(J),v("editReport")},ze=(J,_e)=>{R({id:J,date:_e})},Sn=async()=>{S&&(await h(S.id,t.id),R(null))},An=async J=>{await u(J),v("details"),I(null)},Un=async J=>{await a(J),v("details")},lt=(J,_e)=>{x(J),Ne(_e)},$t=J=>{var _e;return((_e=s.find(Ke=>Ke.id===J))==null?void 0:_e.name)||"N/A"},K=Q.useMemo(()=>yn.canAddReport(i,t),[i,t]),j=Q.useMemo(()=>yn.canEditProject(i,t),[i,t]),le=Q.useMemo(()=>s.filter(J=>t.projectManagerIds.includes(J.id)).map(J=>J.name).join(", ")||g.jsx("span",{className:"italic text-gray-400",children:"Chưa gán"}),[s,t.projectManagerIds]),ue=Q.useMemo(()=>s.filter(J=>t.leadSupervisorIds.includes(J.id)).map(J=>J.name).join(", ")||g.jsx("span",{className:"italic text-gray-400",children:"Chưa gán"}),[s,t.leadSupervisorIds]);if(p==="editProject")return g.jsx(j5,{project:t,users:s,currentUser:i,onUpdateProject:Un,onCancel:()=>v("details")});if(p==="addReport")return i?g.jsx($5,{projectId:t.id,currentUser:i,onAddReport:async J=>{await o(J),v("details")},onCancel:()=>v("details")}):null;if(p==="editReport"&&V)return g.jsx(Q5,{report:V,onUpdateReport:An,onCancel:()=>{v("details"),I(null)}});const Ae=()=>{var J,_e,Ke,In,jo,ut;return g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-md p-6 border border-gray-200 animate-fade-in",children:[(i==null?void 0:i.role)===cr.Admin&&g.jsxs(Ou,{title:"Nhân sự Phụ trách (Phân quyền)",children:[g.jsx(Ys,{label:"Cán bộ Quản lý",value:le,icon:g.jsx(jT,{})}),g.jsx(Ys,{label:"Giám sát trưởng",value:ue,icon:g.jsx(jT,{})})]}),g.jsxs(Ou,{title:"Mốc thời gian",children:[g.jsx(Ys,{label:"Ngày triển khai thi công",value:t.constructionStartDate,icon:g.jsx(rd,{})}),g.jsx(Ys,{label:"Ngày nghiệm thu theo kế hoạch",value:t.plannedAcceptanceDate,icon:g.jsx(rd,{})})]}),g.jsx(Ou,{title:"Thông tin Phê duyệt",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-2",children:[g.jsx(ph,{title:"Kế hoạch vốn",approval:t.capitalPlanApproval}),g.jsx(ph,{title:"Phương án kỹ thuật",approval:t.technicalPlanApproval}),g.jsx(ph,{title:"Dự toán",approval:t.budgetApproval})]})}),g.jsx(Ou,{title:"Thông tin các Đơn vị & Cán bộ",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",children:[g.jsx(wa,{title:"Cán bộ Quản lý Dự án",details:[{label:"Tên phòng",value:((J=t.projectManagementUnit)==null?void 0:J.departmentName)||"",icon:g.jsx(Sa,{})},{label:"Tên Cán bộ",value:((_e=t.projectManagementUnit)==null?void 0:_e.personnelName)||"",icon:g.jsx(Aa,{})},{label:"SĐT",value:((Ke=t.projectManagementUnit)==null?void 0:Ke.phone)||"",icon:g.jsx(Ca,{})}]}),g.jsx(wa,{title:"Giám sát A (QLVH)",details:[{label:"Tên XNDV",value:((In=t.supervisorA)==null?void 0:In.enterpriseName)||"",icon:g.jsx(Sa,{})},{label:"Tên Cán bộ",value:((jo=t.supervisorA)==null?void 0:jo.personnelName)||"",icon:g.jsx(Aa,{})},{label:"SĐT",value:((ut=t.supervisorA)==null?void 0:ut.phone)||"",icon:g.jsx(Ca,{})}]}),g.jsx(wa,{title:"Đơn vị Thiết kế",details:[{label:"Tên công ty",value:t.designUnit.companyName,icon:g.jsx(Sa,{})},{label:"Chủ nhiệm đề án",value:t.designUnit.personnelName,icon:g.jsx(Aa,{})},{label:"SĐT",value:t.designUnit.phone,icon:g.jsx(Ca,{})}]}),g.jsx(wa,{title:"Đơn vị Thi công",details:[{label:"Tên công ty",value:t.constructionUnit.companyName,icon:g.jsx(Sa,{})},{label:"Chỉ huy trưởng",value:t.constructionUnit.personnelName,icon:g.jsx(Aa,{})},{label:"SĐT",value:t.constructionUnit.phone,icon:g.jsx(Ca,{})}]}),g.jsx(wa,{title:"Đơn vị Giám sát",details:[{label:"Tên công ty",value:t.supervisionUnit.companyName,icon:g.jsx(Sa,{})},{label:"Giám sát trưởng",value:t.supervisionUnit.personnelName,icon:g.jsx(Aa,{})},{label:"SĐT",value:t.supervisionUnit.phone,icon:g.jsx(Ca,{})}]})]})})]})},ln=()=>g.jsxs("div",{className:"animate-fade-in space-y-8",children:[g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-md p-6 border border-gray-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-xl font-bold text-primary",children:"Tóm tắt tiến độ (AI)"}),g.jsx("button",{onClick:Z,disabled:O,className:"bg-primary text-white font-semibold py-2 px-4 rounded-md hover:opacity-90 disabled:bg-gray-400 disabled:cursor-wait transition-colors",children:O?"Đang tạo...":"Tạo tóm tắt"})]}),O&&!b&&g.jsx("p",{className:"text-gray-600",children:"AI đang phân tích báo cáo, vui lòng chờ..."}),b&&g.jsx("div",{className:"prose max-w-none text-gray-700 whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:b.replace(/\n/g,"<br />")}})]}),g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-md p-6 border border-gray-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[g.jsx("h3",{className:"text-xl font-bold text-primary",children:"Báo cáo hàng ngày"}),K&&g.jsx("button",{onClick:()=>v("addReport"),className:"bg-success text-white font-bold py-2 px-6 rounded-md hover:bg-green-700 transition-colors",children:"+ Gửi báo cáo mới"})]}),n?g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(4)].map((J,_e)=>g.jsx(Z5,{},_e))}):e.length>0?g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(J=>{var _e;return g.jsx(X5,{report:J,onViewDetails:()=>W(J),review:J.managerReview,reviewerName:((_e=J.managerReview)==null?void 0:_e.reviewedByName)||(J.managerReview?$t(J.managerReview.reviewedById):"")},J.id)})}):g.jsx("div",{className:"text-center py-8",children:g.jsx("p",{className:"text-gray-500",children:"Chưa có báo cáo nào cho dự án này."})})]})]}),Cn=()=>{const _e=(Ke=>{if(!Ke)return null;if(Ke.trim().startsWith("<iframe")){const In=Ke.match(/src="([^"]+)"/);return In?In[1]:null}return Ke})(t.scheduleSheetUrl);return _e?g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-md border border-gray-200 animate-fade-in overflow-hidden",children:[t.scheduleSheetEditUrl&&g.jsx("div",{className:"p-3 bg-gray-50 border-b flex justify-end items-center",children:g.jsxs("a",{href:t.scheduleSheetEditUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-secondary hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary transition-colors",children:[g.jsx(ek,{className:"h-5 w-5 mr-2"}),"Mở trong Google Sheets để chỉnh sửa"]})}),g.jsx("div",{className:"w-full h-[75vh]",children:g.jsx("iframe",{src:_e,className:"w-full h-full border-0",title:"Kế hoạch tiến độ dự án",allowFullScreen:!0})})]}):g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-md p-8 border border-gray-200 animate-fade-in text-center",children:[g.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"Chưa có Kế hoạch Tiến độ"}),g.jsx("p",{className:"text-gray-600 mb-6",children:"Kế hoạch tiến độ chi tiết cho dự án này chưa được liên kết."}),j&&g.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 text-left",children:[g.jsx("p",{className:"font-semibold text-blue-800",children:"Hướng dẫn:"}),g.jsx("p",{className:"text-blue-700",children:'Vui lòng nhấn nút "Chỉnh sửa Dự án" và dán link nhúng (embed URL) từ Google Sheets vào trường "Kế hoạch Tiến độ" để hiển thị tại đây.'})]})]})};return g.jsxs("div",{className:"animate-fade-in space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-4",children:[g.jsxs("div",{children:[g.jsxs("button",{onClick:r,className:"text-secondary hover:text-accent font-semibold flex items-center mb-2",children:[g.jsx(Hw,{className:"h-5 w-5 mr-2"}),"Trở về Dashboard"]}),g.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:t.name})]}),j&&g.jsx("button",{onClick:()=>v("editProject"),className:"bg-secondary text-white font-bold py-2 px-4 rounded-md hover:opacity-90 transition-opacity",children:"Chỉnh sửa Dự án"})]}),g.jsx("div",{className:"border-b border-gray-200",children:g.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[g.jsx("button",{onClick:()=>N("reports"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${w==="reports"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,"aria-current":w==="reports"?"page":void 0,children:"Báo cáo & Tiến độ"}),g.jsx("button",{onClick:()=>N("workItems"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${w==="workItems"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,"aria-current":w==="workItems"?"page":void 0,children:"Hạng mục Công việc"}),g.jsx("button",{onClick:()=>N("info"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors ${w==="info"?"border-secondary text-secondary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,"aria-current":w==="info"?"page":void 0,children:"Thông tin Dự án"})]})}),g.jsxs("div",{children:[w==="reports"&&ln(),w==="info"&&Ae(),w==="workItems"&&Cn()]}),M&&i&&g.jsx(t6,{report:M,currentUser:i,onClose:()=>U(null),onAddReview:m}),S&&g.jsx($g,{message:`Bạn có chắc chắn muốn xóa báo cáo ngày "${S.date}"?`,onConfirm:Sn,onCancel:()=>R(null)}),P&&g.jsx(W5,{images:P,startIndex:xe,onClose:()=>x(null)}),H&&g.jsx(e6,{report:H,project:t,currentUser:i,review:H.managerReview,reviewerName:((kn=H.managerReview)==null?void 0:kn.reviewedByName)||(H.managerReview?$t(H.managerReview.reviewedById):""),onClose:()=>W(null),onEdit:J=>{W(null),Se(J)},onDelete:(J,_e)=>{W(null),ze(J,_e)},onReview:J=>{W(null),U(J)},onImageClick:lt})]})},Pe=({label:t,type:e="text",...n})=>g.jsxs("div",{children:[g.jsx("label",{htmlFor:n.name,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),g.jsx("input",{id:n.name,type:e,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary bg-white text-gray-900",style:e==="date"?{colorScheme:"light"}:{},...n})]}),Ra=t=>{if(!t||typeof t!="string")return"";const e=t.split("/");if(e.length!==3)return"";const[n,i,s]=e;return`${s}-${i.padStart(2,"0")}-${n.padStart(2,"0")}`},i6=t=>{if(!t||typeof t!="string")return"";const e=t.split("-");if(e.length!==3)return"";const[n,i,s]=e;return`${s.padStart(2,"0")}/${i.padStart(2,"0")}/${n}`},s6={name:"",projectManagerIds:[],leadSupervisorIds:[],constructionStartDate:"",plannedAcceptanceDate:"",capitalPlanApproval:{decisionNumber:"",date:""},technicalPlanApproval:{decisionNumber:"",date:""},budgetApproval:{decisionNumber:"",date:""},designUnit:{companyName:"",personnelName:"",phone:""},constructionUnit:{companyName:"",personnelName:"",phone:""},supervisionUnit:{companyName:"",personnelName:"",phone:""},projectManagementUnit:{departmentName:"",personnelName:"",phone:""},supervisorA:{enterpriseName:"",personnelName:"",phone:""},scheduleSheetUrl:"",scheduleSheetEditUrl:""},r6=({onAddProject:t,onCancel:e,users:n})=>{const[i,s]=Q.useState(s6),r=h=>{const{name:m,value:p,type:v}=h.target,w=v==="date"?i6(p):p,N=m.split(".");N.length>1?s(V=>({...V,[N[0]]:{...V[N[0]],[N[1]]:w}})):s(V=>({...V,[m]:w}))},o=h=>{const{name:m,options:p}=h.target,v=Array.from(p).filter(w=>w.selected).map(w=>w.value);s(w=>({...w,[m]:v}))},a=h=>{h.preventDefault(),t(i)},l=n.filter(h=>h.role===cr.ProjectManager),u=n.filter(h=>h.role===cr.LeadSupervisor);return g.jsxs("div",{className:"bg-base-100 p-6 sm:p-8 rounded-lg shadow-lg border border-gray-200 animate-fade-in max-w-4xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Thêm dự án mới"}),g.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 font-semibold",children:"← Quay lại"})]}),g.jsxs("form",{onSubmit:a,className:"space-y-8",children:[g.jsx(Pe,{label:"Tên Dự án",name:"name",value:i.name,onChange:r,required:!0}),g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Kế hoạch Tiến độ (Google Sheet)"}),g.jsxs("div",{className:"mt-2 space-y-4",children:[g.jsxs("div",{children:[g.jsx(Pe,{label:"Link nhúng (để hiển thị)",name:"scheduleSheetUrl",value:i.scheduleSheetUrl||"",onChange:r,placeholder:"Dán link nhúng (src) từ Google Sheets..."}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Trong Google Sheet, chọn 'Tệp' > 'Chia sẻ' > 'Xuất bản lên web' > 'Nhúng', sau đó sao chép đường link trong thuộc tính 'src'."})]}),g.jsxs("div",{children:[g.jsx(Pe,{label:"Link Chỉnh sửa (để mở file gốc)",name:"scheduleSheetEditUrl",value:i.scheduleSheetEditUrl||"",onChange:r,placeholder:"Dán link từ thanh địa chỉ trình duyệt..."}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sao chép đường link bình thường từ thanh địa chỉ của trình duyệt (link có chữ /edit ở cuối)."})]})]})]}),g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Gán Nhân sự Phụ trách (để phân quyền)"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"projectManagerIds",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cán bộ Quản lý (chọn nhiều)"}),g.jsx("select",{id:"projectManagerIds",name:"projectManagerIds",multiple:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary h-32 bg-white text-gray-900",value:i.projectManagerIds,onChange:o,children:l.map(h=>g.jsx("option",{value:h.id,children:h.name},h.id))})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"leadSupervisorIds",className:"block text-sm font-medium text-gray-700 mb-1",children:"Giám sát trưởng (chọn nhiều)"}),g.jsx("select",{id:"leadSupervisorIds",name:"leadSupervisorIds",multiple:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary h-32 bg-white text-gray-900",value:i.leadSupervisorIds,onChange:o,children:u.map(h=>g.jsx("option",{value:h.id,children:h.name},h.id))})]})]})]}),g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Thông tin Phê duyệt"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-2",children:[g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Kế hoạch vốn"}),g.jsx(Pe,{label:"Số Quyết định",name:"capitalPlanApproval.decisionNumber",value:i.capitalPlanApproval.decisionNumber,onChange:r}),g.jsx(Pe,{label:"Ngày",name:"capitalPlanApproval.date",value:Ra(i.capitalPlanApproval.date),onChange:r,type:"date"})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Phương án kỹ thuật"}),g.jsx(Pe,{label:"Số Quyết định",name:"technicalPlanApproval.decisionNumber",value:i.technicalPlanApproval.decisionNumber,onChange:r}),g.jsx(Pe,{label:"Ngày",name:"technicalPlanApproval.date",value:Ra(i.technicalPlanApproval.date),onChange:r,type:"date"})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Dự toán"}),g.jsx(Pe,{label:"Số Quyết định",name:"budgetApproval.decisionNumber",value:i.budgetApproval.decisionNumber,onChange:r}),g.jsx(Pe,{label:"Ngày",name:"budgetApproval.date",value:Ra(i.budgetApproval.date),onChange:r,type:"date"})]})]})]}),g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Mốc thời gian"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[g.jsx(Pe,{label:"Ngày triển khai thi công",name:"constructionStartDate",value:Ra(i.constructionStartDate),onChange:r,type:"date",required:!0}),g.jsx(Pe,{label:"Ngày nghiệm thu theo kế hoạch",name:"plannedAcceptanceDate",value:Ra(i.plannedAcceptanceDate),onChange:r,type:"date",required:!0})]})]}),g.jsxs("fieldset",{className:"p-4 border rounded-md",children:[g.jsx("legend",{className:"px-2 font-semibold text-gray-700",children:"Thông tin các Đơn vị & Cán bộ"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[g.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 rounded-md border border-blue-200",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Cán bộ Quản lý Dự án"}),g.jsx(Pe,{label:"Tên phòng",name:"projectManagementUnit.departmentName",value:i.projectManagementUnit.departmentName,onChange:r}),g.jsx(Pe,{label:"Tên Cán bộ",name:"projectManagementUnit.personnelName",value:i.projectManagementUnit.personnelName,onChange:r}),g.jsx(Pe,{label:"SĐT",name:"projectManagementUnit.phone",value:i.projectManagementUnit.phone,onChange:r})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-blue-50 rounded-md border border-blue-200",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Giám sát A của đơn vị QLVH"}),g.jsx(Pe,{label:"Tên XNDV",name:"supervisorA.enterpriseName",value:i.supervisorA.enterpriseName,onChange:r}),g.jsx(Pe,{label:"Tên Cán bộ",name:"supervisorA.personnelName",value:i.supervisorA.personnelName,onChange:r}),g.jsx(Pe,{label:"SĐT",name:"supervisorA.phone",value:i.supervisorA.phone,onChange:r})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Đơn vị Thiết kế"}),g.jsx(Pe,{label:"Tên công ty",name:"designUnit.companyName",value:i.designUnit.companyName,onChange:r}),g.jsx(Pe,{label:"Chủ nhiệm đề án",name:"designUnit.personnelName",value:i.designUnit.personnelName,onChange:r}),g.jsx(Pe,{label:"SĐT",name:"designUnit.phone",value:i.designUnit.phone,onChange:r})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Đơn vị Thi công"}),g.jsx(Pe,{label:"Tên công ty",name:"constructionUnit.companyName",value:i.constructionUnit.companyName,onChange:r}),g.jsx(Pe,{label:"Chỉ huy trưởng",name:"constructionUnit.personnelName",value:i.constructionUnit.personnelName,onChange:r}),g.jsx(Pe,{label:"SĐT",name:"constructionUnit.phone",value:i.constructionUnit.phone,onChange:r})]}),g.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-md border",children:[g.jsx("h4",{className:"font-medium text-gray-800",children:"Đơn vị Giám sát"}),g.jsx(Pe,{label:"Tên công ty",name:"supervisionUnit.companyName",value:i.supervisionUnit.companyName,onChange:r}),g.jsx(Pe,{label:"Giám sát trưởng",name:"supervisionUnit.personnelName",value:i.supervisionUnit.personnelName,onChange:r}),g.jsx(Pe,{label:"SĐT",name:"supervisionUnit.phone",value:i.supervisionUnit.phone,onChange:r})]})]})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[g.jsx("button",{type:"button",onClick:e,className:"bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Hủy"}),g.jsx("button",{type:"submit",className:"bg-success text-white font-bold py-2 px-6 rounded-md hover:bg-green-700 transition-colors",children:"Tạo Dự án"})]})]})]})},o6=({users:t,currentUser:e,onEdit:n,onDelete:i})=>g.jsx("div",{className:"bg-base-100 shadow-md rounded-lg overflow-hidden border border-gray-200",children:g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tên"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vai trò"}),g.jsx("th",{scope:"col",className:"relative px-6 py-3",children:g.jsx("span",{className:"sr-only",children:"Hành động"})})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(s=>g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("div",{className:"text-sm text-gray-500",children:s.email})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:s.role})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:g.jsxs("div",{className:"flex items-center justify-end space-x-4",children:[g.jsx("button",{onClick:()=>n(s),className:"text-secondary hover:text-accent transition-colors",children:"Chỉnh sửa"}),yn.canDeleteUser(e)&&g.jsx("button",{onClick:()=>i(s.id,s.name),className:`text-error hover:text-red-700 transition-colors ${s.id===e.id?"opacity-50 cursor-not-allowed":""}`,disabled:s.id===e.id,"aria-label":`Xóa ${s.name}`,children:"Xóa"})]})})]},s.id))})]})})}),a6=({user:t,onUpdateUser:e,onCancel:n})=>{const[i,s]=Q.useState(t);Q.useEffect(()=>{s(t)},[t]);const r=a=>{const{name:l,value:u}=a.target;s(h=>({...h,[l]:u}))},o=a=>{a.preventDefault(),e(i)};return g.jsxs("div",{className:"bg-base-100 p-6 sm:p-8 rounded-lg shadow-lg border border-gray-200 animate-fade-in",children:[g.jsx("h2",{className:"text-2xl font-bold text-primary mb-6",children:"Chỉnh sửa Người dùng"}),g.jsxs("form",{onSubmit:o,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên"}),g.jsx("input",{id:"name",name:"name",type:"text",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary bg-white text-gray-900",value:i.name,onChange:r,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),g.jsx("input",{id:"email",name:"email",type:"email",className:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed",value:i.email,readOnly:!0,disabled:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Vai trò"}),g.jsx("select",{id:"role",name:"role",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-secondary focus:border-secondary bg-white text-gray-900",value:i.role,onChange:r,required:!0,children:Object.values(cr).map(a=>g.jsx("option",{value:a,children:a},a))})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[g.jsx("button",{type:"button",onClick:n,className:"bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Hủy"}),g.jsx("button",{type:"submit",className:"bg-success text-white font-bold py-2 px-6 rounded-md hover:bg-green-700 transition-colors",children:"Lưu Thay Đổi"})]})]})]})},l6=({users:t,currentUser:e,onUpdateUser:n,onDeleteUser:i,onBack:s})=>{const[r,o]=Q.useState(null),[a,l]=Q.useState(null),u=v=>{o(v)},h=v=>{n(v),o(null)},m=(v,w)=>{l({id:v,name:w})},p=()=>{a&&(i(a.id),l(null))};return r?g.jsx(a6,{user:r,onUpdateUser:h,onCancel:()=>o(null)}):g.jsxs("div",{className:"animate-fade-in",children:[g.jsx("div",{className:"flex justify-between items-center mb-6",children:g.jsxs("div",{children:[g.jsxs("button",{onClick:s,className:"text-secondary hover:text-accent font-semibold flex items-center",children:[g.jsx(Hw,{className:"h-5 w-5 mr-2"}),"Trở về Dashboard"]}),g.jsx("h2",{className:"text-3xl font-bold text-gray-800 mt-2",children:"Quản lý Người dùng"})]})}),g.jsx(o6,{users:t,currentUser:e,onEdit:u,onDelete:m}),a&&g.jsx($g,{message:`Bạn có chắc chắn muốn xóa người dùng "${a.name}"?
Hành động này sẽ xóa vĩnh viễn tài khoản khỏi hệ thống.`,onConfirm:p,onCancel:()=>l(null)})]})},u6=({message:t,type:e,onClose:n})=>{const[i,s]=Q.useState(!1);Q.useEffect(()=>{const u=setTimeout(()=>s(!0),10),h=setTimeout(()=>{s(!1),setTimeout(n,300)},3500);return()=>{clearTimeout(u),clearTimeout(h)}},[]);const r="flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow-lg transition-all duration-300",o={success:"text-green-800 bg-green-50",error:"text-red-800 bg-red-50"},a=i?"opacity-100 translate-x-0":"opacity-0 translate-x-full",l=()=>e==="success"?g.jsx("svg",{className:"w-5 h-5 text-green-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})}):g.jsx("svg",{className:"w-5 h-5 text-red-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 11.793a1 1 0 1 1-1.414 1.414L10 11.414l-2.293 2.293a1 1 0 0 1-1.414-1.414L8.586 10 6.293 7.707a1 1 0 0 1 1.414-1.414L10 8.586l2.293-2.293a1 1 0 0 1 1.414 1.414L11.414 10l2.293 2.293Z"})});return g.jsxs("div",{className:`${r} ${o[e]} ${a}`,role:"alert",children:[g.jsxs("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",children:[g.jsx(l,{}),g.jsxs("span",{className:"sr-only",children:[e," icon"]})]}),g.jsx("div",{className:"ms-3 text-sm font-normal",children:t})]})},c6=()=>g.jsxs("div",{className:"bg-base-100 rounded-lg shadow-lg overflow-hidden flex flex-col animate-pulse",children:[g.jsxs("div",{className:"p-6 flex-grow",children:[g.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-4"}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-5 w-5 mr-2 bg-gray-300 rounded-full"}),g.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]}),g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"h-5 w-5 mr-2 bg-gray-300 rounded-full"}),g.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]})]}),g.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[g.jsxs("div",{className:"flex justify-between mb-2",children:[g.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/3"}),g.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4"})]}),g.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:g.jsx("div",{className:"bg-gray-300 h-2.5 rounded-full",style:{width:"45%"}})})]})]}),g.jsx("div",{className:"bg-gray-200 px-6 py-3",children:g.jsx("div",{className:"h-6 w-full bg-gray-300 rounded"})})]}),d6=()=>g.jsx("footer",{className:"w-full text-center p-4 mt-auto text-sm text-gray-500 border-t border-gray-200 bg-neutral",children:g.jsx("p",{children:"© 2025 NPSC - 0982 722 036"})}),f6=()=>{const[t,e]=Q.useState(null),[n,i]=Q.useState(null),[s,r]=Q.useState(null),[o,a]=Q.useState([]),[l,u]=Q.useState([]),[h,m]=Q.useState([]),[p,v]=Q.useState("dashboard"),[w,N]=Q.useState(null),[V,I]=Q.useState(!0),[S,R]=Q.useState(!0),[M,U]=Q.useState(null),[O,A]=Q.useState([]),T=(K,j)=>{const le=Date.now();A(ue=>[...ue,{id:le,message:K,type:j}]),setTimeout(()=>{A(ue=>ue.filter(Ae=>Ae.id!==le))},4e3)};Q.useEffect(()=>{const K=AD(Ea,j=>{e(j),j||(i(null),I(!1))});return()=>K()},[]),Q.useEffect(()=>{if(!t)return;const K=qn(Tt,"users",t.uid),j=Rr(K,le=>{if(le.exists()){const ue=le.data(),Ae={id:le.id,...ue};i(Ae)}else console.error("User document not found in Firestore!"),oh(Ea)},le=>{console.error("Error fetching user data:",le),r("Failed to load user profile."),oh(Ea)});return()=>j()},[t]),Q.useEffect(()=>{if(!n)return a([]),m([]),I(!1),()=>{};I(!0);const K=[];if(!yn.canFetchAllUsers(n))m([n]);else{const j=wr(ki(Tt,"users"),KT("name")),le=Rr(j,ue=>{m(ue.docs.map(Ae=>({id:Ae.id,...Ae.data()})))},ue=>{console.error("Error fetching users:",ue),m([])});K.push(le)}if(yn.canAddProject(n)){const j=wr(ki(Tt,"projects"),KT("name")),le=Rr(j,ue=>{a(ue.docs.map(Ae=>({id:Ae.id,...Ae.data()}))),I(!1)},ue=>{console.error("Error fetching projects:",ue),I(!1)});K.push(le)}else{const j=wr(ki(Tt,"projects"),ku("projectManagerIds","array-contains",n.id)),le=wr(ki(Tt,"projects"),ku("leadSupervisorIds","array-contains",n.id));let ue=[],Ae=[];const ln=()=>{const J=new Map;ue.forEach(Ke=>J.set(Ke.id,Ke)),Ae.forEach(Ke=>J.set(Ke.id,Ke));const _e=Array.from(J.values()).sort((Ke,In)=>Ke.name.localeCompare(In.name));a(_e),I(!1)},Cn=Rr(j,J=>{ue=J.docs.map(_e=>({id:_e.id,..._e.data()})),ln()},J=>{console.error("Error fetching manager projects:",J),I(!1)}),kn=Rr(le,J=>{Ae=J.docs.map(_e=>({id:_e.id,..._e.data()})),ln()},J=>{console.error("Error fetching supervisor projects:",J),I(!1)});K.push(Cn),K.push(kn)}return()=>{K.forEach(j=>j())}},[n]),Q.useEffect(()=>{if(!n||o.length===0)return u([]),R(!1),()=>{};R(!0);const K=o.map(Ae=>Ae.id);K.length>30&&console.warn(`User has access to ${K.length} projects. Firestore can only query 30 at a time. Data may be incomplete.`);const j=K.slice(0,30);if(j.length===0){u([]),R(!1);return}const le=wr(ki(Tt,"reports"),ku("projectId","in",j)),ue=Rr(le,Ae=>{const ln=Ae.docs.map(Cn=>({id:Cn.id,...Cn.data()}));u(ln),R(!1)},Ae=>{console.error("Error fetching reports:",Ae),u([]),R(!1)});return()=>ue()},[o,n]);const E=Q.useMemo(()=>o.find(K=>K.id===w),[o,w]),b=Q.useMemo(()=>{if(!E)return[];const K=E.reviews||{};return l.filter(j=>j.projectId===w).map(j=>({...j,managerReview:K[j.id]})).sort((j,le)=>{const[ue,Ae,ln]=j.date.split("/").map(Number),[Cn,kn,J]=le.date.split("/").map(Number);return new Date(J,kn-1,Cn).getTime()-new Date(ln,Ae-1,ue).getTime()})},[l,E]),D=async(K,j)=>{r(null);try{await TD(Ea,K,j)}catch(le){console.error(le),r("Email hoặc mật khẩu không đúng.")}},P=async()=>{await oh(Ea),i(null),v("dashboard"),N(null)},x=async K=>{try{await QT(ki(Tt,"projects"),K),v("dashboard"),T("Dự án đã được tạo thành công!","success")}catch(j){console.error("Error adding project:",j),T("Lỗi khi tạo dự án.","error")}},xe=async K=>{try{const j=qn(Tt,"projects",K.id),{id:le,...ue}=K;await Ta(j,ue),T("Dự án đã được cập nhật!","success")}catch(j){console.error("Error updating project:",j),T("Lỗi khi cập nhật dự án.","error")}},Ne=(K,j)=>{U({id:K,name:j})},H=async()=>{if(M)try{const K=M.id,j=wr(ki(Tt,"reports"),ku("projectId","==",K)),le=await YU(j),ue=[];le.docs.forEach(Ae=>ue.push(Lu(Ae.ref))),await Promise.all(ue),await Lu(qn(Tt,"projects",K)),T(`Dự án "${M.name}" đã được xóa.`,"success"),U(null),w===K&&(v("dashboard"),N(null))}catch(K){console.error("Error performing cascading delete for project:",K),T("Lỗi khi xóa dự án.","error"),U(null)}},W=async K=>{try{await QT(ki(Tt,"reports"),K),T("Báo cáo đã được gửi thành công!","success")}catch(j){console.error("Error adding report:",j),T("Lỗi khi gửi báo cáo.","error")}},Z=async K=>{try{const j=qn(Tt,"reports",K.id),{id:le,...ue}=K;await Ta(j,ue),T("Báo cáo đã được cập nhật!","success")}catch(j){console.error("Error updating report:",j),T("Lỗi khi cập nhật báo cáo.","error")}},Se=async(K,j)=>{try{const le=qn(Tt,"projects",j);await Ta(le,{[`reviews.${K}`]:JU()}),await Lu(qn(Tt,"reports",K)),T("Báo cáo đã được xóa.","success")}catch(le){console.error("Error deleting report and its review:",le),T("Lỗi khi xóa báo cáo.","error")}},ze=async(K,j,le,ue)=>{try{const Ae=qn(Tt,"projects",K),ln={comment:le,reviewedById:ue.id,reviewedByName:ue.name,reviewedAt:new Date().toISOString()};await Ta(Ae,{[`reviews.${j}`]:ln}),T("Nhận xét đã được lưu.","success")}catch(Ae){console.error("Error adding report review:",Ae),T("Không thể lưu nhận xét.","error")}},Sn=async K=>{try{const j=qn(Tt,"users",K.id),{id:le,...ue}=K;await Ta(j,ue),T("Thông tin người dùng đã được cập nhật.","success")}catch(j){console.error("Error updating user:",j),T("Lỗi khi cập nhật người dùng.","error")}},An=async K=>{if(n&&K===n.id){T("Bạn không thể tự xóa chính mình.","error");return}try{await Lu(qn(Tt,"users",K)),T("Người dùng đã được xóa.","success")}catch(j){console.error("Error deleting user:",j),T("Lỗi khi xóa người dùng.","error")}},Un=K=>{N(K),v("projectDetails")},lt=()=>{N(null),v("dashboard")};if(V&&!n)return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-base-200",children:g.jsx("p",{className:"text-xl",children:"Đang tải ứng dụng..."})});if(!n)return g.jsx(sk,{onLogin:D,error:s});const $t=()=>{switch(p){case"projectDetails":return E?g.jsx(n6,{project:E,reports:b,isReportsLoading:S,currentUser:n,users:h,onBack:lt,onAddReport:W,onUpdateProject:xe,onDeleteProject:Ne,onUpdateReport:Z,onDeleteReport:Se,onAddReportReview:ze}):(lt(),null);case"addProject":return g.jsx(r6,{onAddProject:x,onCancel:lt,users:h});case"userManagement":return g.jsx(l6,{users:h,currentUser:n,onUpdateUser:Sn,onDeleteUser:An,onBack:lt});case"dashboard":default:return g.jsxs("div",{className:"animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[g.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Danh sách Dự án"}),g.jsxs("div",{className:"flex gap-2 sm:gap-4",children:[yn.canManageUsers(n)&&g.jsx("button",{onClick:()=>v("userManagement"),className:"bg-neutral text-primary font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors",children:"Quản lý User"}),yn.canAddProject(n)&&g.jsx("button",{onClick:()=>v("addProject"),className:"bg-primary text-white font-bold py-2 px-4 rounded-md hover:opacity-90 transition-opacity",children:"Thêm Dự án +"})]})]}),V?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((K,j)=>g.jsx(c6,{},j))}):o.length>0?g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(K=>g.jsx(ok,{project:K,currentUser:n,onSelectProject:Un,onDeleteProject:Ne},K.id))}):g.jsx("p",{className:"text-center text-gray-500 mt-8",children:"Không có dự án nào để hiển thị."})]})}};return g.jsxs("div",{className:"min-h-screen bg-neutral flex flex-col",children:[g.jsx(rk,{user:n,onLogout:P}),g.jsx("main",{className:"p-4 sm:p-6 lg:p-8 flex-grow",children:$t()}),g.jsx(d6,{}),M&&g.jsx($g,{message:`Bạn có chắc chắn muốn xóa dự án "${M.name}"?
Tất cả báo cáo và nhận xét liên quan cũng sẽ bị xóa vĩnh viễn.`,onConfirm:H,onCancel:()=>U(null)}),g.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:O.map(K=>g.jsx(u6,{message:K.message,type:K.type,onClose:()=>A(j=>j.filter(le=>le.id!==K.id))},K.id))})]})},mR=document.getElementById("root");if(!mR)throw new Error("Could not find root element to mount to");const h6=qN.createRoot(mR);h6.render(g.jsx(rb.StrictMode,{children:g.jsx(f6,{})}));
